[{"path":"https://tidymass.github.io/tidymass/articles/build_docker.html","id":"create-dockerfile","dir":"Articles","previous_headings":"","what":"Create dockerfile","title":"Install docker version of tidymass","text":"Create dockerfile without extension. open modify . want install packages (example ggraph) necessary analysis, please add new line: also need copy data image use COPY.","code":"FROM jaspershen/tidymass:latest MAINTAINER \"Xiaotao Shen\" shenxt1990@outlook.com  RUN apt-get update && apt-get install -y curl  COPY demo_data/ /home/rstudio/demo_data/  RUN chmod 777 /home/rstudio/demo_data/  RUN R -e 'install.packages(\"remotes\")'  RUN R -e \"remotes::install_gitlab('jaspershen/tidymass')\" RUN R -e 'install.packages(\"ggraph\")'"},{"path":"https://tidymass.github.io/tidymass/articles/build_docker.html","id":"build-image","dir":"Articles","previous_headings":"Create dockerfile","what":"Build image","title":"Install docker version of tidymass","text":"terminal, use code build image. Change image-name.","code":"docker build -t image-name -f Dockerfile ."},{"path":"https://tidymass.github.io/tidymass/articles/build_docker.html","id":"use-the-docker-tag-command-to-give-the-tidymass-image-a-new-name","dir":"Articles","previous_headings":"","what":"Use the docker tag command to give the tidymass image a new name","title":"Install docker version of tidymass","text":"need create account docker hub (https://hub.docker.com/) use next code link local image account.","code":"docker tag image-name your-account/image-name:latest"},{"path":"https://tidymass.github.io/tidymass/articles/build_docker.html","id":"push-image-to-docker-hub","dir":"Articles","previous_headings":"","what":"Push image to docker hub","title":"Install docker version of tidymass","text":"people can download image contains code, data analysis environment, make pretty easy repeat analysis results. pull docker image run can refer document.","code":"docker push your-account/image-name:latest"},{"path":"https://tidymass.github.io/tidymass/articles/build_docker.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Install docker version of tidymass","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rstudioapi_0.13   knitr_1.37        magrittr_2.0.2    R6_2.5.1          #>  [5] ragg_1.2.1        rlang_1.0.1       fastmap_1.1.0     stringr_1.4.0     #>  [9] tools_4.1.2       xfun_0.29         cli_3.2.0         jquerylib_0.1.4   #> [13] htmltools_0.5.2   systemfonts_1.0.3 yaml_2.3.4        digest_0.6.29     #> [17] rprojroot_2.0.2   pkgdown_2.0.2     crayon_1.5.0      textshaping_0.3.6 #> [21] purrr_0.3.4       sass_0.4.0        fs_1.5.2          memoise_2.0.1     #> [25] cachem_1.0.6      evaluate_0.15     rmarkdown_2.11    stringi_1.7.6     #> [29] compiler_4.1.2    bslib_0.3.1       desc_1.4.0        jsonlite_1.7.3"},{"path":"https://tidymass.github.io/tidymass/articles/case_study_data.html","id":"ms1-raw-data","dir":"Articles","previous_headings":"","what":"MS1 Raw data","title":"Case study data","text":"raw data case study (MS1, mzML format) accessible MetaboLights MTBLS1122 (HILIC positive), MTBLS1124 (HILIC negative), MTBLS1122 (RPLC positive) MTBLS1130 (RPLC negative).","code":""},{"path":"https://tidymass.github.io/tidymass/articles/case_study_data.html","id":"ms2-raw-data","dir":"Articles","previous_headings":"","what":"MS2 raw data","title":"Case study data","text":"raw data case study (MS2, mgf format) accessible .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/case_study_data.html","id":"processed-data","dir":"Articles","previous_headings":"","what":"Processed data","title":"Case study data","text":"processed data (“mass_dataset” class) massProcesser package available .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/case_study_data.html","id":"other-data","dir":"Articles","previous_headings":"","what":"Other data","title":"Case study data","text":"can also download dataset necessary reproducible analysis case_study. data_cleaning metabolite_annotation pathway_enrichment sample_info Statistical_analysis","code":""},{"path":"https://tidymass.github.io/tidymass/articles/case_study_data.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Case study data","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rstudioapi_0.13   knitr_1.37        magrittr_2.0.2    R6_2.5.1          #>  [5] ragg_1.2.1        rlang_1.0.1       fastmap_1.1.0     stringr_1.4.0     #>  [9] tools_4.1.2       xfun_0.29         cli_3.2.0         jquerylib_0.1.4   #> [13] htmltools_0.5.2   systemfonts_1.0.3 yaml_2.3.4        digest_0.6.29     #> [17] rprojroot_2.0.2   pkgdown_2.0.2     crayon_1.5.0      textshaping_0.3.6 #> [21] purrr_0.3.4       sass_0.4.0        fs_1.5.2          memoise_2.0.1     #> [25] cachem_1.0.6      evaluate_0.15     rmarkdown_2.11    stringi_1.7.6     #> [29] compiler_4.1.2    bslib_0.3.1       desc_1.4.0        jsonlite_1.7.3"},{"path":"https://tidymass.github.io/tidymass/articles/contact_us.html","id":"if-you-have-any-quesitons-please-contact-me-","dir":"Articles","previous_headings":"","what":"If you have any quesitons, please contact me.","title":"Contact us","text":"shenxt1990 shenxt@stanford.edu Twitter M339, Alway Buidling, Cooper Lane, Palo Alto, CA 94304","code":""},{"path":"https://tidymass.github.io/tidymass/articles/contact_us.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Contact us","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #> [1] leaflet_2.0.4.1 #>  #> loaded via a namespace (and not attached): #>  [1] knitr_1.37        magrittr_2.0.1    R6_2.5.1          ragg_1.2.1        #>  [5] rlang_0.4.12      fastmap_1.1.0     stringr_1.4.0     tools_4.2.0       #>  [9] xfun_0.29         jquerylib_0.1.4   crosstalk_1.2.0   htmltools_0.5.2   #> [13] systemfonts_1.0.3 yaml_2.2.1        digest_0.6.29     rprojroot_2.0.2   #> [17] pkgdown_2.0.1     crayon_1.4.2      textshaping_0.3.6 purrr_0.3.4       #> [21] sass_0.4.0        htmlwidgets_1.5.4 fs_1.5.2          memoise_2.0.1     #> [25] cachem_1.0.6      evaluate_0.14     rmarkdown_2.11    stringi_1.7.6     #> [29] compiler_4.2.0    bslib_0.3.1       desc_1.4.0        jsonlite_1.7.2"},{"path":"https://tidymass.github.io/tidymass/articles/create_mass_dataset.html","id":"mzmine-feature-table-to-mass_dataset-class","dir":"Articles","previous_headings":"","what":"mzMine feature table to mass_dataset class","title":"Create mass_dataset class from other tools","text":"can also directory convert feature table mzMine mass_dataset class. example feature table mzMine.","code":"data(\"mzmine_table\") object =    convet_mzmine2mass_dataset(x = mzmine_table) object #> --------------------  #> massdataset version: 0.99.9  #> --------------------  #> 1.expression_data:[ 3443 x 22 data.frame] #> 2.sample_info:[ 22 x 2 data.frame] #> 3.variable_info:[ 3443 x 3 data.frame] #> 4.sample_info_note:[ 2 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package                Function.used                Time #> 1 massdataset convet_mzmine2mass_dataset() 2022-02-25 00:56:11"},{"path":"https://tidymass.github.io/tidymass/articles/create_mass_dataset.html","id":"ms-dial-feature-table-to-mass_dataset-class","dir":"Articles","previous_headings":"","what":"MS-DIAL feature table to mass_dataset class","title":"Create mass_dataset class from other tools","text":"can also directory convert feature table MS-DIAL mass_dataset class. example feature table MS-DIAL.","code":"data(\"msdial_table\") object =    convert_msdial2mass_dataset(x = msdial_table) object #> --------------------  #> massdataset version: 0.99.9  #> --------------------  #> 1.expression_data:[ 3751 x 20 data.frame] #> 2.sample_info:[ 20 x 5 data.frame] #> 3.variable_info:[ 3751 x 32 data.frame] #> 4.sample_info_note:[ 5 x 2 data.frame] #> 5.variable_info_note:[ 32 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package                 Function.used                Time #> 1 massdataset convert_msdial2mass_dataset() 2022-02-25 00:56:19"},{"path":"https://tidymass.github.io/tidymass/articles/create_mass_dataset.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Create mass_dataset class from other tools","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #> [1] kableExtra_1.3.4   magrittr_2.0.2     masstools_0.99.3   massdataset_0.99.9 #>  #> loaded via a namespace (and not attached): #>   [1] colorspace_2.0-2      rjson_0.2.21          ellipsis_0.3.2        #>   [4] leaflet_2.1.0         rprojroot_2.0.2       circlize_0.4.14       #>   [7] GlobalOptions_0.1.2   fs_1.5.2              clue_0.3-60           #>  [10] rstudioapi_0.13       mzR_2.28.0            affyio_1.64.0         #>  [13] fansi_1.0.2           xml2_1.3.3            codetools_0.2-18      #>  [16] ncdf4_1.19            doParallel_1.0.17     cachem_1.0.6          #>  [19] impute_1.68.0         knitr_1.37            jsonlite_1.7.3        #>  [22] cluster_2.1.2         vsn_3.62.0            png_0.1-7             #>  [25] BiocManager_1.30.16   readr_2.1.2           compiler_4.1.2        #>  [28] httr_1.4.2            assertthat_0.2.1      fastmap_1.1.0         #>  [31] lazyeval_0.2.2        limma_3.50.0          cli_3.2.0             #>  [34] htmltools_0.5.2       tools_4.1.2           gtable_0.3.0          #>  [37] glue_1.6.1            affy_1.72.0           dplyr_1.0.8           #>  [40] Rcpp_1.0.8            MALDIquant_1.21       Biobase_2.54.0        #>  [43] cellranger_1.1.0      jquerylib_0.1.4       pkgdown_2.0.2         #>  [46] vctrs_0.3.8           svglite_2.0.0         preprocessCore_1.56.0 #>  [49] iterators_1.0.14      crosstalk_1.2.0       xfun_0.29             #>  [52] stringr_1.4.0         openxlsx_4.2.5        rvest_1.0.2           #>  [55] lifecycle_1.0.1       XML_3.99-0.8          MASS_7.3-55           #>  [58] zlibbioc_1.40.0       scales_1.1.1          MSnbase_2.20.4        #>  [61] ragg_1.2.1            pcaMethods_1.86.0     hms_1.1.1             #>  [64] ProtGenerics_1.26.0   parallel_4.1.2        RColorBrewer_1.1-2    #>  [67] ComplexHeatmap_2.10.0 yaml_2.3.4            memoise_2.0.1         #>  [70] pbapply_1.5-0         ggplot2_3.3.5         yulab.utils_0.0.4     #>  [73] sass_0.4.0            stringi_1.7.6         highr_0.9             #>  [76] S4Vectors_0.32.3      desc_1.4.0            foreach_1.5.2         #>  [79] BiocGenerics_0.40.0   zip_2.2.0             BiocParallel_1.28.3   #>  [82] shape_1.4.6           rlang_1.0.1           pkgconfig_2.0.3       #>  [85] systemfonts_1.0.3     matrixStats_0.61.0    mzID_1.32.0           #>  [88] evaluate_0.15         lattice_0.20-45       purrr_0.3.4           #>  [91] htmlwidgets_1.5.4     tidyselect_1.1.1      ggsci_2.9             #>  [94] plyr_1.8.6            R6_2.5.1              IRanges_2.28.0        #>  [97] generics_0.1.2        DBI_1.1.2             pillar_1.7.0          #> [100] MsCoreUtils_1.6.0     tibble_3.1.6          crayon_1.5.0          #> [103] utf8_1.2.2            plotly_4.10.0         tzdb_0.2.0            #> [106] rmarkdown_2.11        GetoptLong_1.0.5      grid_4.1.2            #> [109] readxl_1.3.1          data.table_1.14.2     webshot_0.5.2         #> [112] digest_0.6.29         tidyr_1.2.0           gridGraphics_0.5-1    #> [115] textshaping_0.3.6     stats4_4.1.2          munsell_0.5.0         #> [118] viridisLite_0.4.0     ggplotify_0.1.0       bslib_0.3.1"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Data cleaning","text":"just use dataset step. Change batch character.","code":"library(tidymass) #> ── Attaching packages ──────────────────────────────────────── tidymass 0.0.1 ── #> ✓ massdataset   0.99.1     ✓ metpath       0.0.1  #> ✓ massprocesser 0.9.2      ✓ metid         1.1.0  #> ✓ masscleaner   0.9.2      ✓ masstools     0.99.1 #> ✓ massqc        0.0.1      ✓ dplyr         1.0.7  #> ✓ massstat      0.0.1      ✓ ggplot2       3.3.5 #> ── Conflicts ─────────────────────────────────────────── tidymass_conflicts() ── #> x dplyr::collect()               masks xcms::collect() #> x dplyr::combine()               masks MSnbase::combine(), Biobase::combine(), BiocGenerics::combine() #> x dplyr::filter()                masks metpath::filter(), massdataset::filter(), stats::filter() #> x dplyr::first()                 masks S4Vectors::first() #> x masstools::get_os()            masks tinytools::get_os() #> x masstools::getDP()             masks tinytools::getDP() #> x dplyr::groups()                masks xcms::groups() #> x masstools::keep_one()          masks tinytools::keep_one() #> x dplyr::lag()                   masks stats::lag() #> x masstools::ms2_plot()          masks tinytools::ms2_plot() #> x masstools::ms2Match()          masks tinytools::ms2Match() #> x masstools::mz_rt_match()       masks tinytools::mz_rt_match(), massdataset::mz_rt_match() #> x masstools::name_duplicated()   masks tinytools::name_duplicated() #> x masstools::read_mgf()          masks metid::read_mgf(), tinytools::read_mgf() #> x masstools::removeNoise()       masks tinytools::removeNoise() #> x dplyr::rename()                masks S4Vectors::rename(), massdataset::rename() #> x masstools::setwd_project()     masks tinytools::setwd_project() #> x masstools::split_formula()     masks tinytools::split_formula() #> x masstools::trans_ID()          masks tinytools::trans_ID() #> x masstools::trans_id_database() masks tinytools::trans_id_database() load(\"data_cleaning/POS/object_pos\") load(\"data_cleaning/NEG/object_neg\") object_pos <-    object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch))  object_neg <-    object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch)) object_pos #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 10149 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 10149 x 3 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 object_neg #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 8804 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 8804 x 3 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"data-quality-assessment-before-data-cleaning","dir":"Articles","previous_headings":"","what":"Data quality assessment before data cleaning","title":"Data cleaning","text":", can use massqc package assess data quality. can just use massqc_report() function get html format quality assessment report. html format report pdf figures placed folder data_cleaning/POS/data_quality_before_data_cleaning/Report.  html report :  Negative mode. PCA score plot used show batch effect positive negative dataset. Positive mode: Negative mode:  can see matter positive negative mode, batch effect serious.","code":"massqc::massqc_report(object = object_pos,                       path = \"data_cleaning/POS/data_quality_before_data_cleaning\") massqc::massqc_report(object = object_neg,                        path = \"data_cleaning/NEG/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"remove-noisy-metabolic-features","dir":"Articles","previous_headings":"","what":"Remove noisy metabolic features","title":"Data cleaning","text":"Remove variables MVs 20% QC samples lest 50% samples control group case group.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"positive-mode","dir":"Articles","previous_headings":"Remove noisy metabolic features","what":"Positive mode","title":"Data cleaning","text":"MV percentage QC samples.  Remove variables. 5,101 variables left.","code":"object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39 show_variable_missing_values(object = object_pos %>%                                 activate_mass_dataset(what = \"sample_info\") %>%                                 filter(class == \"QC\"),                               percentage = TRUE) +   scale_size_continuous(range = c(0.01, 2)) qc_id =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Control\") %>%   pull(sample_id)  case_id =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Case\") %>%   pull(sample_id)  object_pos =   object_pos %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id)  head(extract_variable_info(object_pos)) #>   variable_id       mz        rt    na_freq na_freq.1 na_freq.2 #> 1  M70T73_POS 70.04074  73.31705 0.28205128 0.6000000 0.4727273 #> 2  M70T53_POS 70.06596  52.78542 0.00000000 0.1454545 0.0000000 #> 3 M70T183_POS 70.19977 182.87981 0.00000000 0.6636364 0.7454545 #> 4 M70T527_POS 70.36113 526.76657 0.02564103 0.1818182 0.3000000 #> 5 M71T695_POS 70.56911 694.84592 0.02564103 0.6454545 0.5545455 #> 6 M71T183_POS 70.75034 182.77790 0.05128205 0.7272727 0.7909091 object_pos <-    object_pos %>%    activate_mass_dataset(what = \"variable_info\") %>%   filter(na_freq < 0.2 & (na_freq.1 < 0.5 | na_freq.2 < 0.5)) object_pos #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 5101 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 5101 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"negative-mode","dir":"Articles","previous_headings":"Remove noisy metabolic features","what":"Negative mode","title":"Data cleaning","text":"MV percentage QC samples.  Remove variables. 4104 features left.","code":"object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39 show_variable_missing_values(object = object_neg %>%                                 activate_mass_dataset(what = \"sample_info\") %>%                                 filter(class == \"QC\"),                               percentage = TRUE) +   scale_size_continuous(range = c(0.01, 2)) qc_id =   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id =   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Control\") %>%   pull(sample_id)  case_id =   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Case\") %>%   pull(sample_id)  object_neg =   object_neg %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id)  head(extract_variable_info(object_neg)) #>   variable_id       mz        rt    na_freq   na_freq.1   na_freq.2 #> 1 M70T712_NEG 70.05911 711.97894 0.05128205 0.109090909 0.018181818 #> 2 M70T527_NEG 70.13902 526.85416 0.33333333 0.509090909 0.618181818 #> 3 M70T587_NEG 70.31217 587.25330 0.00000000 0.009090909 0.009090909 #> 4  M70T47_NEG 70.33835  46.57537 0.84615385 0.936363636 0.090909091 #> 5 M71T587_NEG 70.56315 587.02570 0.17948718 0.145454545 0.163636364 #> 6 M71T641_NEG 70.70657 641.16672 0.10256410 0.063636364 0.072727273 object_neg <-    object_neg %>%    activate_mass_dataset(what = \"variable_info\") %>%   filter(na_freq < 0.2 & (na_freq.1 < 0.5 | na_freq.2 < 0.5)) object_neg #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 4104 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 4104 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"filter-outlier-samples","dir":"Articles","previous_headings":"","what":"Filter outlier samples","title":"Data cleaning","text":"can use detect_outlier() find outlier samples. information detect outlier samples can found .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"positive-mode-1","dir":"Articles","previous_headings":"Filter outlier samples","what":"Positive mode","title":"Data cleaning","text":"Detect outlier samples. outlier samples positive mode.","code":"massdataset::show_sample_missing_values(object = object_pos,                                         color_by = \"group\",                                         order_by = \"injection.order\",                                         percentage = TRUE) +   theme(axis.text.x = element_text(size = 2)) +   scale_size_continuous(range = c(0.1, 2)) +   ggsci::scale_color_aaas() outlier_samples =   object_pos %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 0 outlier samples. #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #> outlier_table <- extract_outlier_table(outlier_samples)  outlier_table %>%    head() #>            according_to_na pc_sd pc_mad accordint_to_distance #> sample_06            FALSE FALSE  FALSE                 FALSE #> sample_103           FALSE FALSE  FALSE                 FALSE #> sample_11            FALSE FALSE  FALSE                 FALSE #> sample_112           FALSE FALSE  FALSE                 FALSE #> sample_117           FALSE FALSE  FALSE                 FALSE #> sample_12            FALSE FALSE  FALSE                 FALSE  outlier_table %>%    apply(1, function(x){     sum(x)   }) %>%    `>`(0) %>%    which() #> named integer(0)"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"negative-mode-1","dir":"Articles","previous_headings":"Filter outlier samples","what":"Negative mode","title":"Data cleaning","text":"Detect outlier samples. outlier samples negative mode.","code":"massdataset::show_sample_missing_values(object = object_neg,                                         color_by = \"group\",                                         order_by = \"injection.order\",                                         percentage = TRUE) +   theme(axis.text.x = element_text(size = 2)) +   scale_size_continuous(range = c(0.1, 2)) +   ggsci::scale_color_aaas() outlier_samples =   object_neg %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 0 outlier samples. #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #> outlier_table <- extract_outlier_table(outlier_samples)  outlier_table %>%    head() #>            according_to_na pc_sd pc_mad accordint_to_distance #> sample_06            FALSE FALSE  FALSE                 FALSE #> sample_103           FALSE FALSE  FALSE                 FALSE #> sample_11            FALSE FALSE  FALSE                 FALSE #> sample_112           FALSE FALSE  FALSE                 FALSE #> sample_117           FALSE FALSE  FALSE                 FALSE #> sample_12            FALSE FALSE  FALSE                 FALSE  outlier_table %>%    apply(1, function(x){     sum(x)   }) %>%    `>`(0) %>%    which() #> named integer(0)"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"missing-value-imputation","dir":"Articles","previous_headings":"Filter outlier samples","what":"Missing value imputation","title":"Data cleaning","text":"","code":"get_mv_number(object_pos) #> [1] 148965 object_pos <-    impute_mv(object = object_pos, method = \"knn\") #> Cluster size 4983 broken into 88 4895  #> Done cluster 88  #> Cluster size 4895 broken into 4497 398  #> Cluster size 4497 broken into 3737 760  #> Cluster size 3737 broken into 2703 1034  #> Cluster size 2703 broken into 1706 997  #> Cluster size 1706 broken into 1240 466  #> Done cluster 1240  #> Done cluster 466  #> Done cluster 1706  #> Done cluster 997  #> Done cluster 2703  #> Done cluster 1034  #> Done cluster 3737  #> Done cluster 760  #> Done cluster 4497  #> Done cluster 398  #> Done cluster 4895  get_mv_number(object_pos) #> [1] 0 get_mv_number(object_neg) #> [1] 146427  object_neg <-    impute_mv(object = object_neg, method = \"knn\") #> Cluster size 4006 broken into 3965 41  #> Cluster size 3965 broken into 3743 222  #> Cluster size 3743 broken into 505 3238  #> Done cluster 505  #> Cluster size 3238 broken into 2519 719  #> Cluster size 2519 broken into 1721 798  #> Cluster size 1721 broken into 676 1045  #> Done cluster 676  #> Done cluster 1045  #> Done cluster 1721  #> Done cluster 798  #> Done cluster 2519  #> Done cluster 719  #> Done cluster 3238  #> Done cluster 3743  #> Done cluster 222  #> Done cluster 3965  #> Done cluster 41  get_mv_number(object_neg) #> [1] 0"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"positive-mode-2","dir":"Articles","previous_headings":"Filter outlier samples","what":"Positive mode","title":"Data cleaning","text":"","code":"object_pos <-    normalize_data(object_pos, method = \"median\")  object_pos2 <-    integrate_data(object_pos, method = \"subject_median\") object_pos2 %>%    `+`(1) %>%    log(2) %>%    massqc::massqc_pca(color_by = \"batch\", line = FALSE)"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"negative-mode-2","dir":"Articles","previous_headings":"Filter outlier samples","what":"Negative mode","title":"Data cleaning","text":"Save data subsequent analysis.","code":"object_neg <-    normalize_data(object_neg, method = \"median\")  object_neg2 <-    integrate_data(object_neg, method = \"subject_median\") object_neg2 %>%    `+`(1) %>%    log(2) %>%    massqc::massqc_pca(color_by = \"batch\", line = FALSE) save(object_pos2, file = \"data_cleaning/POS/object_pos2\") save(object_neg2, file = \"data_cleaning/NEG/object_neg2\")"},{"path":"https://tidymass.github.io/tidymass/articles/data_cleaning.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Data cleaning","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] knitr_1.37           masstools_0.99.1     dplyr_1.0.7          #>  [4] metid_1.1.0          metpath_0.0.1        massstat_0.0.1       #>  [7] ggfortify_0.4.14     ggplot2_3.3.5        massqc_0.0.1         #> [10] masscleaner_0.9.2    xcms_3.17.1          MSnbase_2.21.3       #> [13] ProtGenerics_1.27.2  S4Vectors_0.33.10    mzR_2.29.1           #> [16] Rcpp_1.0.7           Biobase_2.55.0       BiocGenerics_0.41.2  #> [19] BiocParallel_1.29.10 massprocesser_0.9.2  magrittr_2.0.1       #> [22] tinytools_0.9.1      massdataset_0.99.1   tidymass_0.0.1       #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  tidyr_1.1.4                 #>   [3] missForest_1.4              DelayedArray_0.21.2         #>   [5] data.table_1.14.2           KEGGREST_1.35.0             #>   [7] RCurl_1.98-1.5              doParallel_1.0.16           #>   [9] generics_0.1.1              leaflet_2.0.4.1             #>  [11] preprocessCore_1.57.0       callr_3.7.0                 #>  [13] usethis_2.1.5               RANN_2.6.1                  #>  [15] proxy_0.4-26                future_1.23.0               #>  [17] tzdb_0.2.0                  xml2_1.3.3                  #>  [19] lubridate_1.8.0             ggsci_2.9                   #>  [21] SummarizedExperiment_1.25.3 assertthat_0.2.1            #>  [23] tidyverse_1.3.1             viridis_0.6.2               #>  [25] xfun_0.29                   hms_1.1.1                   #>  [27] jquerylib_0.1.4             evaluate_0.14               #>  [29] DEoptimR_1.0-10             fansi_1.0.0                 #>  [31] dbplyr_2.1.1                readxl_1.3.1                #>  [33] igraph_1.2.6                DBI_1.1.2                   #>  [35] htmlwidgets_1.5.4           MsFeatures_1.3.0            #>  [37] purrr_0.3.4                 ellipsis_0.3.2              #>  [39] crosstalk_1.2.0             backports_1.4.1             #>  [41] ggcorrplot_0.1.3            MatrixGenerics_1.7.0        #>  [43] vctrs_0.3.8                 remotes_2.4.2               #>  [45] cachem_1.0.6                withr_2.4.3                 #>  [47] ggforce_0.3.3               itertools_0.1-3             #>  [49] robustbase_0.93-8           prettyunits_1.1.1           #>  [51] cluster_2.1.2               lazyeval_0.2.2              #>  [53] crayon_1.4.2                pkgconfig_2.0.3             #>  [55] labeling_0.4.2              tweenr_1.0.2                #>  [57] GenomeInfoDb_1.31.1         pkgload_1.2.4               #>  [59] devtools_2.4.3              rlang_0.4.12                #>  [61] globals_0.14.0              lifecycle_1.0.1             #>  [63] affyio_1.65.0               MassSpecWavelet_1.61.0      #>  [65] modelr_0.1.8                cellranger_1.1.0            #>  [67] randomForest_4.6-14         rprojroot_2.0.2             #>  [69] polyclip_1.10-0             matrixStats_0.61.0          #>  [71] Matrix_1.4-0                reprex_2.0.1                #>  [73] GlobalOptions_0.1.2         processx_3.5.2              #>  [75] png_0.1-7                   viridisLite_0.4.0           #>  [77] rjson_0.2.21                clisymbols_1.2.0            #>  [79] bitops_1.0-7                pander_0.6.4                #>  [81] Biostrings_2.63.1           shape_1.4.6                 #>  [83] stringr_1.4.0               parallelly_1.30.0           #>  [85] robust_0.6-1                readr_2.1.1                 #>  [87] gridGraphics_0.5-1          scales_1.1.1                #>  [89] memoise_2.0.1               plyr_1.8.6                  #>  [91] zlibbioc_1.41.0             compiler_4.2.0              #>  [93] RColorBrewer_1.1-2          pcaMethods_1.87.0           #>  [95] clue_0.3-60                 rrcov_1.6-0                 #>  [97] cli_3.1.0                   affy_1.73.0                 #>  [99] XVector_0.35.0              listenv_0.8.0               #> [101] patchwork_1.1.1             pbapply_1.5-0               #> [103] ps_1.6.0                    MASS_7.3-55                 #> [105] tidyselect_1.1.1            vsn_3.63.0                  #> [107] stringi_1.7.6               forcats_0.5.1               #> [109] textshaping_0.3.6           highr_0.9                   #> [111] yaml_2.2.1                  MALDIquant_1.21             #> [113] ggrepel_0.9.1               grid_4.2.0                  #> [115] sass_0.4.0                  tools_4.2.0                 #> [117] parallel_4.2.0              circlize_0.4.14             #> [119] rstudioapi_0.13             MsCoreUtils_1.7.1           #> [121] foreach_1.5.1               gridExtra_2.3               #> [123] farver_2.1.0                mzID_1.33.0                 #> [125] ggraph_2.0.5                digest_0.6.29               #> [127] BiocManager_1.30.16         GenomicRanges_1.47.6        #> [129] broom_0.7.11                ncdf4_1.17                  #> [131] httr_1.4.2                  ComplexHeatmap_2.11.0       #> [133] colorspace_2.0-2            rvest_1.0.2                 #> [135] XML_3.99-0.8                fs_1.5.2                    #> [137] IRanges_2.29.1              yulab.utils_0.0.4           #> [139] pkgdown_2.0.1               graphlayouts_0.8.0          #> [141] ggplotify_0.1.0             plotly_4.10.0               #> [143] sessioninfo_1.2.2           systemfonts_1.0.3           #> [145] fit.models_0.64             jsonlite_1.7.2              #> [147] tidygraph_1.2.0             testthat_3.1.1              #> [149] R6_2.5.1                    pillar_1.6.4                #> [151] htmltools_0.5.2             glue_1.6.0                  #> [153] fastmap_1.1.0               class_7.3-20                #> [155] codetools_0.2-18            pkgbuild_1.3.1              #> [157] pcaPP_1.9-74                mvtnorm_1.1-2               #> [159] furrr_0.2.3                 utf8_1.2.2                  #> [161] lattice_0.20-45             bslib_0.3.1                 #> [163] tibble_3.1.6                zip_2.2.0                   #> [165] openxlsx_4.2.5              limma_3.51.2                #> [167] rmarkdown_2.11              desc_1.4.0                  #> [169] munsell_0.5.0               e1071_1.7-9                 #> [171] GetoptLong_1.0.5            GenomeInfoDbData_1.2.7      #> [173] iterators_1.0.13            impute_1.69.0               #> [175] haven_2.4.3                 gtable_0.3.0"},{"path":"https://tidymass.github.io/tidymass/articles/data_convert.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Convert raw data to mzXML/mgf","text":"Please place raw data one folder according MS1 MS2. can convert using Proteowizard massconverter package.","code":""},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/data_convert.html","id":"convert-ms1-data-to-mzxml-format-data","dir":"Articles","previous_headings":"Proteowizard","what":"Convert MS1 data to mzXML format data","title":"Convert raw data to mzXML/mgf","text":"Just convert data mzXML format data according parameters : ## Convert MS2 data mzXML mgf format data Just convert data mzXML mgf format data according parameters :","code":""},{"path":"https://tidymass.github.io/tidymass/articles/data_convert.html","id":"convert-data-using-massconverter","dir":"Articles","previous_headings":"","what":"Convert data using massconverter","title":"Convert raw data to mzXML/mgf","text":"massconverter package tidymass project can used convert mass spectrometry raw data based docker image pwid. See information . inforamtion can found .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/data_convert.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Convert raw data to mzXML/mgf","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rprojroot_2.0.2   digest_0.6.29     crayon_1.4.2      R6_2.5.1          #>  [5] jsonlite_1.7.2    magrittr_2.0.1    evaluate_0.14     stringi_1.7.6     #>  [9] rlang_0.4.12      cachem_1.0.6      fs_1.5.2          jquerylib_0.1.4   #> [13] bslib_0.3.1       ragg_1.2.1        rmarkdown_2.11    pkgdown_2.0.1     #> [17] textshaping_0.3.6 desc_1.4.0        tools_4.2.0       stringr_1.4.0     #> [21] purrr_0.3.4       yaml_2.2.1        xfun_0.29         fastmap_1.1.0     #> [25] compiler_4.2.0    systemfonts_1.0.3 memoise_2.0.1     htmltools_0.5.2   #> [29] knitr_1.37        sass_0.4.0"},{"path":"https://tidymass.github.io/tidymass/articles/data_preparation.html","id":"uninstall-tidytools-and-metid","dir":"Articles","previous_headings":"","what":"Uninstall tidyTools and metID","title":"Data preparation","text":"tinyTools renamed tinytools metID renamed metid. please uninstall install tidymass. don’t use . detach : Remove : Restart R session. errors, ignore .","code":"detach(\"package:tinyTools\") detach(\"package:metID\") remove.packages(pkgs = \"tinyTools\") remove.packages(pkgs = \"metID\")"},{"path":"https://tidymass.github.io/tidymass/articles/data_preparation.html","id":"install-tidymass-from-github","dir":"Articles","previous_headings":"","what":"Install tidymass from github","title":"Data preparation","text":"can just use devtools remote install tidymass. Please update devtools first restart r session. install tidymass: installation, ask want update packages times, just enter enter key skip . error like : Try resolve : R console, type code: open page browser, create “New personal access token” copy .  type code: add one line like : GITHUB_PAT created step 1. restart R session try .","code":"install.packages(\"devtools\") devtools::install_github(\"tidymass/tidymass\", dependencies = TRUE) Error: Failed to install 'tidymass' from GitHub: HTTP error 403. API rate limit exceeded for 171.66.10.237. (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.) usethis::create_github_token() usethis::edit_r_environ() GITHUB_PAT=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"},{"path":"https://tidymass.github.io/tidymass/articles/data_preparation.html","id":"install-tidymass-packages-one-by-one","dir":"Articles","previous_headings":"","what":"Install tidymass packages one by one","title":"Data preparation","text":"use windoes os dependencies can installed, try install tidymass packages one one. Let know questions.","code":"devtools::install_github(\"tidymass/tinytools\", dependencies = TRUE) devtools::install_github(\"tidymass/massdataset\", dependencies = TRUE) devtools::install_github(\"tidymass/demodata\", dependencies = TRUE) devtools::install_github(\"tidymass/massqc\", dependencies = TRUE) devtools::install_github(\"tidymass/massprocesser\", dependencies = TRUE) devtools::install_github(\"tidymass/masscleaner\", dependencies = TRUE) devtools::install_github(\"tidymass/massstat\", dependencies = TRUE) devtools::install_github(\"tidymass/metid\", dependencies = TRUE) devtools::install_github(\"tidymass/metpath\", dependencies = TRUE)"},{"path":"https://tidymass.github.io/tidymass/articles/data_preparation.html","id":"frequently-asked-questions","dir":"Articles","previous_headings":"","what":"Frequently Asked Questions","title":"Data preparation","text":"Can install dependent packages raster Cario raster package CRAN, try install first install tidymass. Cario package CRAN, try install first install tidymass.","code":"install.packages(\"raster\") install.packages(\"Cairo\")"},{"path":"https://tidymass.github.io/tidymass/articles/data_preparation.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Data preparation","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rprojroot_2.0.2   digest_0.6.29     crayon_1.4.2      R6_2.5.1          #>  [5] jsonlite_1.7.2    magrittr_2.0.1    evaluate_0.14     stringi_1.7.6     #>  [9] rlang_0.4.12      cachem_1.0.6      fs_1.5.2          jquerylib_0.1.4   #> [13] bslib_0.3.1       ragg_1.2.1        rmarkdown_2.11    pkgdown_2.0.1     #> [17] textshaping_0.3.6 desc_1.4.0        tools_4.2.0       stringr_1.4.0     #> [21] purrr_0.3.4       yaml_2.2.1        xfun_0.29         fastmap_1.1.0     #> [25] compiler_4.2.0    systemfonts_1.0.3 memoise_2.0.1     htmltools_0.5.2   #> [29] knitr_1.37        sass_0.4.0"},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Download demo data","text":"demo data tidymass untargeted metabolomics RPLC-QEplus (Thermo). 259 samples total. Subject samples: 220 blood samples. 110 control samples 110 case samples. QC samples: 39","code":""},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"ms1-data-mzxml-format","dir":"Articles","previous_headings":"Download demo data","what":"1. MS1 data (mzXML format)","title":"Download demo data","text":"Download link. Download uncompress :","code":""},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"ms2-data-mgf-format","dir":"Articles","previous_headings":"Download demo data","what":"2. MS2 data (mgf format)","title":"Download demo data","text":"Download link Download uncompress :","code":""},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"sample-information","dir":"Articles","previous_headings":"Download demo data","what":"3. Sample information","title":"Download demo data","text":"Download link Download uncompress :","code":""},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"sample_info_pos","dir":"Articles","previous_headings":"Download demo data > 3. Sample information","what":"sample_info_pos","title":"Download demo data","text":"sample_info_pos like :","code":""},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"sample_info_neg","dir":"Articles","previous_headings":"Download demo data > 3. Sample information","what":"sample_info_neg","title":"Download demo data","text":"sample_info_neg like :","code":""},{"path":"https://tidymass.github.io/tidymass/articles/demo_data.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Download demo data","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #> [1] magrittr_2.0.2   kableExtra_1.3.4 #>  #> loaded via a namespace (and not attached): #>  [1] tidyselect_1.1.1  xfun_0.29         bslib_0.3.1       purrr_0.3.4       #>  [5] colorspace_2.0-2  vctrs_0.3.8       htmltools_0.5.2   viridisLite_0.4.0 #>  [9] yaml_2.3.4        utf8_1.2.2        rlang_1.0.1       pkgdown_2.0.2     #> [13] jquerylib_0.1.4   pillar_1.7.0      glue_1.6.1        bit64_4.0.5       #> [17] lifecycle_1.0.1   stringr_1.4.0     munsell_0.5.0     ragg_1.2.1        #> [21] rvest_1.0.2       codetools_0.2-18  memoise_2.0.1     evaluate_0.15     #> [25] knitr_1.37        tzdb_0.2.0        fastmap_1.1.0     parallel_4.1.2    #> [29] fansi_1.0.2       highr_0.9         readr_2.1.2       scales_1.1.1      #> [33] cachem_1.0.6      desc_1.4.0        vroom_1.5.7       webshot_0.5.2     #> [37] jsonlite_1.7.3    systemfonts_1.0.3 fs_1.5.2          bit_4.0.4         #> [41] textshaping_0.3.6 hms_1.1.1         digest_0.6.29     stringi_1.7.6     #> [45] rprojroot_2.0.2   cli_3.2.0         tools_4.1.2       sass_0.4.0        #> [49] tibble_3.1.6      crayon_1.5.0      pkgconfig_2.0.3   ellipsis_0.3.2    #> [53] xml2_1.3.3        rmarkdown_2.11    svglite_2.0.0     httr_1.4.2        #> [57] rstudioapi_0.13   R6_2.5.1          compiler_4.1.2"},{"path":"https://tidymass.github.io/tidymass/articles/docker.html","id":"install-docker","dir":"Articles","previous_headings":"","what":"Install docker","title":"Install docker version of tidymass","text":"Please refer offical website download install docker. run docker.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/docker.html","id":"pull-the-tidymass-image","dir":"Articles","previous_headings":"","what":"Pull the tidymass image","title":"Install docker version of tidymass","text":"Open terminal type code :","code":"docker pull jaspershen/tidymass:latest"},{"path":"https://tidymass.github.io/tidymass/articles/docker.html","id":"run-tidymass-docker-image","dir":"Articles","previous_headings":"","what":"Run tidymass docker image","title":"Install docker version of tidymass","text":"terminal, run code : command link RStudio home folder desktop local machine running container. Anything saved edited home folder using container stored local desktop.","code":"docker run -e PASSWORD=tidymass -p 8787:8787 jaspershen/tidymass:latest docker run -e PASSWORD=tidymass -v ~/Desktop:/home/rstudio/ -p 8787:8787 jaspershen/tidymass:latest"},{"path":"https://tidymass.github.io/tidymass/articles/docker.html","id":"open-the-rstudio-server","dir":"Articles","previous_headings":"","what":"Open the Rstudio server","title":"Install docker version of tidymass","text":"open browser visit http://localhost:8787 power RStudio server. user name rstudio password tidymass.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/docker.html","id":"demo-data-and-example-analysis-code","dir":"Articles","previous_headings":"","what":"Demo data and example analysis code","title":"Install docker version of tidymass","text":"tidymass docker image, folder named “demo_data” included help users learn use tidymass. Open tidymass_demo.Rmd file demo_data folder, run code chunk chunk just render clicking Knit Rstudio, get reporting result (HTML format) whole workflow. # Session information","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rstudioapi_0.13   knitr_1.37        magrittr_2.0.2    R6_2.5.1          #>  [5] ragg_1.2.1        rlang_1.0.1       fastmap_1.1.0     stringr_1.4.0     #>  [9] tools_4.1.2       xfun_0.29         cli_3.2.0         jquerylib_0.1.4   #> [13] htmltools_0.5.2   systemfonts_1.0.3 yaml_2.3.4        digest_0.6.29     #> [17] rprojroot_2.0.2   pkgdown_2.0.2     crayon_1.5.0      textshaping_0.3.6 #> [21] purrr_0.3.4       sass_0.4.0        fs_1.5.2          memoise_2.0.1     #> [25] cachem_1.0.6      evaluate_0.15     rmarkdown_2.11    stringi_1.7.6     #> [29] compiler_4.1.2    bslib_0.3.1       desc_1.4.0        jsonlite_1.7.3"},{"path":"https://tidymass.github.io/tidymass/articles/explore_data.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Explore data","text":"raw data processing, peak tables positive negative mode generated. Next, need get peak table sample information organize mass_dataset class objects.","code":"library(tidymass) #> Registered S3 method overwritten by 'Hmisc': #>   method       from       #>   vcov.default fit.models #> ── Attaching packages ─────────────────────────────────────── tidymass 0.99.4 ── #> ✓ massprocesser 0.99.3     ✓ massstat      0.99.6 #> ✓ masscleaner   0.99.3     ✓ metpath       0.99.2 #> ✓ massqc        0.99.3     ✓ metid         1.2.2 #> ── Conflicts ─────────────────────────────────────────── tidymass_conflicts() ── #> x massdataset::apply()            masks base::apply() #> x xcms::collect()                 masks dplyr::collect() #> x BiocGenerics::colMeans()        masks massdataset::colMeans(), base::colMeans() #> x BiocGenerics::colSums()         masks massdataset::colSums(), base::colSums() #> x MSnbase::combine()              masks Biobase::combine(), BiocGenerics::combine(), dplyr::combine() #> x tidyr::extract()                masks magrittr::extract() #> x metpath::filter()               masks dplyr::filter(), massdataset::filter(), stats::filter() #> x S4Vectors::first()              masks dplyr::first() #> x tinytools::get_compound_class() masks masstools::get_compound_class() #> x tinytools::get_os()             masks masstools::get_os() #> x tinytools::getDP()              masks masstools::getDP() #> x xcms::groups()                  masks dplyr::groups() #> x S4Vectors::intersect()          masks BiocGenerics::intersect(), massdataset::intersect(), base::intersect() #> x tinytools::keep_one()           masks masstools::keep_one() #> x dplyr::lag()                    masks stats::lag() #> x tinytools::ms2_plot()           masks masstools::ms2_plot() #> x tinytools::ms2Match()           masks masstools::ms2Match() #> x tinytools::mz_rt_match()        masks masstools::mz_rt_match(), massdataset::mz_rt_match() #> x tinytools::name_duplicated()    masks masstools::name_duplicated() #> x metid::read_mgf()               masks tinytools::read_mgf(), masstools::read_mgf() #> x MSnbase::reduce()               masks purrr::reduce() #> x tinytools::removeNoise()        masks masstools::removeNoise() #> x S4Vectors::rename()             masks dplyr::rename(), massdataset::rename() #> x BiocGenerics::rowMeans()        masks massdataset::rowMeans(), base::rowMeans() #> x BiocGenerics::rowSums()         masks massdataset::rowSums(), base::rowSums() #> x purrr::set_names()              masks magrittr::set_names() #> x tinytools::setwd_project()      masks masstools::setwd_project() #> x tinytools::split_formula()      masks masstools::split_formula() #> x tinytools::trans_ID()           masks masstools::trans_ID() #> x tinytools::trans_id_database()  masks masstools::trans_id_database() library(tidyverse)"},{"path":"https://tidymass.github.io/tidymass/articles/explore_data.html","id":"positive-mode","dir":"Articles","previous_headings":"Data preparation","what":"Positive mode","title":"Explore data","text":"Load object. Read sample information. Add sample_info_pos object_pos Save object_pos new folder named data_cleaning. positive mode, 259 samples 10,149 variables. 220 subject samples 39 QC samples. 110 control samples 110 case samples. Two batches total, 112 samples batch 1 147 batch 2. Next, can get peak distributation plot positive mode.  can explore missing values (mvs) positive mode data. 785,821 mvs total. Missing value number sample. Missing value number variable. can use figure show missing value information.  Show mvs samples.  Show mvs variables","code":"load(\"mzxml_ms1_data/POS/Result/object\") object_pos <- object object_pos #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 10149 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 10149 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:37:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:36:42 sample_info_pos <- readr::read_csv(\"sample_info/sample_info_pos.csv\") #> Rows: 259 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_pos) #> # A tibble: 6 × 6 #>   sample_id    injection.order class   batch subject_id  group   #>   <chr>                  <dbl> <chr>   <dbl> <chr>       <chr>   #> 1 sample_QC_01               1 QC          1 NA          QC      #> 2 sample_01                  2 Subject     1 subject_474 Control #> 3 sample_02                  3 Subject     1 subject_431 Control #> 4 sample_06                  4 Subject     1 subject_414 Case    #> 5 sample_07                  5 Subject     1 subject_830 Control #> 6 sample_11                  6 Subject     1 subject_125 Case object_pos %>%    extract_sample_info() %>%    head() #>    sample_id group   class injection.order #> 1  sample_06  Case Subject               1 #> 2 sample_103  Case Subject               2 #> 3  sample_11  Case Subject               3 #> 4 sample_112  Case Subject               4 #> 5 sample_117  Case Subject               5 #> 6  sample_12  Case Subject               6  object_pos <-    object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_pos =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_pos,             by = \"sample_id\")  object_pos %>%    extract_sample_info() %>%    head() #>    sample_id injection.order   class batch  subject_id group #> 1  sample_06               4 Subject     1 subject_414  Case #> 2 sample_103              71 Subject     1 subject_330  Case #> 3  sample_11               6 Subject     1 subject_125  Case #> 4 sample_112              78 Subject     1 subject_295  Case #> 5 sample_117              80 Subject     1 subject_793  Case #> 6  sample_12               8 Subject     1 subject_387  Case dir.create(\"data_cleaning/POS\", showWarnings = FALSE, recursive = TRUE) save(object_pos, file = \"data_cleaning/POS/object_pos\") object_pos #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 10149 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 10149 x 3 data.frame] #> 4.sample_info_note:[ 1 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 dim(object_pos) #> [1] 10149   259 object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(class) #>     class   n #> 1      QC  39 #> 2 Subject 220  object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39  object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(batch) #>   batch   n #> 1     1 112 #> 2     2 147 object_pos %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2)) get_mv_number(object = object_pos) #> [1] 785821 get_mv_number(object = object_pos, by = \"sample\") %>%    head() #>  sample_06 sample_103  sample_11 sample_112 sample_117  sample_12  #>       4016       2711       4063       2981       2919       3844 get_mv_number(object = object_pos, by = \"variable\") %>%    head() #>  M70T73_POS  M70T53_POS M70T183_POS M70T527_POS M71T695_POS M71T183_POS  #>         129          16         155          54         133         169 show_missing_values(object = object_pos, show_column_names = FALSE, percentage = TRUE) show_sample_missing_values(object = object_pos, percentage = TRUE) show_variable_missing_values(   object = object_pos,   percentage = TRUE,   show_x_text = FALSE,   show_x_ticks = FALSE ) +   scale_size_continuous(range = c(0.01, 1))"},{"path":"https://tidymass.github.io/tidymass/articles/explore_data.html","id":"negative-mode","dir":"Articles","previous_headings":"Data preparation","what":"Negative mode","title":"Explore data","text":"Load object. Read sample information. Add sample_info_neg object_neg Save object_neg new folder named data_cleaning. negative mode, 259 samples 8,804 variables. 220 subject samples 39 QC samples. 110 control samples 110 case samples. Two batches total, 112 samples batch 1 147 batch 2. Next, can get peak distributation plot negative mode.  can explore missing values negitive mode data. 748,253 mvs total. Missing value number sample. Missing value number variable. can use figure show missing value information.  Show mvs samples.  Show mvs variables.","code":"load(\"mzxml_ms1_data/NEG/Result/object\") object_neg <- object object_neg #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 8804 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 8804 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:38:19 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:38:02 sample_info_neg <-   readr::read_csv(\"sample_info/sample_info_neg.csv\") #> Rows: 259 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_neg) #> # A tibble: 6 × 6 #>   sample_id    injection.order class   batch subject_id  group   #>   <chr>                  <dbl> <chr>   <dbl> <chr>       <chr>   #> 1 sample_QC_01               1 QC          1 NA          QC      #> 2 sample_01                  2 Subject     1 subject_474 Control #> 3 sample_02                  3 Subject     1 subject_431 Control #> 4 sample_06                  4 Subject     1 subject_414 Case    #> 5 sample_07                  5 Subject     1 subject_830 Control #> 6 sample_11                  6 Subject     1 subject_125 Case object_neg %>%    extract_sample_info() %>%    head() #>    sample_id group   class injection.order #> 1  sample_06  Case Subject               1 #> 2 sample_103  Case Subject               2 #> 3  sample_11  Case Subject               3 #> 4 sample_112  Case Subject               4 #> 5 sample_117  Case Subject               5 #> 6  sample_12  Case Subject               6  object_neg <-    object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_neg <-   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_neg,             by = \"sample_id\")  object_neg %>%    extract_sample_info() %>%    head() #>    sample_id injection.order   class batch  subject_id group #> 1  sample_06               4 Subject     1 subject_414  Case #> 2 sample_103              71 Subject     1 subject_330  Case #> 3  sample_11               6 Subject     1 subject_125  Case #> 4 sample_112              78 Subject     1 subject_295  Case #> 5 sample_117              80 Subject     1 subject_793  Case #> 6  sample_12               8 Subject     1 subject_387  Case dir.create(\"data_cleaning/NEG\", showWarnings = FALSE, recursive = TRUE) save(object_neg, file = \"data_cleaning/NEG/object_neg\") object_neg #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 8804 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 8804 x 3 data.frame] #> 4.sample_info_note:[ 1 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 dim(object_neg) #> [1] 8804  259 object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(class) #>     class   n #> 1      QC  39 #> 2 Subject 220  object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39  object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(batch) #>   batch   n #> 1     1  86 #> 2     2 173 object_neg %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2)) get_mv_number(object = object_neg) #> [1] 748253 get_mv_number(object = object_neg, by = \"sample\") %>%    head() #>  sample_06 sample_103  sample_11 sample_112 sample_117  sample_12  #>       3029       2766       3298       3100       2912       3053 get_mv_number(object = object_neg, by = \"variable\") %>%    head() #> M70T712_NEG M70T527_NEG M70T587_NEG  M70T47_NEG M71T587_NEG M71T641_NEG  #>          16         137           2         146          41          19 show_missing_values(object = object_neg, show_column_names = FALSE, percentage = TRUE) show_sample_missing_values(object = object_neg, percentage = TRUE) show_variable_missing_values(object = object_neg,                               percentage = TRUE,                               show_x_text = FALSE,                               show_x_ticks = FALSE) +   scale_size_continuous(range = c(0.01, 1))"},{"path":"https://tidymass.github.io/tidymass/articles/explore_data.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"Explore data","text":"exploration, brief summary data. Next, use masscleaner pacakge data cleaning data.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/explore_data.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Explore data","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #>  [1] forcats_0.5.1      stringr_1.4.0      dplyr_1.0.7        purrr_0.3.4        #>  [5] readr_2.1.1        tidyr_1.1.4        tibble_3.1.6       ggplot2_3.3.5      #>  [9] tidyverse_1.3.1    magrittr_2.0.1     tinytools_0.9.1    massdataset_0.99.1 #>  #> loaded via a namespace (and not attached): #>   [1] matrixStats_0.61.0    fs_1.5.2              bit64_4.0.5           #>   [4] lubridate_1.8.0       doParallel_1.0.16     RColorBrewer_1.1-2    #>   [7] httr_1.4.2            rprojroot_2.0.2       ggsci_2.9             #>  [10] backports_1.4.1       tools_4.2.0           bslib_0.3.1           #>  [13] utf8_1.2.2            R6_2.5.1              DBI_1.1.2             #>  [16] BiocGenerics_0.41.2   lazyeval_0.2.2        colorspace_2.0-2      #>  [19] GetoptLong_1.0.5      withr_2.4.3           tidyselect_1.1.1      #>  [22] leaflet_2.0.4.1       bit_4.0.4             compiler_4.2.0        #>  [25] rvest_1.0.2           textshaping_0.3.6     cli_3.1.0             #>  [28] xml2_1.3.3            desc_1.4.0            plotly_4.10.0         #>  [31] labeling_0.4.2        sass_0.4.0            scales_1.1.1          #>  [34] pbapply_1.5-0         pkgdown_2.0.1         systemfonts_1.0.3     #>  [37] digest_0.6.29         yulab.utils_0.0.4     rmarkdown_2.11        #>  [40] pkgconfig_2.0.3       htmltools_0.5.2       highr_0.9             #>  [43] dbplyr_2.1.1          fastmap_1.1.0         readxl_1.3.1          #>  [46] htmlwidgets_1.5.4     rlang_0.4.12          GlobalOptions_0.1.2   #>  [49] rstudioapi_0.13       farver_2.1.0          shape_1.4.6           #>  [52] gridGraphics_0.5-1    jquerylib_0.1.4       generics_0.1.1        #>  [55] jsonlite_1.7.2        vroom_1.5.7           crosstalk_1.2.0       #>  [58] zip_2.2.0             ggplotify_0.1.0       Rcpp_1.0.7            #>  [61] munsell_0.5.0         S4Vectors_0.33.10     fansi_1.0.0           #>  [64] lifecycle_1.0.1       stringi_1.7.6         yaml_2.2.1            #>  [67] plyr_1.8.6            grid_4.2.0            parallel_4.2.0        #>  [70] crayon_1.4.2          haven_2.4.3           circlize_0.4.14       #>  [73] hms_1.1.1             magick_2.7.2          knitr_1.37            #>  [76] ComplexHeatmap_2.11.0 pillar_1.6.4          rjson_0.2.21          #>  [79] codetools_0.2-18      stats4_4.2.0          reprex_2.0.1          #>  [82] glue_1.6.0            evaluate_0.14         modelr_0.1.8          #>  [85] data.table_1.14.2     tzdb_0.2.0            png_0.1-7             #>  [88] vctrs_0.3.8           foreach_1.5.1         cellranger_1.1.0      #>  [91] gtable_0.3.0          clue_0.3-60           assertthat_0.2.1      #>  [94] cachem_1.0.6          xfun_0.29             openxlsx_4.2.5        #>  [97] broom_0.7.11          ragg_1.2.1            viridisLite_0.4.0     #> [100] iterators_1.0.13      memoise_2.0.1         IRanges_2.29.1        #> [103] cluster_2.1.2         ellipsis_0.3.2"},{"path":"https://tidymass.github.io/tidymass/articles/faq.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Frequently Asked Questions","text":"installation, ask want update packages times, just enter Enter Reurn key skip . install tidymass github, error like : Try resolve : R console, type code: open page browser, create “New personal access token” copy .  type code: add one line like : GITHUB_PAT created step 1. restart R session try .","code":"Error: Failed to install 'tidymass' from GitHub: HTTP error 403. API rate limit exceeded for 171.66.10.237. (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.) usethis::create_github_token() usethis::edit_r_environ() GITHUB_PAT=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"},{"path":"https://tidymass.github.io/tidymass/articles/faq.html","id":"comments","dir":"Articles","previous_headings":"","what":"Comments","title":"Frequently Asked Questions","text":"Please leave messing questions tidymass. Leave message","code":""},{"path":"https://tidymass.github.io/tidymass/articles/faq.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Frequently Asked Questions","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rstudioapi_0.13   knitr_1.37        magrittr_2.0.2    R6_2.5.1          #>  [5] ragg_1.2.1        rlang_1.0.1       fastmap_1.1.0     highr_0.9         #>  [9] stringr_1.4.0     tools_4.1.2       xfun_0.29         cli_3.2.0         #> [13] jquerylib_0.1.4   htmltools_0.5.2   systemfonts_1.0.3 yaml_2.3.4        #> [17] digest_0.6.29     rprojroot_2.0.2   pkgdown_2.0.2     crayon_1.5.0      #> [21] textshaping_0.3.6 purrr_0.3.4       codetools_0.2-18  sass_0.4.0        #> [25] fs_1.5.2          memoise_2.0.1     cachem_1.0.6      evaluate_0.15     #> [29] rmarkdown_2.11    stringi_1.7.6     compiler_4.1.2    bslib_0.3.1       #> [33] desc_1.4.0        jsonlite_1.7.3"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Metabolite annotation","text":"just use dataset previous step.","code":"library(tidymass) load(\"data_cleaning/POS/object_pos2\") load(\"data_cleaning/NEG/object_neg2\")"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"add-ms2-spectra-data-to-mass_dataset-class","dir":"Articles","previous_headings":"","what":"Add MS2 spectra data to mass_dataset class","title":"Metabolite annotation","text":"Download MS2 data . Uncompress .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"positive-mode","dir":"Articles","previous_headings":"Add MS2 spectra data to mass_dataset class","what":"Positive mode","title":"Metabolite annotation","text":"","code":"object_pos2 <-   mutate_ms2(     object = object_pos2,     column = \"rp\",     polarity = \"positive\",     ms1.ms2.match.mz.tol = 15,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/POS\"   ) #> Reading mgf data... #>  #> Reading mgf data... #>  #> Reading mgf data... #>  #> Reading mgf data... #>  #> 1042 out of 5101 variable have MS2 spectra. #>  #> Selecting the most intense MS2 spectrum for each peak... object_pos2 #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 5101 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 5101 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 1042 variables x 951 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:02 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:38:07 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:38:08 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:01 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:53:36 extract_ms2_data(object_pos2) #> $`QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf` #> --------------------  #> column: rp  #> polarity: positive  #> mz_tol: 15  #> rt_tol (second): 30  #> --------------------  #> 1042 variables: #> M71T775_POS M72T53_POS M83T50_POS M84T57_POS M85T54_POS... #> 951 MS2 spectra. #> mz70.981170654297rt775.4286 mz72.081642150879rt53.6528862 mz82.945625305176rt49.238013 mz84.045127868652rt59.6895132 mz85.029016959043rt53.0835648... #>"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"negative-mode","dir":"Articles","previous_headings":"Add MS2 spectra data to mass_dataset class","what":"Negative mode","title":"Metabolite annotation","text":"","code":"object_neg2 <-   mutate_ms2(     object = object_neg2,     column = \"rp\",     polarity = \"negative\",     ms1.ms2.match.mz.tol = 15,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/NEG\"   ) #> Reading mgf data... #>  #> Reading mgf data... #>  #> Reading mgf data... #>  #> Reading mgf data... #>  #> 1092 out of 4104 variable have MS2 spectra. #>  #> Selecting the most intense MS2 spectrum for each peak... object_neg2 #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 4104 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 4104 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 1092 variables x 988 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:06 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:50:47 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:50:47 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:37 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:54:06 extract_ms2_data(object_neg2) #> $`QEP_SGA_QC_neg_ms2_ce25_01.mgf;QEP_SGA_QC_neg_ms2_ce25_02.mgf;QEP_SGA_QC_neg_ms2_ce50_01.mgf;QEP_SGA_QC_neg_ms2_ce50_02.mgf` #> --------------------  #> column: rp  #> polarity: negative  #> mz_tol: 15  #> rt_tol (second): 30  #> --------------------  #> 1092 variables: #> M71T51_NEG M73T74_NEG M75T52_NEG M80T299_NEG M80T232_NEG... #> 988 MS2 spectra. #> mz71.012359619141rt52.3270968 mz73.02799987793rt74.779476 mz75.007308959961rt24.1557228 mz79.955728954783rt301.268466 mz79.955834350356rt235.127328... #>"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"metabolite-annotation","dir":"Articles","previous_headings":"","what":"Metabolite annotation","title":"Metabolite annotation","text":"Metabolite annotation based metid package.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"download-database","dir":"Articles","previous_headings":"Metabolite annotation","what":"Download database","title":"Metabolite annotation","text":"need download MS2 database metid website. download Michael Snyder RPLC databases, Orbitrap database MoNA database. place new folder named metabolite_annotation.","code":""},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotate-features-using-snyder_database_rplc0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Positive mode","what":"Annotate features using snyder_database_rplc0.0.3.","title":"Metabolite annotation","text":"","code":"load(\"metabolite_annotation/snyder_database_rplc0.0.3.rda\") snyder_database_rplc0.0.3 #> -----------Base information------------ #> Version: 0.0.2  #> Source: MS  #> Link: http://snyderlab.stanford.edu/  #> Creater: Xiaotao Shen ( shenxt1990@163.com ) #> With RT information #> -----------Spectral information------------ #> There are 14 items of metabolites in database: #> Lab.ID; Compound.name; mz; RT; CAS.ID; HMDB.ID; KEGG.ID; Formula; mz.pos; mz.neg; Submitter; Family; Sub.pathway; Note  #> There are 833 metabolites in total #> There are 356 metabolites in positive mode with MS2 spectra. #> There are 534 metabolites in negative mode with MS2 spectra. #> Collision energy in positive mode (number:): #> Total number: 2  #> NCE25; NCE50  #> Collision energy in negative mode: #> Total number: 2  #> NCE25; NCE50  #> object_pos2 <-   annotate_metabolites_mass_dataset(object = object_pos2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                      polarity = \"positive\",                                     database = snyder_database_rplc0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotate-features-using-orbitrap_database0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Positive mode","what":"Annotate features using orbitrap_database0.0.3.","title":"Metabolite annotation","text":"","code":"load(\"metabolite_annotation/orbitrap_database0.0.3.rda\") orbitrap_database0.0.3 #> -----------Base information------------ #> Version: 0.0.1  #> Source: NIST  #> Link: https://www.nist.gov/  #> Creater: Xiaotao Shen ( shenxt1990@163.com ) #> Without RT informtaion #> -----------Spectral information------------ #> There are 8 items of metabolites in database: #> Lab.ID; Compound.name; mz; RT; CAS.ID; HMDB.ID; KEGG.ID; Formula  #> There are 8360 metabolites in total #> There are 7103 metabolites in positive mode with MS2 spectra. #> There are 3311 metabolites in negative mode with MS2 spectra. #> Collision energy in positive mode (number:): #> Total number: 12  #> 10; 15; 45; 55; 5; 20; 30; 35; 40; 25  #> Collision energy in negative mode: #> Total number: 12  #> 10; 25; 5; 15; 20; 30; 50; 35; 40; 45  #> object_pos2 <-    annotate_metabolites_mass_dataset(object = object_pos2,                                      ms1.match.ppm = 15,                                      polarity = \"positive\",                                     database = orbitrap_database0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotate-features-using-mona_database0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Positive mode","what":"Annotate features using mona_database0.0.3.","title":"Metabolite annotation","text":"","code":"load(\"metabolite_annotation/mona_database0.0.3.rda\") orbitrap_database0.0.3 #> -----------Base information------------ #> Version: 0.0.1  #> Source: NIST  #> Link: https://www.nist.gov/  #> Creater: Xiaotao Shen ( shenxt1990@163.com ) #> Without RT informtaion #> -----------Spectral information------------ #> There are 8 items of metabolites in database: #> Lab.ID; Compound.name; mz; RT; CAS.ID; HMDB.ID; KEGG.ID; Formula  #> There are 8360 metabolites in total #> There are 7103 metabolites in positive mode with MS2 spectra. #> There are 3311 metabolites in negative mode with MS2 spectra. #> Collision energy in positive mode (number:): #> Total number: 12  #> 10; 15; 45; 55; 5; 20; 30; 35; 40; 25  #> Collision energy in negative mode: #> Total number: 12  #> 10; 25; 5; 15; 20; 30; 50; 35; 40; 45  #> object_pos2 <-    annotate_metabolites_mass_dataset(object = object_pos2,                                      ms1.match.ppm = 15,                                      polarity = \"positive\",                                     database = mona_database0.0.3)"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotate-features-using-snyder_database_rplc0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Negative mode","what":"Annotate features using snyder_database_rplc0.0.3.","title":"Metabolite annotation","text":"","code":"object_neg2 <-    annotate_metabolites_mass_dataset(object = object_neg2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                     polarity = \"negative\",                                     database = snyder_database_rplc0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotate-features-using-orbitrap_database0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Negative mode","what":"Annotate features using orbitrap_database0.0.3.","title":"Metabolite annotation","text":"","code":"object_neg2 <-    annotate_metabolites_mass_dataset(object = object_neg2,                                      ms1.match.ppm = 15,                                      polarity = \"negative\",                                     database = orbitrap_database0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotate-features-using-mona_database0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Negative mode","what":"Annotate features using mona_database0.0.3.","title":"Metabolite annotation","text":"","code":"object_neg2 <-    annotate_metabolites_mass_dataset(object = object_neg2,                                      ms1.match.ppm = 15,                                      polarity = \"negative\",                                     database = mona_database0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"annotation-result","dir":"Articles","previous_headings":"Metabolite annotation","what":"Annotation result","title":"Metabolite annotation","text":"annotation result assign mass_dataset class annotation_table slot. Use ms2_plot_mass_dataset() function get MS2 matching plot.       Save data subsequent analysis.","code":"head(extract_annotation_table(object = object_pos2)) #>    variable_id #> 1 M100T160_POS #> 2 M103T100_POS #> 3 M103T100_POS #> 4  M104T51_POS #> 5 M113T187_POS #> 6  M113T81_POS #>                                                                                                                      ms2_files_id #> 1 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 2 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 3 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 4 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 5 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 6 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #>                  ms2_spectrum_id           Compound.name    CAS.ID   HMDB.ID #> 1 mz100.076248168945rt158.377638  N-Methyl-2-pyrrolidone  872-50-4      <NA> #> 2   mz103.054814801682rt96.92601      Phenylacetaldehyde  122-78-1 HMDB06236 #> 3   mz103.054814801682rt96.92601 3-Amino-2-oxazolidinone   80-65-9      <NA> #> 4  mz104.107467651367rt49.510314      5-Amino-1-pentanol 2508-29-4      <NA> #> 5 mz113.060150146484rt188.406384    1,4-Cyclohexanedione      <NA>      <NA> #> 6   mz113.035087585449rt77.20827                  URACIL      <NA>      <NA> #>   KEGG.ID     Lab.ID     Adduct  mz.error mz.match.score RT.error #> 1  C11118 MONA_11509     (M+H)+  1.335652      0.9960435       NA #> 2  C00601    NO07389 (M+H-H2O)+  1.537004      0.9947640       NA #> 3    <NA>    NO07231     (M+H)+ 11.537004      0.7439487       NA #> 4    <NA>    NO07238     (M+H)+  1.169128      0.9969671       NA #> 5    <NA> MONA_14519     (M+H)+  1.051626      0.9975454       NA #> 6    <NA> MONA_18148     (M+H)+  1.275544      0.9963909       NA #>   RT.match.score                  CE        SS Total.score   Database Level #> 1             NA       35  (nominal) 0.6871252   0.8029696 MoNA_0.0.1     2 #> 2             NA                  10 0.5748835   0.7323387 NIST_0.0.1     2 #> 3             NA                  20 0.5020256   0.5927468 NIST_0.0.1     2 #> 4             NA                   5 0.5971697   0.7470937 NIST_0.0.1     2 #> 5             NA HCD (NCE 20-30-40%) 0.5401414   0.7116679 MoNA_0.0.1     2 #> 6             NA                  10 0.6889885   0.8042644 MoNA_0.0.1     2 variable_info_pos <-  extract_variable_info(object = object_pos2) head(variable_info_pos) #>   variable_id       mz        rt    na_freq  na_freq.1  na_freq.2 Compound.name #> 1  M70T53_POS 70.06596  52.78542 0.00000000 0.14545455 0.00000000          <NA> #> 2 M70T527_POS 70.36113 526.76657 0.02564103 0.18181818 0.30000000          <NA> #> 3 M71T775_POS 70.98125 775.44867 0.00000000 0.00000000 0.00000000          <NA> #> 4 M71T669_POS 70.98125 668.52844 0.00000000 0.02727273 0.01818182          <NA> #> 5 M71T715_POS 70.98125 714.74066 0.05128205 0.12727273 0.02727273          <NA> #> 6  M71T54_POS 71.04999  54.45641 0.15384615 0.99090909 0.05454545          <NA> #>   CAS.ID HMDB.ID KEGG.ID Lab.ID Adduct mz.error mz.match.score RT.error #> 1   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 2   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 3   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 4   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 5   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 6   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #>   RT.match.score   CE SS Total.score Database Level #> 1             NA <NA> NA          NA     <NA>    NA #> 2             NA <NA> NA          NA     <NA>    NA #> 3             NA <NA> NA          NA     <NA>    NA #> 4             NA <NA> NA          NA     <NA>    NA #> 5             NA <NA> NA          NA     <NA>    NA #> 6             NA <NA> NA          NA     <NA>    NA table(variable_info_pos$Level) #>  #>   1   2  #>  23 183 table(variable_info_pos$Database) #>  #> MoNA_0.0.1   MS_0.0.2 NIST_0.0.1  #>         78         23        105 ms2_plot_mass_dataset(object = object_pos2,                        variable_id = \"M86T95_POS\",                        database = mona_database0.0.3) #> $M86T95_POS_1 #>  #> $M86T95_POS_2 #>  #> $M86T95_POS_3 ms2_plot_mass_dataset(object = object_pos2,                        variable_id = \"M86T95_POS\",                        database = mona_database0.0.3,                        interactive_plot = TRUE) #> $M86T95_POS_1 #>  #> $M86T95_POS_2 #>  #> $M86T95_POS_3 ms2_plot_mass_dataset(object = object_pos2,                        variable_id = \"M147T54_POS\",                        database = snyder_database_rplc0.0.3,                        interactive_plot = FALSE) #> database may be wrong. #> database may be wrong. #> $M147T54_POS_1 #>  #> $M147T54_POS_2 #>  #> $M147T54_POS_3 save(object_pos2, file = \"metabolite_annotation/object_pos2\") save(object_neg2, file = \"metabolite_annotation/object_neg2\")"},{"path":"https://tidymass.github.io/tidymass/articles/metabolite_annotation.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Metabolite annotation","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] tinytools_0.9.1      dplyr_1.0.8          metid_1.2.2          #>  [4] metpath_0.99.2       massstat_0.99.6      ggfortify_0.4.14     #>  [7] ggplot2_3.3.5        massqc_0.99.3        masscleaner_0.99.3   #> [10] xcms_3.16.1          MSnbase_2.20.4       ProtGenerics_1.26.0  #> [13] S4Vectors_0.32.3     mzR_2.28.0           Rcpp_1.0.8           #> [16] Biobase_2.54.0       BiocGenerics_0.40.0  BiocParallel_1.28.3  #> [19] massprocesser_0.99.3 magrittr_2.0.2       masstools_0.99.3     #> [22] massdataset_0.99.8   tidymass_0.99.4      #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  tidyr_1.2.0                 #>   [3] missForest_1.4              knitr_1.37                  #>   [5] DelayedArray_0.20.0         data.table_1.14.2           #>   [7] rpart_4.1.16                KEGGREST_1.34.0             #>   [9] RCurl_1.98-1.5              doParallel_1.0.17           #>  [11] generics_0.1.2              snow_0.4-4                  #>  [13] leaflet_2.1.0               preprocessCore_1.56.0       #>  [15] mixOmics_6.18.1             RANN_2.6.1                  #>  [17] proxy_0.4-26                future_1.23.0               #>  [19] tzdb_0.2.0                  xml2_1.3.3                  #>  [21] lubridate_1.8.0             ggsci_2.9                   #>  [23] SummarizedExperiment_1.24.0 assertthat_0.2.1            #>  [25] tidyverse_1.3.1             viridis_0.6.2               #>  [27] xfun_0.29                   hms_1.1.1                   #>  [29] jquerylib_0.1.4             evaluate_0.15               #>  [31] DEoptimR_1.0-10             fansi_1.0.2                 #>  [33] dbplyr_2.1.1                readxl_1.3.1                #>  [35] igraph_1.2.11               DBI_1.1.2                   #>  [37] htmlwidgets_1.5.4           MsFeatures_1.3.0            #>  [39] rARPACK_0.11-0              purrr_0.3.4                 #>  [41] ellipsis_0.3.2              RSpectra_0.16-0             #>  [43] crosstalk_1.2.0             backports_1.4.1             #>  [45] ggcorrplot_0.1.3            MatrixGenerics_1.6.0        #>  [47] vctrs_0.3.8                 remotes_2.4.2               #>  [49] cachem_1.0.6                withr_2.4.3                 #>  [51] ggforce_0.3.3               itertools_0.1-3             #>  [53] robustbase_0.93-9           checkmate_2.0.0             #>  [55] cluster_2.1.2               lazyeval_0.2.2              #>  [57] crayon_1.5.0                ellipse_0.4.2               #>  [59] labeling_0.4.2              pkgconfig_2.0.3             #>  [61] tweenr_1.0.2                GenomeInfoDb_1.30.0         #>  [63] nnet_7.3-17                 rlang_1.0.1                 #>  [65] globals_0.14.0              lifecycle_1.0.1             #>  [67] affyio_1.64.0               extrafontdb_1.0             #>  [69] fastDummies_1.6.3           MassSpecWavelet_1.60.0      #>  [71] modelr_0.1.8                cellranger_1.1.0            #>  [73] randomForest_4.7-1          rprojroot_2.0.2             #>  [75] polyclip_1.10-0             matrixStats_0.61.0          #>  [77] Matrix_1.4-0                reprex_2.0.1                #>  [79] base64enc_0.1-3             GlobalOptions_0.1.2         #>  [81] png_0.1-7                   viridisLite_0.4.0           #>  [83] rjson_0.2.21                clisymbols_1.2.0            #>  [85] bitops_1.0-7                pander_0.6.4                #>  [87] Biostrings_2.62.0           shape_1.4.6                 #>  [89] stringr_1.4.0               parallelly_1.30.0           #>  [91] robust_0.7-0                readr_2.1.2                 #>  [93] jpeg_0.1-9                  gridGraphics_0.5-1          #>  [95] scales_1.1.1                memoise_2.0.1               #>  [97] plyr_1.8.6                  zlibbioc_1.40.0             #>  [99] compiler_4.1.2              RColorBrewer_1.1-2          #> [101] pcaMethods_1.86.0           clue_0.3-60                 #> [103] rrcov_1.6-2                 cli_3.2.0                   #> [105] affy_1.72.0                 XVector_0.34.0              #> [107] listenv_0.8.0               patchwork_1.1.1             #> [109] pbapply_1.5-0               htmlTable_2.4.0             #> [111] Formula_1.2-4               MASS_7.3-55                 #> [113] tidyselect_1.1.1            vsn_3.62.0                  #> [115] stringi_1.7.6               forcats_0.5.1               #> [117] textshaping_0.3.6           highr_0.9                   #> [119] yaml_2.3.4                  latticeExtra_0.6-29         #> [121] MALDIquant_1.21             ggrepel_0.9.1               #> [123] grid_4.1.2                  sass_0.4.0                  #> [125] tools_4.1.2                 parallel_4.1.2              #> [127] circlize_0.4.14             rstudioapi_0.13             #> [129] MsCoreUtils_1.6.0           foreach_1.5.2               #> [131] foreign_0.8-82              gridExtra_2.3               #> [133] farver_2.1.0                mzID_1.32.0                 #> [135] ggraph_2.0.5                rvcheck_0.2.1               #> [137] digest_0.6.29               BiocManager_1.30.16         #> [139] GenomicRanges_1.46.1        broom_0.7.12                #> [141] ncdf4_1.19                  httr_1.4.2                  #> [143] ComplexHeatmap_2.10.0       colorspace_2.0-2            #> [145] rvest_1.0.2                 XML_3.99-0.8                #> [147] fs_1.5.2                    IRanges_2.28.0              #> [149] splines_4.1.2               yulab.utils_0.0.4           #> [151] graphlayouts_0.8.0          pkgdown_2.0.2               #> [153] ggplotify_0.1.0             plotly_4.10.0               #> [155] systemfonts_1.0.3           fit.models_0.64             #> [157] jsonlite_1.7.3              tidygraph_1.2.0             #> [159] corpcor_1.6.10              R6_2.5.1                    #> [161] Hmisc_4.6-0                 pillar_1.7.0                #> [163] htmltools_0.5.2             glue_1.6.1                  #> [165] fastmap_1.1.0               class_7.3-20                #> [167] codetools_0.2-18            pcaPP_1.9-74                #> [169] mvtnorm_1.1-3               furrr_0.2.3                 #> [171] utf8_1.2.2                  lattice_0.20-45             #> [173] bslib_0.3.1                 tibble_3.1.6                #> [175] zip_2.2.0                   openxlsx_4.2.5              #> [177] Rttf2pt1_1.3.9              survival_3.2-13             #> [179] limma_3.50.0                rmarkdown_2.11              #> [181] desc_1.4.0                  munsell_0.5.0               #> [183] e1071_1.7-9                 GetoptLong_1.0.5            #> [185] GenomeInfoDbData_1.2.7      iterators_1.0.14            #> [187] impute_1.68.0               haven_2.4.3                 #> [189] reshape2_1.4.4              gtable_0.3.0                #> [191] extrafont_0.17"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/more_software.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"More software","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rprojroot_2.0.2   digest_0.6.29     crayon_1.4.2      R6_2.5.1          #>  [5] jsonlite_1.7.2    magrittr_2.0.1    evaluate_0.14     stringi_1.7.6     #>  [9] rlang_0.4.12      cachem_1.0.6      fs_1.5.2          jquerylib_0.1.4   #> [13] bslib_0.3.1       ragg_1.2.1        rmarkdown_2.11    pkgdown_2.0.1     #> [17] textshaping_0.3.6 desc_1.4.0        tools_4.2.0       stringr_1.4.0     #> [21] purrr_0.3.4       yaml_2.2.1        xfun_0.29         fastmap_1.1.0     #> [25] compiler_4.2.0    systemfonts_1.0.3 memoise_2.0.1     htmltools_0.5.2   #> [29] knitr_1.37        sass_0.4.0"},{"path":"https://tidymass.github.io/tidymass/articles/pathway_enrichment.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Pathway enrichment","text":"Load differential expressional metabolites.","code":"library(tidymass) library(tidyverse) load(\"statistical_analysis/object_final\") object_final #> --------------------  #> massdataset version: 0.99.14  #> --------------------  #> 1.expression_data:[ 291 x 259 data.frame] #> 2.sample_info:[ 259 x 11 data.frame] #> 3.variable_info:[ 291 x 12 data.frame] #> 4.sample_info_note:[ 11 x 2 data.frame] #> 5.variable_info_note:[ 9 x 2 data.frame] #> 6.ms2_data:[ 2084 variables x 1902 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44 #> 2 massdataset      filter() 2022-03-07 17:05:56 #> 3 massdataset      filter() 2022-03-07 17:05:56 #> 4 massdataset      filter() 2022-03-07 17:05:58 #> 5 massdataset      filter() 2022-03-07 17:05:58 #> 6 massdataset      filter() 2022-03-07 17:05:58 #> 7 massdataset      filter() 2022-03-07 17:05:58 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:02 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:38:07 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:38:08 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:01 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:53:36 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-02-22 21:16:23 #> 2   metid annotate_metabolites_mass_dataset() 2022-02-22 21:30:10 #> 3   metid annotate_metabolites_mass_dataset() 2022-02-22 21:47:59 #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47 #> 2 massdataset      filter() 2022-03-07 17:05:56 #> 3 massdataset      filter() 2022-03-07 17:05:56 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:06 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:50:47 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:50:47 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:37 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:54:06 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-02-22 21:50:29 #> 2   metid annotate_metabolites_mass_dataset() 2022-02-22 22:08:10 #> 3   metid annotate_metabolites_mass_dataset() 2022-02-22 22:26:33 #> merge_mass_dataset ----------  #>       Package      Function.used                Time #> 1 massdataset merge_mass_dataset 2022-03-07 17:05:56 #> slice_head ----------  #>       Package Function.used                Time #> 1 massdataset  slice_head() 2022-03-07 17:05:58 #> 2 massdataset  slice_head() 2022-03-07 17:05:58 #> mutate_fc ----------  #>       Package Function.used                Time #> 1 massdataset   mutate_fc() 2022-03-07 17:05:59 #> mutate_p_value ----------  #>       Package    Function.used                Time #> 1 massdataset mutate_p_value() 2022-03-07 17:05:59"},{"path":"https://tidymass.github.io/tidymass/articles/pathway_enrichment.html","id":"pathway-enrichment","dir":"Articles","previous_headings":"","what":"Pathway enrichment","title":"Pathway enrichment","text":"results placed folder named pathway_enrichment.","code":"dir.create(path = \"pathway_enrichment\", showWarnings = FALSE) diff_metabolites <-   object_final %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(p_value_adjust < 0.05) %>%    extract_variable_info() head(diff_metabolites) #>     variable_id        mz        rt    na_freq  na_freq.1  na_freq.2 na_freq_2 #> 1    M86T95_POS  86.09716  94.57264 0.02564103 0.55454545 0.29090909        NA #> 2 M95T100_1_POS  95.04975  99.77637 0.00000000 0.00000000 0.00000000        NA #> 3  M103T100_POS 103.05477  99.90601 0.00000000 0.00000000 0.00000000        NA #> 4   M104T51_POS 104.10746  51.27993 0.00000000 0.07272727 0.00000000        NA #> 5   M113T81_POS 113.03501  80.73506 0.00000000 0.00000000 0.00000000        NA #> 6  M113T187_POS 113.06018 186.56470 0.02564103 0.01818182 0.02727273        NA #>   na_freq.1_2 na_freq.2_2       fc      p_value p_value_adjust #> 1          NA          NA 1.714629 3.034938e-20   4.702229e-19 #> 2          NA          NA 1.439791 6.761432e-31   3.935153e-29 #> 3          NA          NA 1.345809 5.215317e-19   6.898442e-18 #> 4          NA          NA 1.751085 2.695171e-08   1.188325e-07 #> 5          NA          NA 1.500756 5.966911e-22   1.335670e-20 #> 6          NA          NA 1.951417 1.848299e-17   1.854673e-16 #>          Compound.name    CAS.ID   HMDB.ID KEGG.ID     Lab.ID     Adduct #> 1           Piperidine  110-89-4      <NA>  C01746  MONA_2852     (M+H)+ #> 2               Phenol  108-95-2      <NA>  D01960 MONA_18506     (M+H)+ #> 3   Phenylacetaldehyde  122-78-1 HMDB06236  C00601    NO07389 (M+H-H2O)+ #> 4   5-Amino-1-pentanol 2508-29-4      <NA>    <NA>    NO07238     (M+H)+ #> 5               URACIL      <NA>      <NA>    <NA> MONA_18148     (M+H)+ #> 6 1,4-Cyclohexanedione      <NA>      <NA>    <NA> MONA_14519     (M+H)+ #>   mz.error mz.match.score RT.error RT.match.score                  CE        SS #> 1 1.746869      0.9932417       NA             NA                  30 0.6143541 #> 2 1.416428      0.9955515       NA             NA                  10 0.6102452 #> 3 1.537004      0.9947640       NA             NA                  10 0.5748835 #> 4 1.169128      0.9969671       NA             NA                   5 0.5971697 #> 5 1.275544      0.9963909       NA             NA                  10 0.6889885 #> 6 1.051626      0.9975454       NA             NA HCD (NCE 20-30-40%) 0.5401414 #>   Total.score   Database Level #> 1   0.7564369 MoNA_0.0.1     2 #> 2   0.7547351 MoNA_0.0.1     2 #> 3   0.7323387 NIST_0.0.1     2 #> 4   0.7470937 NIST_0.0.1     2 #> 5   0.8042644 MoNA_0.0.1     2 #> 6   0.7116679 MoNA_0.0.1     2"},{"path":"https://tidymass.github.io/tidymass/articles/pathway_enrichment.html","id":"load-kegg-human-pathway-database","dir":"Articles","previous_headings":"Pathway enrichment","what":"Load KEGG human pathway database","title":"Pathway enrichment","text":"Remove disease pathways: Check result:","code":"data(\"kegg_hsa_pathway\", package = \"metpath\") kegg_hsa_pathway #> ---------Pathway source&version--------- #> KEGG & 2021-12-13  #> -----------Pathway information------------ #> 345 pathways  #> 334 pathways have genes  #> 0 pathways have proteins  #> 281 pathways have compounds  #> Pathway class (top 10): Metabolism; Carbohydrate metabolism;Metabolism; Lipid metabolism  #> get_pathway_class(kegg_hsa_pathway) #> # A tibble: 43 × 2 #>    class                                                                       n #>    <chr>                                                                   <int> #>  1 Cellular Processes; Cell growth and death                                   8 #>  2 Cellular Processes; Cell motility                                           1 #>  3 Cellular Processes; Cellular community - eukaryotes                         5 #>  4 Cellular Processes; Transport and catabolism                                7 #>  5 Environmental Information Processing; Membrane transport                    1 #>  6 Environmental Information Processing; Signal transduction                  26 #>  7 Environmental Information Processing; Signaling molecules and interact…     5 #>  8 Genetic Information Processing; Folding, sorting and degradation            7 #>  9 Genetic Information Processing; Replication and repair                      7 #> 10 Genetic Information Processing; Transcription                               3 #> # … with 33 more rows #get the class of pathways pathway_class =    metpath::pathway_class(kegg_hsa_pathway) head(pathway_class) #> $hsa00010 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00020 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00030 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00040 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00051 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00052 #> [1] \"Metabolism; Carbohydrate metabolism\" remain_idx =   pathway_class %>%   unlist() %>%   stringr::str_detect(\"Disease\") %>%   `!`() %>%   which()  remain_idx #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  90  91  92  93  94 #>  [91]  95  96  97  98  99 100 101 102 103 104 105 106 107 108 109 110 111 112 #> [109] 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 #> [127] 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 #> [145] 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 #> [163] 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 #> [181] 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 #> [199] 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 #> [217] 221 222 223 224 225 226 227 228 229 230 236 240 241 242 243 244 245 246 #> [235] 247 248 249 250 251 252 253 254 pathway_database =   kegg_hsa_pathway[remain_idx] pathway_database #> ---------Pathway source&version--------- #> KEGG & 2021-12-13  #> -----------Pathway information------------ #> 242 pathways  #> 235 pathways have genes  #> 0 pathways have proteins  #> 191 pathways have compounds  #> Pathway class (top 10): Metabolism; Carbohydrate metabolism;Metabolism; Lipid metabolism  #> kegg_id <-   diff_metabolites$KEGG.ID  kegg_id <-   kegg_id[!is.na(kegg_id)] kegg_id #>  [1] \"C01746\" \"D01960\" \"C00601\" \"C00153\" \"C01108\" \"C00906\" \"C10438\" \"C00300\" #>  [9] \"C00407\" \"C14790\" \"C08493\" \"C02237\" \"C01575\" \"C00073\" \"C05842\" \"C00637\" #> [17] \"C00079\" \"D00022\" \"C07481\" \"C12305\" \"C17846\" \"D00029\" \"C00399\" \"C08362\" #> [25] \"C14214\" \"C01595\" \"C00319\" \"C00410\" \"C10523\" \"C01780\" \"C00762\" \"C00735\" #> [33] \"C17337\" \"C01921\" \"C04230\" \"C06539\" \"C00186\" \"C01546\" \"C00490\" \"C02226\" #> [41] \"C00064\" \"C06104\" \"C02612\" \"C07599\" \"C05593\" \"0\"      \"C01601\" \"C02656\" #> [49] \"C00366\" \"C07130\" \"C05635\" \"C16038\" \"C08322\" \"C16308\" \"C10911\" \"C05498\" #> [57] \"C05472\" \"C04555\" result <-  enrich_kegg(query_id = kegg_id,              query_type = \"compound\",              id_type = \"KEGG\",             pathway_database = pathway_database,              p_cutoff = 0.05,              p_adjust_method = \"BH\",              threads = 3) #> 191 pathways. result #> ---------Pathway database&version--------- #> KEGG & 2021-12-13  #> -----------Enrichment result------------ #> 191 pathways are enriched  #> 11 pathways p-values < 0.05  #> Glycolysis / Gluconeogenesis;Citrate cycle (TCA cycle);Pentose phosphate pathway;Pentose and glucuronate interconversions;Fructose and mannose metabolism ... (only top 5 shows) #>"},{"path":"https://tidymass.github.io/tidymass/articles/pathway_enrichment.html","id":"plot-to-show-pathway-enrichment-result","dir":"Articles","previous_headings":"","what":"Plot to show pathway enrichment result","title":"Pathway enrichment","text":"","code":"enrich_bar_plot(object = result,                 x_axis = \"p_value\",                 cutoff = 0.05) enrich_scatter_plot(object = result, y_axis = \"p_value\", y_axis_cutoff = 0.05) enrich_network(   object = result,   point_size = \"p_value\",   p_cutoff = 0.05,   only_significant_pathway = TRUE )"},{"path":"https://tidymass.github.io/tidymass/articles/pathway_enrichment.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Pathway enrichment","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] forcats_0.5.1.9000   stringr_1.4.0        purrr_0.3.4          #>  [4] readr_2.1.2          tidyr_1.2.0          tibble_3.1.6         #>  [7] tidyverse_1.3.1      tinytools_0.9.1      dplyr_1.0.8          #> [10] metid_1.2.4          metpath_0.99.2       massstat_0.99.12     #> [13] ggfortify_0.4.14     massqc_0.99.7        masscleaner_0.99.7   #> [16] xcms_3.16.1          MSnbase_2.20.4       ProtGenerics_1.26.0  #> [19] S4Vectors_0.32.3     mzR_2.28.0           Rcpp_1.0.8           #> [22] Biobase_2.54.0       BiocGenerics_0.40.0  BiocParallel_1.28.3  #> [25] massprocesser_0.99.3 ggplot2_3.3.5        magrittr_2.0.2       #> [28] masstools_0.99.4     massdataset_0.99.14  tidymass_0.99.5      #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  missForest_1.4              #>   [3] knitr_1.37                  DelayedArray_0.20.0         #>   [5] data.table_1.14.2           rpart_4.1.16                #>   [7] KEGGREST_1.34.0             RCurl_1.98-1.5              #>   [9] doParallel_1.0.17           generics_0.1.2              #>  [11] snow_0.4-4                  leaflet_2.1.0               #>  [13] preprocessCore_1.56.0       mixOmics_6.18.1             #>  [15] RANN_2.6.1                  proxy_0.4-26                #>  [17] future_1.23.0               tzdb_0.2.0                  #>  [19] xml2_1.3.3                  lubridate_1.8.0             #>  [21] ggsci_2.9                   SummarizedExperiment_1.24.0 #>  [23] assertthat_0.2.1            viridis_0.6.2               #>  [25] xfun_0.29                   hms_1.1.1                   #>  [27] jquerylib_0.1.4             evaluate_0.15               #>  [29] DEoptimR_1.0-10             fansi_1.0.2                 #>  [31] dbplyr_2.1.1                readxl_1.3.1                #>  [33] igraph_1.2.11               DBI_1.1.2                   #>  [35] htmlwidgets_1.5.4           MsFeatures_1.3.0            #>  [37] rARPACK_0.11-0              ellipsis_0.3.2              #>  [39] RSpectra_0.16-0             crosstalk_1.2.0             #>  [41] backports_1.4.1             ggcorrplot_0.1.3            #>  [43] MatrixGenerics_1.6.0        vctrs_0.3.8                 #>  [45] remotes_2.4.2               cachem_1.0.6                #>  [47] withr_2.4.3                 ggforce_0.3.3               #>  [49] itertools_0.1-3             robustbase_0.93-9           #>  [51] checkmate_2.0.0             cluster_2.1.2               #>  [53] lazyeval_0.2.2              crayon_1.5.0                #>  [55] ellipse_0.4.2               labeling_0.4.2              #>  [57] pkgconfig_2.0.3             tweenr_1.0.2                #>  [59] GenomeInfoDb_1.30.0         nnet_7.3-17                 #>  [61] rlang_1.0.1                 globals_0.14.0              #>  [63] lifecycle_1.0.1             affyio_1.64.0               #>  [65] extrafontdb_1.0             fastDummies_1.6.3           #>  [67] MassSpecWavelet_1.60.0      modelr_0.1.8                #>  [69] cellranger_1.1.0            randomForest_4.7-1          #>  [71] rprojroot_2.0.2             polyclip_1.10-0             #>  [73] matrixStats_0.61.0          Matrix_1.4-0                #>  [75] reprex_2.0.1                base64enc_0.1-3             #>  [77] GlobalOptions_0.1.2         png_0.1-7                   #>  [79] viridisLite_0.4.0           rjson_0.2.21                #>  [81] clisymbols_1.2.0            bitops_1.0-7                #>  [83] pander_0.6.4                Biostrings_2.62.0           #>  [85] shape_1.4.6                 parallelly_1.30.0           #>  [87] robust_0.7-0                jpeg_0.1-9                  #>  [89] gridGraphics_0.5-1          scales_1.1.1                #>  [91] memoise_2.0.1               plyr_1.8.6                  #>  [93] zlibbioc_1.40.0             compiler_4.1.2              #>  [95] RColorBrewer_1.1-2          pcaMethods_1.86.0           #>  [97] clue_0.3-60                 rrcov_1.6-2                 #>  [99] cli_3.2.0                   affy_1.72.0                 #> [101] XVector_0.34.0              listenv_0.8.0               #> [103] patchwork_1.1.1             pbapply_1.5-0               #> [105] htmlTable_2.4.0             Formula_1.2-4               #> [107] MASS_7.3-55                 tidyselect_1.1.1            #> [109] vsn_3.62.0                  stringi_1.7.6               #> [111] textshaping_0.3.6           highr_0.9                   #> [113] yaml_2.3.4                  latticeExtra_0.6-29         #> [115] MALDIquant_1.21             ggrepel_0.9.1               #> [117] grid_4.1.2                  sass_0.4.0                  #> [119] tools_4.1.2                 parallel_4.1.2              #> [121] circlize_0.4.14             rstudioapi_0.13             #> [123] MsCoreUtils_1.6.0           foreach_1.5.2               #> [125] foreign_0.8-82              gridExtra_2.3               #> [127] farver_2.1.0                mzID_1.32.0                 #> [129] ggraph_2.0.5                rvcheck_0.2.1               #> [131] digest_0.6.29               BiocManager_1.30.16         #> [133] GenomicRanges_1.46.1        broom_0.7.12                #> [135] ncdf4_1.19                  httr_1.4.2                  #> [137] ComplexHeatmap_2.10.0       colorspace_2.0-2            #> [139] rvest_1.0.2                 XML_3.99-0.8                #> [141] fs_1.5.2                    IRanges_2.28.0              #> [143] splines_4.1.2               yulab.utils_0.0.4           #> [145] graphlayouts_0.8.0          pkgdown_2.0.2               #> [147] ggplotify_0.1.0             plotly_4.10.0               #> [149] systemfonts_1.0.3           fit.models_0.64             #> [151] jsonlite_1.7.3              tidygraph_1.2.0             #> [153] corpcor_1.6.10              R6_2.5.1                    #> [155] Hmisc_4.6-0                 pillar_1.7.0                #> [157] htmltools_0.5.2             glue_1.6.1                  #> [159] fastmap_1.1.0               class_7.3-20                #> [161] codetools_0.2-18            pcaPP_1.9-74                #> [163] mvtnorm_1.1-3               furrr_0.2.3                 #> [165] utf8_1.2.2                  lattice_0.20-45             #> [167] bslib_0.3.1                 zip_2.2.0                   #> [169] openxlsx_4.2.5              Rttf2pt1_1.3.9              #> [171] survival_3.2-13             limma_3.50.0                #> [173] rmarkdown_2.11              desc_1.4.0                  #> [175] munsell_0.5.0               e1071_1.7-9                 #> [177] GetoptLong_1.0.5            GenomeInfoDbData_1.2.7      #> [179] iterators_1.0.14            impute_1.68.0               #> [181] haven_2.4.3                 reshape2_1.4.4              #> [183] gtable_0.3.0                extrafont_0.17"},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Raw data processing","text":"Download demo data refer article. positive negative mode. mode, control, case QC groups. Control group 110 samples, case group 110 samples well.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"positive-mode","dir":"Articles","previous_headings":"","what":"Positive mode","title":"Raw data processing","text":"massprocesser package used raw data processing. Please refer website.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"code","dir":"Articles","previous_headings":"Positive mode","what":"Code","title":"Raw data processing","text":"code used raw data processing.","code":"library(tidymass) #> Registered S3 method overwritten by 'Hmisc': #>   method       from       #>   vcov.default fit.models #> ── Attaching packages ─────────────────────────────────────── tidymass 0.99.4 ── #> ✓ masscleaner 0.99.3     ✓ metid       1.2.2  #> ✓ massqc      0.99.3     ✓ dplyr       1.0.8  #> ✓ massstat    0.99.6     ✓ ggplot2     3.3.5  #> ✓ metpath     0.99.2 #> ── Conflicts ─────────────────────────────────────────── tidymass_conflicts() ── #> x massdataset::apply()            masks base::apply() #> x dplyr::collect()                masks xcms::collect() #> x massdataset::colMeans()         masks BiocGenerics::colMeans(), base::colMeans() #> x massdataset::colSums()          masks BiocGenerics::colSums(), base::colSums() #> x dplyr::combine()                masks MSnbase::combine(), Biobase::combine(), BiocGenerics::combine() #> x dplyr::filter()                 masks metpath::filter(), massdataset::filter(), stats::filter() #> x dplyr::first()                  masks S4Vectors::first() #> x tinytools::get_compound_class() masks masstools::get_compound_class() #> x tinytools::get_os()             masks masstools::get_os() #> x tinytools::getDP()              masks masstools::getDP() #> x dplyr::groups()                 masks xcms::groups() #> x massdataset::intersect()        masks S4Vectors::intersect(), BiocGenerics::intersect(), base::intersect() #> x tinytools::keep_one()           masks masstools::keep_one() #> x dplyr::lag()                    masks stats::lag() #> x tinytools::ms2_plot()           masks masstools::ms2_plot() #> x tinytools::ms2Match()           masks masstools::ms2Match() #> x tinytools::mz_rt_match()        masks masstools::mz_rt_match(), massdataset::mz_rt_match() #> x tinytools::name_duplicated()    masks masstools::name_duplicated() #> x metid::read_mgf()               masks tinytools::read_mgf(), masstools::read_mgf() #> x tinytools::removeNoise()        masks masstools::removeNoise() #> x dplyr::rename()                 masks massdataset::rename(), S4Vectors::rename() #> x massdataset::rowMeans()         masks BiocGenerics::rowMeans(), base::rowMeans() #> x massdataset::rowSums()          masks BiocGenerics::rowSums(), base::rowSums() #> x tinytools::setwd_project()      masks masstools::setwd_project() #> x tinytools::split_formula()      masks masstools::split_formula() #> x tinytools::trans_ID()           masks masstools::trans_ID() #> x tinytools::trans_id_database()  masks masstools::trans_id_database() process_data(   path = \"mzxml_ms1_data/POS\",   polarity = \"positive\",   ppm = 10,   peakwidth = c(10, 60),   threads = 4,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" ) #> Reading raw data, it will take a while... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Detecting peaks... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Correcting rentention time... #>   #> Use old saved data in Result. #>  #> ✔ OK #>  #> Grouping peaks across samples... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Outputting peak table... #>  #> ✔ OK #>  #> OK #>  #> ✔ All done! #>"},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"results","dir":"Articles","previous_headings":"Positive mode","what":"Results","title":"Raw data processing","text":"results placed folder mzxml_ms1_data/POS/Result. information can found .  can just load object, mass_dataset class object. can see 10,149 metabolic features positive mode.  can use plot_adjusted_rt() function get interactive plot.","code":"load(\"mzxml_ms1_data/POS/Result/object\") object #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 10149 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 10149 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:37:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:36:42 load(\"mzxml_ms1_data/POS/Result/intermediate_data/xdata2\") ##set the group_for_figure if you want to show specific groups. And set it as \"all\" if you want to show all samples. plot =  massprocesser::plot_adjusted_rt(object = xdata2,                   group_for_figure = \"QC\",                   interactive = TRUE) plot"},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"negative-mode","dir":"Articles","previous_headings":"","what":"Negative mode","title":"Raw data processing","text":"processing negative mode positive mode data.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"code-1","dir":"Articles","previous_headings":"Negative mode","what":"Code","title":"Raw data processing","text":"positive mode, change polarity negative.","code":"massprocesser::process_data(   path = \"mzxml_ms1_data/NEG\",   polarity = \"negative\",   ppm = 10,   peakwidth = c(10, 60),   threads = 4,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" ) #> Reading raw data, it will take a while... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Detecting peaks... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Correcting rentention time... #>   #> Use old saved data in Result. #>  #> ✔ OK #>  #> Grouping peaks across samples... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Outputting peak table... #>  #> ✔ OK #>  #> OK #>  #> ✔ All done! #>"},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"results-1","dir":"Articles","previous_headings":"Negative mode","what":"Results","title":"Raw data processing","text":"positive mode. can see 8,804 metabolic features negative mode.","code":"load(\"mzxml_ms1_data/NEG/Result/object\") object #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 8804 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 8804 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48"},{"path":"https://tidymass.github.io/tidymass/articles/raw_data_processing.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Raw data processing","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] magrittr_2.0.1       tinytools_0.9.1      massdataset_0.99.1   #>  [4] xcms_3.17.1          MSnbase_2.21.3       ProtGenerics_1.27.2  #>  [7] S4Vectors_0.33.10    mzR_2.29.1           Rcpp_1.0.7           #> [10] Biobase_2.55.0       BiocGenerics_0.41.2  BiocParallel_1.29.10 #> [13] massprocesser_0.9.2  #>  #> loaded via a namespace (and not attached): #>   [1] circlize_0.4.14             readxl_1.3.1                #>   [3] backports_1.4.1             systemfonts_1.0.3           #>   [5] plyr_1.8.6                  lazyeval_0.2.2              #>   [7] crosstalk_1.2.0             leaflet_2.0.4.1             #>   [9] GenomeInfoDb_1.31.1         ggplot2_3.3.5               #>  [11] digest_0.6.29               yulab.utils_0.0.4           #>  [13] foreach_1.5.1               htmltools_0.5.2             #>  [15] fansi_1.0.0                 memoise_2.0.1               #>  [17] cluster_2.1.2               doParallel_1.0.16           #>  [19] openxlsx_4.2.5              tzdb_0.2.0                  #>  [21] limma_3.51.2                ComplexHeatmap_2.11.0       #>  [23] readr_2.1.1                 modelr_0.1.8                #>  [25] matrixStats_0.61.0          vroom_1.5.7                 #>  [27] MsFeatures_1.3.0            pkgdown_2.0.1               #>  [29] colorspace_2.0-2            rvest_1.0.2                 #>  [31] textshaping_0.3.6           haven_2.4.3                 #>  [33] xfun_0.29                   dplyr_1.0.7                 #>  [35] crayon_1.4.2                RCurl_1.98-1.5              #>  [37] jsonlite_1.7.2              impute_1.69.0               #>  [39] iterators_1.0.13            glue_1.6.0                  #>  [41] gtable_0.3.0                zlibbioc_1.41.0             #>  [43] XVector_0.35.0              GetoptLong_1.0.5            #>  [45] DelayedArray_0.21.2         shape_1.4.6                 #>  [47] DEoptimR_1.0-10             scales_1.1.1                #>  [49] vsn_3.63.0                  DBI_1.1.2                   #>  [51] viridisLite_0.4.0           clue_0.3-60                 #>  [53] gridGraphics_0.5-1          bit_4.0.4                   #>  [55] preprocessCore_1.57.0       clisymbols_1.2.0            #>  [57] MsCoreUtils_1.7.1           htmlwidgets_1.5.4           #>  [59] httr_1.4.2                  RColorBrewer_1.1-2          #>  [61] ellipsis_0.3.2              farver_2.1.0                #>  [63] pkgconfig_2.0.3             XML_3.99-0.8                #>  [65] sass_0.4.0                  dbplyr_2.1.1                #>  [67] utf8_1.2.2                  labeling_0.4.2              #>  [69] ggplotify_0.1.0             tidyselect_1.1.1            #>  [71] rlang_0.4.12                munsell_0.5.0               #>  [73] cellranger_1.1.0            tools_4.2.0                 #>  [75] cachem_1.0.6                cli_3.1.0                   #>  [77] generics_0.1.1              broom_0.7.11                #>  [79] evaluate_0.14               stringr_1.4.0               #>  [81] fastmap_1.1.0               mzID_1.33.0                 #>  [83] yaml_2.2.1                  ragg_1.2.1                  #>  [85] bit64_4.0.5                 knitr_1.37                  #>  [87] fs_1.5.2                    zip_2.2.0                   #>  [89] robustbase_0.93-8           purrr_0.3.4                 #>  [91] RANN_2.6.1                  ncdf4_1.17                  #>  [93] pbapply_1.5-0               xml2_1.3.3                  #>  [95] compiler_4.2.0              rstudioapi_0.13             #>  [97] plotly_4.10.0               png_0.1-7                   #>  [99] affyio_1.65.0               reprex_2.0.1                #> [101] MassSpecWavelet_1.61.0      tibble_3.1.6                #> [103] bslib_0.3.1                 stringi_1.7.6               #> [105] desc_1.4.0                  forcats_0.5.1               #> [107] lattice_0.20-45             Matrix_1.4-0                #> [109] ggsci_2.9                   vctrs_0.3.8                 #> [111] pillar_1.6.4                lifecycle_1.0.1             #> [113] BiocManager_1.30.16         GlobalOptions_0.1.2         #> [115] jquerylib_0.1.4             MALDIquant_1.21             #> [117] data.table_1.14.2           bitops_1.0-7                #> [119] GenomicRanges_1.47.6        R6_2.5.1                    #> [121] pcaMethods_1.87.0           affy_1.73.0                 #> [123] IRanges_2.29.1              codetools_0.2-18            #> [125] MASS_7.3-55                 assertthat_0.2.1            #> [127] SummarizedExperiment_1.25.3 rjson_0.2.21                #> [129] rprojroot_2.0.2             withr_2.4.3                 #> [131] GenomeInfoDbData_1.2.7      parallel_4.2.0              #> [133] hms_1.1.1                   grid_4.2.0                  #> [135] tidyverse_1.3.1             tidyr_1.1.4                 #> [137] rmarkdown_2.11              MatrixGenerics_1.7.0        #> [139] lubridate_1.8.0"},{"path":"https://tidymass.github.io/tidymass/articles/repeat_case_study.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Repeat case study by docker","text":"can use docker image case study repeat analysis results tidymass manuscript.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/repeat_case_study.html","id":"download-and-install-docker","dir":"Articles","previous_headings":"","what":"Download and install docker","title":"Repeat case study by docker","text":"Please refer official website download install docker. run docker.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/repeat_case_study.html","id":"pull-the-tidymass-case-study-image","dir":"Articles","previous_headings":"","what":"Pull the tidymass-case-study image","title":"Repeat case study by docker","text":"Open terminal type code :","code":"docker pull jaspershen/tidymass-case-study:latest"},{"path":"https://tidymass.github.io/tidymass/articles/repeat_case_study.html","id":"run-tidymass-case-study-docker-image","dir":"Articles","previous_headings":"","what":"Run tidymass-case-study docker image","title":"Repeat case study by docker","text":"terminal, run code : open browser visit http://localhost:8787 power RStudio server. user name rstudio password tidymass.","code":"docker run -e PASSWORD=tidymass -p 8787:8787 jaspershen/tidymass-case-study:latest"},{"path":"https://tidymass.github.io/tidymass/articles/repeat_case_study.html","id":"run-case-study-code","dir":"Articles","previous_headings":"","what":"Run case study code","title":"Repeat case study by docker","text":"Open tidymass_case_study.Rmd, click Knit.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/repeat_case_study.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Repeat case study by docker","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>  [1] rstudioapi_0.13   knitr_1.37        magrittr_2.0.2    R6_2.5.1          #>  [5] ragg_1.2.1        rlang_1.0.1       fastmap_1.1.0     stringr_1.4.0     #>  [9] tools_4.1.2       xfun_0.29         cli_3.2.0         jquerylib_0.1.4   #> [13] htmltools_0.5.2   systemfonts_1.0.3 yaml_2.3.4        digest_0.6.29     #> [17] rprojroot_2.0.2   pkgdown_2.0.2     crayon_1.5.0      textshaping_0.3.6 #> [21] purrr_0.3.4       sass_0.4.0        fs_1.5.2          memoise_2.0.1     #> [25] cachem_1.0.6      evaluate_0.15     rmarkdown_2.11    stringi_1.7.6     #> [29] compiler_4.1.2    bslib_0.3.1       desc_1.4.0        jsonlite_1.7.3"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Statistical analysis","text":"Now positive mode negative mode annotated respectively. need merge positive negative mode data.","code":"library(tidymass) library(tidyverse)"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"load-data","dir":"Articles","previous_headings":"Data preparation","what":"Load data","title":"Statistical analysis","text":"","code":"load(\"metabolite_annotation/object_pos2\") load(\"metabolite_annotation/object_neg2\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"positive-mode","dir":"Articles","previous_headings":"Data preparation > Remove the features without annotations","what":"Positive mode","title":"Statistical analysis","text":"","code":"object_pos2 <-    object_pos2 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2) object_pos2 #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 206 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 206 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 1042 variables x 951 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44 #> 2 massdataset      filter() 2022-03-07 17:27:45 #> 3 massdataset      filter() 2022-03-07 17:27:45 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:02 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:38:07 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:38:08 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:01 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:53:36 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-02-22 21:16:23 #> 2   metid annotate_metabolites_mass_dataset() 2022-02-22 21:30:10 #> 3   metid annotate_metabolites_mass_dataset() 2022-02-22 21:47:59"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"negative-mode","dir":"Articles","previous_headings":"Data preparation > Remove the features without annotations","what":"Negative mode","title":"Statistical analysis","text":"","code":"object_neg2 <-    object_neg2 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2) object_neg2 #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 165 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 165 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 1092 variables x 988 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47 #> 2 massdataset      filter() 2022-03-07 17:27:46 #> 3 massdataset      filter() 2022-03-07 17:27:46 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:06 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:50:47 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:50:47 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:37 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:54:06 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-02-22 21:50:29 #> 2   metid annotate_metabolites_mass_dataset() 2022-02-22 22:08:10 #> 3   metid annotate_metabolites_mass_dataset() 2022-02-22 22:26:33"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"merge-data","dir":"Articles","previous_headings":"Data preparation","what":"Merge data","title":"Statistical analysis","text":"need merge positive negative mode data one mass_dataset class.","code":"head(colnames(object_pos2)) #> [1] \"sample_06\"  \"sample_103\" \"sample_11\"  \"sample_112\" \"sample_117\" #> [6] \"sample_12\" head(colnames(object_neg2)) #> [1] \"sample_06\"  \"sample_103\" \"sample_11\"  \"sample_112\" \"sample_117\" #> [6] \"sample_12\" object <-  merge_mass_dataset(x = object_pos2,                     y = object_neg2,                     sample_direction = \"inner\",                    variable_direction = \"full\",                     sample_by = \"sample_id\",                     variable_by = c(\"variable_id\", \"mz\", \"rt\")) object #> --------------------  #> massdataset version: 0.99.14  #> --------------------  #> 1.expression_data:[ 371 x 259 data.frame] #> 2.sample_info:[ 259 x 11 data.frame] #> 3.variable_info:[ 371 x 9 data.frame] #> 4.sample_info_note:[ 11 x 2 data.frame] #> 5.variable_info_note:[ 9 x 2 data.frame] #> 6.ms2_data:[ 2084 variables x 1902 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44 #> 2 massdataset      filter() 2022-03-07 17:27:45 #> 3 massdataset      filter() 2022-03-07 17:27:45 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:02 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:38:07 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:38:08 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:01 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:53:36 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-02-22 21:16:23 #> 2   metid annotate_metabolites_mass_dataset() 2022-02-22 21:30:10 #> 3   metid annotate_metabolites_mass_dataset() 2022-02-22 21:47:59 #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47 #> 2 massdataset      filter() 2022-03-07 17:27:46 #> 3 massdataset      filter() 2022-03-07 17:27:46 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:06 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:50:47 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:50:47 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:37 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:54:06 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-02-22 21:50:29 #> 2   metid annotate_metabolites_mass_dataset() 2022-02-22 22:08:10 #> 3   metid annotate_metabolites_mass_dataset() 2022-02-22 22:26:33 #> merge_mass_dataset ----------  #>       Package      Function.used                Time #> 1 massdataset merge_mass_dataset 2022-03-07 17:27:46"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"trace-processing-information-of-object","dir":"Articles","previous_headings":"","what":"Trace processing information of object","title":"Statistical analysis","text":"can use report_parameters() function trace processing information object. analysis results placed folder named statistical_analysis. html format file named parameter_report.html generated.","code":"dir.create(path = \"statistical_analysis\", showWarnings = FALSE) report_parameters(object = object, path = \"statistical_analysis/\") #> processing file: tidymass_parameters.template.Rmd #> output file: tidymass_parameters.template.knit.md #> /Applications/RStudio.app/Contents/MacOS/pandoc/pandoc +RTS -K512m -RTS tidymass_parameters.template.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output tidymass_parameters.template.html --lua-filter /Library/Frameworks/R.framework/Versions/library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /Library/Frameworks/R.framework/Versions/library/rmarkdown/rmarkdown/lua/latex-div.lua --self-contained --variable bs3=TRUE --standalone --section-divs --template /Library/Frameworks/R.framework/Versions/library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=bootstrap --include-in-header /var/folders/m8/z8rq9r453dn9rk4zx4cw5_5h0000gn/T//RtmpcRItde/rmarkdown-stre9ae21d3ad9b.html --mathjax --variable 'mathjax-url:https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' #>  #> Output created: tidymass_parameters.template.html #> Done. #>"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"remove-redundant-metabolites","dir":"Articles","previous_headings":"","what":"Remove redundant metabolites","title":"Statistical analysis","text":"Remove redundant annotated metabolites bases Level score.","code":"object <-   object %>%    activate_mass_dataset(what = \"annotation_table\") %>%    group_by(Compound.name) %>%    filter(Level == min(Level)) %>%    filter(SS == max(SS)) %>%    slice_head(n = 1) object <-   object %>%    activate_mass_dataset(what = \"annotation_table\") %>%    group_by(variable_id) %>%    filter(Level == min(Level)) %>%    filter(SS == max(SS)) %>%    slice_head(n = 1)"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"differential-expression-metabolites","dir":"Articles","previous_headings":"","what":"Differential expression metabolites","title":"Statistical analysis","text":"Calculate fold changes. Calculate p values. Volcano plot.","code":"control_sample_id =   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Control\") %>%   pull(sample_id)  case_sample_id =   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Case\") %>%   pull(sample_id) object <-   mutate_fc(object = object,              control_sample_id = control_sample_id,              case_sample_id = case_sample_id,              mean_median = \"mean\") #> 110 control samples. #> 110 case samples. #> object <-   mutate_p_value(     object = object,     control_sample_id = control_sample_id,     case_sample_id = case_sample_id,     method = \"t.test\",     p_adjust_methods = \"BH\"   ) #> 110 control samples. #> 110 case samples. #> volcano_plot(object = object,              add_text = TRUE,              text_from = \"Compound.name\",               point_size_scale = \"p_value\") +   scale_size_continuous(range = c(0.5, 5))"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"output-result","dir":"Articles","previous_headings":"","what":"Output result","title":"Statistical analysis","text":"Output differential expression metabolites. Save result subsequent analysis.","code":"differential_metabolites <-    extract_variable_info(object = object) %>%    filter(fc > 2 | fc < 0.5) %>%    filter(p_value_adjust < 0.05)  readr::write_csv(differential_metabolites,                   file = \"statistical_analysis/differential_metabolites.csv\") object_final <- object save(object_final, file = \"statistical_analysis/object_final\")"},{"path":"https://tidymass.github.io/tidymass/articles/statistical_analysis.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Statistical analysis","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] knitr_1.37           forcats_0.5.1.9000   stringr_1.4.0        #>  [4] purrr_0.3.4          readr_2.1.2          tidyr_1.2.0          #>  [7] tibble_3.1.6         tidyverse_1.3.1      tinytools_0.9.1      #> [10] dplyr_1.0.8          metid_1.2.4          metpath_0.99.2       #> [13] massstat_0.99.12     ggfortify_0.4.14     massqc_0.99.7        #> [16] masscleaner_0.99.7   xcms_3.16.1          MSnbase_2.20.4       #> [19] ProtGenerics_1.26.0  S4Vectors_0.32.3     mzR_2.28.0           #> [22] Rcpp_1.0.8           Biobase_2.54.0       BiocGenerics_0.40.0  #> [25] BiocParallel_1.28.3  massprocesser_0.99.3 ggplot2_3.3.5        #> [28] magrittr_2.0.2       masstools_0.99.4     massdataset_0.99.14  #> [31] tidymass_0.99.5      #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  bit64_4.0.5                 #>   [3] missForest_1.4              DelayedArray_0.20.0         #>   [5] data.table_1.14.2           rpart_4.1.16                #>   [7] KEGGREST_1.34.0             RCurl_1.98-1.5              #>   [9] doParallel_1.0.17           generics_0.1.2              #>  [11] snow_0.4-4                  leaflet_2.1.0               #>  [13] preprocessCore_1.56.0       mixOmics_6.18.1             #>  [15] RANN_2.6.1                  proxy_0.4-26                #>  [17] future_1.23.0               bit_4.0.4                   #>  [19] tzdb_0.2.0                  xml2_1.3.3                  #>  [21] lubridate_1.8.0             ggsci_2.9                   #>  [23] SummarizedExperiment_1.24.0 assertthat_0.2.1            #>  [25] viridis_0.6.2               xfun_0.29                   #>  [27] hms_1.1.1                   jquerylib_0.1.4             #>  [29] evaluate_0.15               DEoptimR_1.0-10             #>  [31] fansi_1.0.2                 dbplyr_2.1.1                #>  [33] readxl_1.3.1                igraph_1.2.11               #>  [35] DBI_1.1.2                   htmlwidgets_1.5.4           #>  [37] MsFeatures_1.3.0            rARPACK_0.11-0              #>  [39] ellipsis_0.3.2              RSpectra_0.16-0             #>  [41] crosstalk_1.2.0             backports_1.4.1             #>  [43] ggcorrplot_0.1.3            MatrixGenerics_1.6.0        #>  [45] vctrs_0.3.8                 remotes_2.4.2               #>  [47] cachem_1.0.6                withr_2.4.3                 #>  [49] ggforce_0.3.3               itertools_0.1-3             #>  [51] robustbase_0.93-9           vroom_1.5.7                 #>  [53] checkmate_2.0.0             cluster_2.1.2               #>  [55] lazyeval_0.2.2              crayon_1.5.0                #>  [57] ellipse_0.4.2               labeling_0.4.2              #>  [59] pkgconfig_2.0.3             tweenr_1.0.2                #>  [61] GenomeInfoDb_1.30.0         nnet_7.3-17                 #>  [63] rlang_1.0.1                 globals_0.14.0              #>  [65] lifecycle_1.0.1             affyio_1.64.0               #>  [67] extrafontdb_1.0             fastDummies_1.6.3           #>  [69] MassSpecWavelet_1.60.0      modelr_0.1.8                #>  [71] cellranger_1.1.0            randomForest_4.7-1          #>  [73] rprojroot_2.0.2             polyclip_1.10-0             #>  [75] matrixStats_0.61.0          Matrix_1.4-0                #>  [77] reprex_2.0.1                base64enc_0.1-3             #>  [79] GlobalOptions_0.1.2         png_0.1-7                   #>  [81] viridisLite_0.4.0           rjson_0.2.21                #>  [83] clisymbols_1.2.0            bitops_1.0-7                #>  [85] pander_0.6.4                Biostrings_2.62.0           #>  [87] shape_1.4.6                 parallelly_1.30.0           #>  [89] robust_0.7-0                jpeg_0.1-9                  #>  [91] gridGraphics_0.5-1          scales_1.1.1                #>  [93] memoise_2.0.1               plyr_1.8.6                  #>  [95] zlibbioc_1.40.0             compiler_4.1.2              #>  [97] RColorBrewer_1.1-2          pcaMethods_1.86.0           #>  [99] clue_0.3-60                 rrcov_1.6-2                 #> [101] cli_3.2.0                   affy_1.72.0                 #> [103] XVector_0.34.0              listenv_0.8.0               #> [105] patchwork_1.1.1             pbapply_1.5-0               #> [107] htmlTable_2.4.0             Formula_1.2-4               #> [109] MASS_7.3-55                 tidyselect_1.1.1            #> [111] vsn_3.62.0                  stringi_1.7.6               #> [113] textshaping_0.3.6           highr_0.9                   #> [115] yaml_2.3.4                  latticeExtra_0.6-29         #> [117] MALDIquant_1.21             ggrepel_0.9.1               #> [119] grid_4.1.2                  sass_0.4.0                  #> [121] tools_4.1.2                 parallel_4.1.2              #> [123] circlize_0.4.14             rstudioapi_0.13             #> [125] MsCoreUtils_1.6.0           foreach_1.5.2               #> [127] foreign_0.8-82              gridExtra_2.3               #> [129] farver_2.1.0                mzID_1.32.0                 #> [131] ggraph_2.0.5                rvcheck_0.2.1               #> [133] digest_0.6.29               BiocManager_1.30.16         #> [135] GenomicRanges_1.46.1        broom_0.7.12                #> [137] ncdf4_1.19                  httr_1.4.2                  #> [139] ComplexHeatmap_2.10.0       colorspace_2.0-2            #> [141] rvest_1.0.2                 XML_3.99-0.8                #> [143] fs_1.5.2                    IRanges_2.28.0              #> [145] splines_4.1.2               yulab.utils_0.0.4           #> [147] graphlayouts_0.8.0          pkgdown_2.0.2               #> [149] ggplotify_0.1.0             plotly_4.10.0               #> [151] systemfonts_1.0.3           fit.models_0.64             #> [153] jsonlite_1.7.3              tidygraph_1.2.0             #> [155] corpcor_1.6.10              R6_2.5.1                    #> [157] Hmisc_4.6-0                 pillar_1.7.0                #> [159] htmltools_0.5.2             glue_1.6.1                  #> [161] fastmap_1.1.0               class_7.3-20                #> [163] codetools_0.2-18            pcaPP_1.9-74                #> [165] mvtnorm_1.1-3               furrr_0.2.3                 #> [167] utf8_1.2.2                  lattice_0.20-45             #> [169] bslib_0.3.1                 zip_2.2.0                   #> [171] openxlsx_4.2.5              Rttf2pt1_1.3.9              #> [173] survival_3.2-13             limma_3.50.0                #> [175] rmarkdown_2.11              desc_1.4.0                  #> [177] munsell_0.5.0               e1071_1.7-9                 #> [179] GetoptLong_1.0.5            GenomeInfoDbData_1.2.7      #> [181] iterators_1.0.14            impute_1.68.0               #> [183] haven_2.4.3                 reshape2_1.4.4              #> [185] gtable_0.3.0                extrafont_0.17"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Case study for tidyMass","text":"Data introduction. RPLC (positive negative mode), HILIC (positive negative mode). information can found . Sex Differences Colon Cancer Metabolism Reveal Novel Subphenotype","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"download-data","dir":"Articles","previous_headings":"","what":"Download data","title":"Case study for tidyMass","text":"Mass spectrometry raw data (mzXML) case study paper accessible MetaboLights MTBLS1122 (HILIC positive), MTBLS1124 (HILIC negative), MTBLS1122 (RPLC positive) MTBLS1130 (RPLC negative). MS2 data (mgf) processed data (“mass_dataset” class) massProcesser package available tidyMass project website (https://tidymass.github.io/case_study_data/). Note: steps, just skip save time, try change eval=FALSE eval=TRUE can run code chunk. annotation step, can’t share -house database, just provide mass_dataset class annotation. apologize inconvenience.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Case study for tidyMass","text":"Please download data code, put one folder named case_study.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"install-packages","dir":"Articles","previous_headings":"","what":"Install packages","title":"Case study for tidyMass","text":"Please install pacakge need analysis.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"tidymass","dir":"Articles","previous_headings":"Install packages","what":"tidymass","title":"Case study for tidyMass","text":"Please refer document.","code":"if(!require(remotes)){   install.packages(\"remotes\") }  if(!require(remotes)){   remotes::install_gitlab(\"jaspershen/tidymass\") }"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"tidyverse","dir":"Articles","previous_headings":"Install packages","what":"tidyverse","title":"Case study for tidyMass","text":"","code":"if(!require(tidyverse)){   install.packages(\"tidyverse\") }"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"other-packages","dir":"Articles","previous_headings":"Install packages","what":"Other packages","title":"Case study for tidyMass","text":"","code":"if(!require(BiocManager)){   install.packages(\"BiocManager\") }  if(!require(ComplexHeatmap)){   BiocManager::install(\"ComplexHeatmap\") }  if(!require(ggraph)){   install.packages(\"ggraph\") }  if(!require(tidygraph)){   install.packages(\"tidygraph\") }  if(!require(extrafont)){   install.packages(\"extrafont\") }  if(!require(shadowtext)){   install.packages(\"shadowtext\") }"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"raw-data-processing","dir":"Articles","previous_headings":"","what":"Raw data processing","title":"Case study for tidyMass","text":"massprocesser package used raw data processing. Please refer website information.","code":"library(tidymass) library(tidyverse)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode","dir":"Articles","previous_headings":"Raw data processing","what":"RPLC positive mode","title":"Case study for tidyMass","text":"code used raw data processing. results placed folder named case_study/data/mzxml_ms1_data/POS/Result. information can found . can just load object, mass_dataset class object. can see 14,585 metabolic features positive mode. RT correction plot load data Set group_for_figure want show specific groups. set “” want show samples. can use plot_adjusted_rt() function get interactive plot.","code":"process_data(   path = \"mzxml_ms1_data/RPLC/POS/\",   polarity = \"positive\",   ppm = 20,   peakwidth = c(5, 30),   threads = 6,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" ) load(\"mzxml_ms1_data/RPLC/POS/Result/object\") object #> --------------------  #> massdataset version: 0.99.9  #> --------------------  #> 1.expression_data:[ 14585 x 298 data.frame] #> 2.sample_info:[ 298 x 4 data.frame] #> 3.variable_info:[ 14585 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-02 14:50:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-02 12:25:08 dim(object) #> [1] 14585   298 load(\"mzxml_ms1_data/RPLC/POS/Result/intermediate_data/xdata2\") load(\"mzxml_ms1_data/RPLC/POS/Result/intermediate_data/xdata2\") ####set the group_for_figure if you want to show specific groups.  ####And set it as \"all\" if you want to show all samples. plot <- massprocesser::plot_adjusted_rt(object = xdata2,                   group_for_figure = \"QC\",                   interactive = TRUE) plot rm(list = \"xdata2\") gc()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode","dir":"Articles","previous_headings":"Raw data processing","what":"RPLC negative mode","title":"Case study for tidyMass","text":"processing negative mode positive mode data. positive mode, change polarity negative. positive mode. can see 4,685 metabolic features negative mode.","code":"process_data(   path = \"mzxml_ms1_data/RPLC/NEG/\",   polarity = \"negative\",   ppm = 20,   peakwidth = c(5, 30),   threads = 6,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" ) load(\"mzxml_ms1_data/RPLC/NEG/Result/object\") object #> --------------------  #> massdataset version: 0.99.2  #> --------------------  #> 1.expression_data:[ 4685 x 299 data.frame] #> 2.sample_info:[ 299 x 4 data.frame] #> 3.variable_info:[ 4685 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-01 09:51:34 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-01 09:03:10 dim(object) #> [1] 4685  299"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode","dir":"Articles","previous_headings":"Raw data processing","what":"HILIC positive mode","title":"Case study for tidyMass","text":"","code":"process_data(   path = \"mzxml_ms1_data/HILIC/POS/\",   polarity = \"positive\",   ppm = 20,   peakwidth = c(5, 30),   threads = 6,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" )"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode","dir":"Articles","previous_headings":"Raw data processing","what":"HILIC negative mode","title":"Case study for tidyMass","text":"","code":"process_data(   path = \"mzxml_ms1_data/HILIC/NEG/\",   polarity = \"negative\",   ppm = 20,   peakwidth = c(5, 30),   threads = 6,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" )"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"explore-data","dir":"Articles","previous_headings":"","what":"Explore data","title":"Case study for tidyMass","text":"raw data processing, peak tables positive negative mode generated.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-1","dir":"Articles","previous_headings":"Explore data","what":"RPLC positive mode","title":"Case study for tidyMass","text":"Read sample information. Add sample_info_pos object_rplc_pos Next, can get peak distributation plot positive mode.  can explore missing values positive mode data. Missing value number sample. Missing value number variable. can use figure show missing value information.  Show mvs samples.  Show mvs variables","code":"load(\"mzxml_ms1_data/RPLC/POS/Result/object\") object_rplc_pos <- object object_rplc_pos #> --------------------  #> massdataset version: 0.99.9  #> --------------------  #> 1.expression_data:[ 14585 x 298 data.frame] #> 2.sample_info:[ 298 x 4 data.frame] #> 3.variable_info:[ 14585 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-02 14:50:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-02 12:25:08 rm(list = \"object\") gc() sample_info_pos <-    readr::read_csv(\"sample_info/RPLC/sample_info_pos_1.csv\") #> Rows: 299 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_pos) #> # A tibble: 6 × 6 #>   sample_id       injection.order class   batch subject_id      group        #>   <chr>                     <dbl> <chr>   <dbl> <chr>           <chr>        #> 1 men_normal_166               21 control     1 men_normal_166  male control #> 2 men_normal_2332             220 control     1 men_normal_2332 male control #> 3 men_normal_2357             222 control     1 men_normal_2357 male control #> 4 men_normal_2371             223 control     1 men_normal_2371 male control #> 5 men_normal_2407             224 control     1 men_normal_2407 male control #> 6 men_normal_2409             226 control     1 men_normal_2409 male control object_rplc_pos %>%    extract_sample_info() %>%    head() #>         sample_id group   class injection.order #> 1  men_normal_166  Case Subject               1 #> 2 men_normal_2332  Case Subject               2 #> 3 men_normal_2357  Case Subject               3 #> 4 men_normal_2371  Case Subject               4 #> 5 men_normal_2407  Case Subject               5 #> 6 men_normal_2409  Case Subject               6  object_rplc_pos <-    object_rplc_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(group, class, injection.order)) object_rplc_pos <-   object_rplc_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_pos,             by = \"sample_id\")  object_rplc_pos %>%    extract_sample_info() %>%    head() #>         sample_id injection.order   class batch      subject_id        group #> 1  men_normal_166              21 control     1  men_normal_166 male control #> 2 men_normal_2332             220 control     1 men_normal_2332 male control #> 3 men_normal_2357             222 control     1 men_normal_2357 male control #> 4 men_normal_2371             223 control     1 men_normal_2371 male control #> 5 men_normal_2407             224 control     1 men_normal_2407 male control #> 6 men_normal_2409             226 control     1 men_normal_2409 male control dim(object_rplc_pos) #> [1] 14585   298 object_rplc_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(class) #>     class   n #> 1    case 228 #> 2 control  42 #> 3      QC  28  object_rplc_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>            group  n #> 1 female control 14 #> 2     female LCC 50 #> 3     female RCC 60 #> 4   male control 28 #> 5       male LCC 63 #> 6       male RCC 55 #> 7             QC 28  object_rplc_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(batch) #>   batch   n #> 1     1 298 object_rplc_pos %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2)) get_mv_number(object = object_rplc_pos) #> [1] 1920550 get_mv_number(object = object_rplc_pos, by = \"variable\") %>%    head() #> M77T115_POS M82T641_POS  M82T18_POS  M84T22_POS  M84T19_POS  M85T92_POS  #>          47         149         103         116         159          70 library(grid) show_missing_values(object = object_rplc_pos,                      show_column_names = FALSE,                      percentage = TRUE) show_sample_missing_values(object = object_rplc_pos,                             percentage = TRUE) +   scale_size_continuous(range = c(0.1, 1)) +   theme(axis.text.x = element_blank(),         axis.ticks.x = element_blank()) show_variable_missing_values(object = object_rplc_pos,                               percentage = TRUE,                               show_x_text = FALSE,                               show_x_ticks = FALSE) +   scale_size_continuous(range = c(0.01, 1))"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-1","dir":"Articles","previous_headings":"Explore data","what":"RPLC Negative mode","title":"Case study for tidyMass","text":"Load object. Read sample information. Add sample_info_neg object_rplc_neg Next, can get peak distributation plot negative mode.  can explore missing values negative mode data. can use figure show missing value information.","code":"load(\"mzxml_ms1_data/RPLC/NEG/Result/object\") object_rplc_neg <- object object_rplc_neg #> --------------------  #> massdataset version: 0.99.2  #> --------------------  #> 1.expression_data:[ 4685 x 299 data.frame] #> 2.sample_info:[ 299 x 4 data.frame] #> 3.variable_info:[ 4685 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-01 09:51:34 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-01 09:03:10 rm(list = \"object\") gc() sample_info_neg <- readr::read_csv(\"sample_info/RPLC/sample_info_neg_1.csv\") #> Rows: 299 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_neg) #> # A tibble: 6 × 6 #>   sample_id       injection.order class   batch subject_id      group        #>   <chr>                     <dbl> <chr>   <dbl> <chr>           <chr>        #> 1 men_normal_166               21 control     1 men_normal_166  male control #> 2 men_normal_2332             220 control     1 men_normal_2332 male control #> 3 men_normal_2357             222 control     1 men_normal_2357 male control #> 4 men_normal_2371             223 control     1 men_normal_2371 male control #> 5 men_normal_2407             224 control     1 men_normal_2407 male control #> 6 men_normal_2409             226 control     1 men_normal_2409 male control object_rplc_neg <-    object_rplc_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_rplc_neg <-   object_rplc_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_neg,             by = \"sample_id\") object_rplc_neg %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2)) show_missing_values(object = object_rplc_neg, show_column_names = FALSE, percentage = TRUE)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-1","dir":"Articles","previous_headings":"Explore data","what":"HILIC positive mode","title":"Case study for tidyMass","text":"Read sample information. Add sample_info_pos object_hilic_pos Next, can get peak distributation plot positive mode.","code":"load(\"mzxml_ms1_data/HILIC/POS/Result/object\") object_hilic_pos <- object object_hilic_pos #> --------------------  #> massdataset version: 0.99.9  #> --------------------  #> 1.expression_data:[ 5322 x 299 data.frame] #> 2.sample_info:[ 299 x 4 data.frame] #> 3.variable_info:[ 5322 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-02 09:06:33 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-02 07:55:29 rm(list = \"object\") gc() sample_info_pos <- readr::read_csv(\"sample_info/HILIC/sample_info_pos_1.csv\") #> Rows: 299 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_pos) #> # A tibble: 6 × 6 #>   sample_id       injection.order class   batch subject_id      group        #>   <chr>                     <dbl> <chr>   <dbl> <chr>           <chr>        #> 1 men_normal_166               21 control     1 men_normal_166  male control #> 2 men_normal_2332             220 control     1 men_normal_2332 male control #> 3 men_normal_2357             222 control     1 men_normal_2357 male control #> 4 men_normal_2371             223 control     1 men_normal_2371 male control #> 5 men_normal_2407             224 control     1 men_normal_2407 male control #> 6 men_normal_2409             226 control     1 men_normal_2409 male control object_hilic_pos <-    object_hilic_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_hilic_pos <-   object_hilic_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_pos,             by = \"sample_id\") object_hilic_pos %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2))"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode-1","dir":"Articles","previous_headings":"Explore data","what":"HILIC Negative mode","title":"Case study for tidyMass","text":"Load object. Read sample information. Add sample_info_neg object_hilic_neg Next, can get peak distributation plot negative mode.","code":"load(\"mzxml_ms1_data/HILIC/NEG/Result/object\") object_hilic_neg <- object object_hilic_neg #> --------------------  #> massdataset version: 0.99.4  #> --------------------  #> 1.expression_data:[ 6557 x 299 data.frame] #> 2.sample_info:[ 299 x 4 data.frame] #> 3.variable_info:[ 6557 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-28 14:07:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-28 13:05:44 rm(list = \"object\") gc() sample_info_neg <- readr::read_csv(\"sample_info/HILIC/sample_info_neg_1.csv\") #> Rows: 299 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_neg) #> # A tibble: 6 × 6 #>   sample_id       injection.order class   batch subject_id      group        #>   <chr>                     <dbl> <chr>   <dbl> <chr>           <chr>        #> 1 men_normal_166               21 control     1 men_normal_166  male control #> 2 men_normal_2332             220 control     1 men_normal_2332 male control #> 3 men_normal_2357             222 control     1 men_normal_2357 male control #> 4 men_normal_2371             223 control     1 men_normal_2371 male control #> 5 men_normal_2407             224 control     1 men_normal_2407 male control #> 6 men_normal_2409             226 control     1 men_normal_2409 male control object_hilic_neg <-    object_hilic_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_hilic_neg <-   object_hilic_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_neg,             by = \"sample_id\") object_hilic_neg %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2))"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"data-quality-assessment-before-data-cleaning","dir":"Articles","previous_headings":"Data cleaning","what":"Data quality assessment before data cleaning","title":"Case study for tidyMass","text":"Change batch character. Save subsequent analysis. , can use massqc package assess data quality. can just use massqc_report() function get html format quality assessment report.","code":"object_rplc_pos <-    object_rplc_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch))  object_rplc_neg <-    object_rplc_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch))  object_hilic_pos <-    object_hilic_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch))  object_hilic_neg <-    object_hilic_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch)) save(object_rplc_pos, file = \"data_cleaning/RPLC/POS/object_rplc_pos\") save(object_rplc_neg, file = \"data_cleaning/RPLC/NEG/object_rplc_neg\")  save(object_hilic_pos, file = \"data_cleaning/HILIC/POS/object_hilic_pos\") save(object_hilic_neg, file = \"data_cleaning/HILIC/NEG/object_hilic_neg\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-2","dir":"Articles","previous_headings":"Data cleaning > Data quality assessment before data cleaning","what":"RPLC Positive mode","title":"Case study for tidyMass","text":"html format report pdf figures placed folder data/data_cleaning/POS/data_quality_before_data_cleaning/Report. html report :","code":"massqc::massqc_report(object = object_rplc_pos,                        path = \"data_cleaning/RPLC/POS/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-","dir":"Articles","previous_headings":"Data cleaning > Data quality assessment before data cleaning","what":"RPLC negative mode.","title":"Case study for tidyMass","text":"","code":"massqc::massqc_report(object = object_rplc_neg,                        path = \"data_cleaning/RPLC/NEG/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-2","dir":"Articles","previous_headings":"Data cleaning > Data quality assessment before data cleaning","what":"HILIC positive mode","title":"Case study for tidyMass","text":"","code":"massqc::massqc_report(object = object_hilic_pos,                        path = \"data_cleaning/HILIC/POS/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode-2","dir":"Articles","previous_headings":"Data cleaning > Data quality assessment before data cleaning","what":"HILIC negative mode","title":"Case study for tidyMass","text":"","code":"massqc::massqc_report(object = object_hilic_neg,                        path = \"data_cleaning/HILIC/NEG/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"remove-noisy-metabolic-features","dir":"Articles","previous_headings":"Data cleaning","what":"Remove noisy metabolic features","title":"Case study for tidyMass","text":"Remove variables MVs 20% QC samples lest 50% samples control group case group.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-3","dir":"Articles","previous_headings":"Data cleaning > Remove noisy metabolic features","what":"RPLC positive mode","title":"Case study for tidyMass","text":"MV percentage QC samples.  Remove variables. 6,132 variables left.","code":"object_rplc_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>            group  n #> 1 female control 14 #> 2     female LCC 50 #> 3     female RCC 60 #> 4   male control 28 #> 5       male LCC 63 #> 6       male RCC 55 #> 7             QC 28 show_variable_missing_values(object = object_rplc_pos %>%                                 activate_mass_dataset(what = \"sample_info\") %>%                                 filter(class == \"QC\"),                               percentage = TRUE) +   scale_size_continuous(range = c(0.01, 2)) qc_id <-   object_rplc_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id <-  object_rplc_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"control\")) %>%   pull(sample_id)  case_id <-   object_rplc_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"LCC|RCC\")) %>%   pull(sample_id)  object_rplc_pos <-   object_rplc_pos %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id)  head(extract_variable_info(object_rplc_pos)) #>   variable_id       mz        rt   na_freq na_freq.1 na_freq.2 #> 1 M77T115_POS 77.03846 114.81734 0.1428571 0.2380952 0.1447368 #> 2 M82T641_POS 81.52176 640.56274 0.6071429 0.4523810 0.4956140 #> 3  M82T18_POS 82.01393  18.05400 0.2857143 0.3571429 0.3508772 #> 4  M84T22_POS 84.04433  22.45600 0.3571429 0.3809524 0.3947368 #> 5  M84T19_POS 84.07998  18.99812 0.5000000 0.6666667 0.5131579 #> 6  M85T92_POS 84.96034  92.38353 0.1071429 0.3809524 0.2236842 object_rplc_pos <-   object_rplc_pos %>%   activate_mass_dataset(what = \"variable_info\") %>%   filter(na_freq < 0.2 &            (na_freq.1 < 0.5 |               na_freq.2 < 0.5)) object_rplc_pos #> --------------------  #> massdataset version: 0.99.9  #> --------------------  #> 1.expression_data:[ 6132 x 298 data.frame] #> 2.sample_info:[ 298 x 6 data.frame] #> 3.variable_info:[ 6132 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-02 14:50:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-02 12:25:08 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-08 22:17:22 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-08 22:17:27 #> 2 massdataset mutate_variable_na_freq() 2022-03-08 22:17:27 #> 3 massdataset mutate_variable_na_freq() 2022-03-08 22:17:27 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-08 22:17:28"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-2","dir":"Articles","previous_headings":"Data cleaning > Remove noisy metabolic features","what":"RPLC negative mode","title":"Case study for tidyMass","text":"Remove variables. 2,719 features left.","code":"qc_id <-   object_rplc_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id <-  object_rplc_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"control\")) %>%   pull(sample_id)  case_id <-   object_rplc_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"LCC|RCC\")) %>%   pull(sample_id)  object_rplc_neg =   object_rplc_neg %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id) object_rplc_neg <-   object_rplc_neg %>%   activate_mass_dataset(what = \"variable_info\") %>%   filter(     na_freq < 0.2 &       (         na_freq.1 < 0.5 |           na_freq.2 < 0.5       )   ) object_rplc_neg #> --------------------  #> massdataset version: 0.99.2  #> --------------------  #> 1.expression_data:[ 2719 x 299 data.frame] #> 2.sample_info:[ 299 x 6 data.frame] #> 3.variable_info:[ 2719 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-01 09:51:34 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-01 09:03:10 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-08 22:17:22 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-08 22:17:29 #> 2 massdataset mutate_variable_na_freq() 2022-03-08 22:17:29 #> 3 massdataset mutate_variable_na_freq() 2022-03-08 22:17:29 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-08 22:17:29"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-3","dir":"Articles","previous_headings":"Data cleaning > Remove noisy metabolic features","what":"HILIC positive mode","title":"Case study for tidyMass","text":"Remove variables.","code":"qc_id <-   object_hilic_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id <-  object_hilic_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"control\")) %>%   pull(sample_id)  case_id <-   object_hilic_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"LCC|RCC\")) %>%   pull(sample_id)  object_hilic_pos =   object_hilic_pos %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id) object_hilic_pos <-   object_hilic_pos %>%   activate_mass_dataset(what = \"variable_info\") %>%   filter(     na_freq < 0.2 &       (         na_freq.1 < 0.5 |           na_freq.2 < 0.5       )   ) object_rplc_neg #> --------------------  #> massdataset version: 0.99.2  #> --------------------  #> 1.expression_data:[ 2719 x 299 data.frame] #> 2.sample_info:[ 299 x 6 data.frame] #> 3.variable_info:[ 2719 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-01 09:51:34 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-01 09:03:10 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-08 22:17:22 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-08 22:17:29 #> 2 massdataset mutate_variable_na_freq() 2022-03-08 22:17:29 #> 3 massdataset mutate_variable_na_freq() 2022-03-08 22:17:29 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-08 22:17:29"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode-3","dir":"Articles","previous_headings":"Data cleaning > Remove noisy metabolic features","what":"HILIC negative mode","title":"Case study for tidyMass","text":"Remove variables.","code":"qc_id <-   object_hilic_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id <-  object_hilic_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"control\")) %>%   pull(sample_id)  case_id <-   object_hilic_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(stringr::str_detect(group, \"LCC|RCC\")) %>%   pull(sample_id)  object_hilic_neg =   object_hilic_neg %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id) object_hilic_neg <-   object_hilic_neg %>%   activate_mass_dataset(what = \"variable_info\") %>%   filter(     na_freq < 0.2 &       (         na_freq.1 < 0.5 |           na_freq.2 < 0.5       )   ) object_hilic_neg #> --------------------  #> massdataset version: 0.99.4  #> --------------------  #> 1.expression_data:[ 3808 x 299 data.frame] #> 2.sample_info:[ 299 x 6 data.frame] #> 3.variable_info:[ 3808 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-28 14:07:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-28 13:05:44 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-08 22:17:22 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-08 22:17:31 #> 2 massdataset mutate_variable_na_freq() 2022-03-08 22:17:31 #> 3 massdataset mutate_variable_na_freq() 2022-03-08 22:17:31 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-08 22:17:32"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"filter-outlier-samples","dir":"Articles","previous_headings":"Data cleaning","what":"Filter outlier samples","title":"Case study for tidyMass","text":"can use detect_outlier() find outlier samples. information detect outlier samples can found .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-4","dir":"Articles","previous_headings":"Data cleaning > Filter outlier samples","what":"RPLC positive mode","title":"Case study for tidyMass","text":"Detect outlier samples. , don’t remove outlier samples.","code":"##change class to subject object_rplc_pos <-   object_rplc_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::mutate(class = case_when(class == \"QC\" ~ class,                                   TRUE ~ \"Subject\")) outlier_samples <-   object_rplc_pos %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier(na_percentage_cutoff = 0.5)  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 11 outlier samples. #> menLCCstage1_2516,menLCCstage2_134,menRCCstage2_2498,menRCCstage2_2520,women_normal_2478,... . #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #> outlier_table <- extract_outlier_table(outlier_samples)  outlier_table %>%    apply(1, function(x){     sum(x)   }) %>%    `>`(0) %>%    which() #>   menLCCstage1_2516    menLCCstage2_134   menRCCstage2_2498   menRCCstage2_2520  #>                  34                  48                 117                 118  #>   women_normal_2478   women_normal_2495  womenLCCstage1_577 womenRCCstage2_1733  #>                 149                 150                 170                 236  #> womenRCCstage3_2249 womenRCCstage3_2494                QC28  #>                 263                 265                 298"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-3","dir":"Articles","previous_headings":"Data cleaning > Filter outlier samples","what":"RPLC negative mode","title":"Case study for tidyMass","text":"Detect outlier samples.","code":"##change class to subject object_rplc_neg <-   object_rplc_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::mutate(class = case_when(class == \"QC\" ~ class,                                   TRUE ~ \"Subject\")) outlier_samples <-   object_rplc_neg %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 8 outlier samples. #> men_normal_363,menLCCstage2_134,menLCCstage2_714,women_normal_11,womenLCCstage1_577,... . #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #>"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-4","dir":"Articles","previous_headings":"Data cleaning > Filter outlier samples","what":"HILIC positive mode","title":"Case study for tidyMass","text":"Detect outlier samples.","code":"##change class to subject object_hilic_pos <-   object_hilic_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::mutate(class = case_when(class == \"QC\" ~ class,                                   TRUE ~ \"Subject\")) outlier_samples <-   object_hilic_pos %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 6 outlier samples. #> men_normal_2518,menLCCstage1_2516,menRCCstage2_2498,menRCCstage2_2520,women_normal_2495,... . #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #>"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode-4","dir":"Articles","previous_headings":"Data cleaning > Filter outlier samples","what":"HILIC negative mode","title":"Case study for tidyMass","text":"Detect outlier samples.","code":"##change class to subject object_hilic_neg <-   object_hilic_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::mutate(class = case_when(class == \"QC\" ~ class,                                   TRUE ~ \"Subject\")) outlier_samples <-   object_hilic_neg %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 2 outlier samples. #> menRCCstage2_2520,womenRCCstage3_2494 . #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #>"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"missing-value-imputation","dir":"Articles","previous_headings":"Data cleaning","what":"Missing value imputation","title":"Case study for tidyMass","text":"","code":"object_rplc_pos <-    impute_mv(object = object_rplc_pos,              method = \"knn\", colmax = 0.9) object_rplc_neg <-    impute_mv(object = object_rplc_neg, method = \"knn\") object_hilic_pos <-    impute_mv(object = object_hilic_pos, method = \"knn\") object_hilic_neg <-    impute_mv(object = object_hilic_neg, method = \"knn\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-5","dir":"Articles","previous_headings":"Data cleaning > Data normalization and integration","what":"RPLC positive mode","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"load(\"data_cleaning/RPLC/POS/object_rplc_pos\") object_rplc_pos <-    normalize_data(object_rplc_pos, method = \"svr\")  object_rplc_pos2 <-    integrate_data(object_rplc_pos, method = \"subject_median\") save(object_rplc_pos2, file = \"data_cleaning/RPLC/POS/object_rplc_pos2\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-4","dir":"Articles","previous_headings":"Data cleaning > Data normalization and integration","what":"RPLC negative mode","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"load(\"data_cleaning/RPLC/NEG/object_rplc_neg\") object_rplc_neg <-    normalize_data(object_rplc_neg, method = \"svr\")  object_rplc_neg2 <-    integrate_data(object_rplc_neg, method = \"subject_median\") save(object_rplc_neg2, file = \"data_cleaning/RPLC/NEG/object_rplc_neg2\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-5","dir":"Articles","previous_headings":"Data cleaning > Data normalization and integration","what":"HILIC positive mode","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"load(\"data_cleaning/HILIC/POS/object_hilic_pos\") object_hilic_pos <-    normalize_data(object_hilic_pos, method = \"svr\")  object_hilic_pos2 <-    integrate_data(object_hilic_pos, method = \"subject_median\") save(object_hilic_pos2, file = \"data_cleaning/HILIC/POS/object_hilic_pos2\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode-5","dir":"Articles","previous_headings":"Data cleaning > Data normalization and integration","what":"HILIC negative mode","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"load(\"data_cleaning/HILIC/NEG/object_hilic_neg\") object_hilic_neg <-    normalize_data(object_hilic_neg, method = \"svr\")  object_hilic_neg2 <-    integrate_data(object_hilic_neg, method = \"subject_median\") save(object_hilic_neg2, file = \"data_cleaning/HILIC/NEG/object_hilic_neg2\") rm(   list = c(     \"object_hilic_pos\",     \"object_hilic_neg\",     \"object_rplc_pos\",     \"object_rplc_neg\"   ) ) gc()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"data-quality-assessment-after-data-cleaning","dir":"Articles","previous_headings":"Data cleaning","what":"Data quality assessment after data cleaning","title":"Case study for tidyMass","text":"can use massqc_report() function get html format quality assessment report.","code":"load(\"data_cleaning/RPLC/POS/object_rplc_pos2\") massqc::massqc_report(object = object_rplc_pos2,                        path = \"data_cleaning/RPLC/POS/data_quality_after_data_cleaning\") load(\"data_cleaning/RPLC/NEG/object_rplc_neg2\") massqc::massqc_report(object = object_rplc_neg2,                        path = \"data_cleaning/RPLC/NEG/data_quality_after_data_cleaning\") load(\"data_cleaning/HILIC/POS/object_hilic_pos2\") massqc::massqc_report(object = object_hilic_pos2,                        path = \"data_cleaning/HILIC/POS/data_quality_after_data_cleaning\") load(\"data_cleaning/HILIC/NEG/object_hilic_neg2\") massqc::massqc_report(object = object_hilic_neg2,                        path = \"data_cleaning/HILIC/NEG/data_quality_after_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"metabolite-annotation","dir":"Articles","previous_headings":"","what":"Metabolite annotation","title":"Case study for tidyMass","text":"","code":"library(tidymass) library(tidyverse)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"add-ms2-spectra-to-object","dir":"Articles","previous_headings":"Metabolite annotation","what":"Add MS2 spectra to object","title":"Case study for tidyMass","text":"Download MS2 data . Place data folder uncompress .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-6","dir":"Articles","previous_headings":"Metabolite annotation > Add MS2 spectra to object","what":"RPLC positive mode","title":"Case study for tidyMass","text":"","code":"object_rplc_pos2 <-    mutate_ms2(     object = object_rplc_pos2,     column = \"rplc\",     polarity = \"positive\",     ms1.ms2.match.mz.tol = 5,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/RPLC/POS/\"   )"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-5","dir":"Articles","previous_headings":"Metabolite annotation > Add MS2 spectra to object","what":"RPLC negative mode","title":"Case study for tidyMass","text":"","code":"object_rplc_neg2 <-    mutate_ms2(     object = object_rplc_neg2,     column = \"rplc\",     polarity = \"negative\",     ms1.ms2.match.mz.tol = 5,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/RPLC/NEG/\"   )"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-6","dir":"Articles","previous_headings":"Metabolite annotation > Add MS2 spectra to object","what":"HILIC positive mode","title":"Case study for tidyMass","text":"","code":"object_hilic_pos2 <-    mutate_ms2(     object = object_hilic_pos2,     column = \"hilic\",     polarity = \"positive\",     ms1.ms2.match.mz.tol = 5,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/HILIC/POS/\"   )"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-negative-mode-6","dir":"Articles","previous_headings":"Metabolite annotation > Add MS2 spectra to object","what":"HILIC negative mode","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"object_hilic_neg2 <-    mutate_ms2(     object = object_hilic_neg2,     column = \"hilic\",     polarity = \"negative\",     ms1.ms2.match.mz.tol = 5,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/HILIC/NEG/\"   ) save(object_rplc_pos2, file = \"data_cleaning/RPLC/POS/object_rplc_pos2\") save(object_rplc_neg2, file = \"data_cleaning/RPLC/NEG/object_rplc_neg2\") save(object_hilic_pos2, file = \"data_cleaning/HILIC/POS/object_hilic_pos2\") save(object_hilic_neg2, file = \"data_cleaning/HILIC/NEG/object_hilic_neg2\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"metabolite-annotation-using-metid","dir":"Articles","previous_headings":"Metabolite annotation","what":"Metabolite annotation using metid","title":"Case study for tidyMass","text":"Metabolite annotation based metid package.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"download-database","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid","what":"Download database","title":"Case study for tidyMass","text":"need download MS1 MS2 database metid website. -house database constructed MS1 RT information. also download public databases, snyder_database_hilic0.0.3. place new folder named metabolite_annotation.","code":"load(\"data_cleaning/RPLC/POS/object_rplc_pos2\") load(\"data_cleaning/RPLC/NEG/object_rplc_neg2\") load(\"data_cleaning/HILIC/POS/object_hilic_pos2\") load(\"data_cleaning/HILIC/NEG/object_hilic_neg2\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-in-house-database-","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > RPLC positive mode","what":"Annotate features using in-house database.","title":"Case study for tidyMass","text":"","code":"load(\"metabolite_annotation/database/RPLC.database\") object_rplc_pos3 <-    annotate_metabolites_mass_dataset(object = object_rplc_pos2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                      polarity = \"positive\",                                     database = RPLC.database)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-snyder_database_rplc0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > RPLC positive mode","what":"Annotate features using snyder_database_rplc0.0.3.","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"load(\"metabolite_annotation/database/snyder_database_rplc0.0.3\") object_rplc_pos3 <-    annotate_metabolites_mass_dataset(object = object_rplc_pos3,                                      ms1.match.ppm = 15,                                      rt.match.tol = 1000000,                                     polarity = \"positive\",                                     database = snyder_database_rplc0.0.3) save(object_rplc_pos3, file = \"metabolite_annotation/RPLC/POS/object_rplc_pos3\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-in-house-database--1","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > RPLC negative mode","what":"Annotate features using in-house database.","title":"Case study for tidyMass","text":"","code":"object_rplc_neg3 <-    annotate_metabolites_mass_dataset(object = object_rplc_neg2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                      polarity = \"negative\",                                     database = RPLC.database)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-snyder_database_rplc0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > RPLC negative mode","what":"Annotate features using snyder_database_rplc0.0.3.","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"object_rplc_neg3 <-    annotate_metabolites_mass_dataset(object = object_rplc_neg3,                                      ms1.match.ppm = 15,                                      rt.match.tol = 1000000,                                     polarity = \"negative\",                                     database = snyder_database_rplc0.0.3) save(object_rplc_neg3, file = \"metabolite_annotation/RPLC/NEG/object_rplc_neg3\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-in-house-database--2","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > HILIC positive mode","what":"Annotate features using in-house database.","title":"Case study for tidyMass","text":"","code":"load(\"metabolite_annotation/database/HILIC.database\") object_hilic_pos3 <-    annotate_metabolites_mass_dataset(object = object_hilic_pos2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                      polarity = \"positive\",                                     database = HILIC.database)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-snyder_database_hilic0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > HILIC positive mode","what":"Annotate features using snyder_database_hilic0.0.3.","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"load(\"metabolite_annotation/database/snyder_database_hilic0.0.3\") object_hilic_pos3 <-    annotate_metabolites_mass_dataset(object = object_hilic_pos3,                                      ms1.match.ppm = 15,                                      rt.match.tol = 1000000,                                     polarity = \"positive\",                                     database = snyder_database_hilic0.0.3) save(object_hilic_pos3, file = \"metabolite_annotation/HILIC/POS/object_hilic_pos3\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-in-house-database--3","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > HILIC negative mode","what":"Annotate features using in-house database.","title":"Case study for tidyMass","text":"","code":"object_hilic_neg3 <-    annotate_metabolites_mass_dataset(object = object_hilic_neg2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                      polarity = \"negative\",                                     database = HILIC.database)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotate-features-using-snyder_database_hilic0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > HILIC negative mode","what":"Annotate features using snyder_database_hilic0.0.3.","title":"Case study for tidyMass","text":"Save subsequent analysis.","code":"object_hilic_neg3 <-    annotate_metabolites_mass_dataset(object = object_hilic_neg3,                                      ms1.match.ppm = 15,                                      rt.match.tol = 1000000,                                     polarity = \"negative\",                                     database = snyder_database_hilic0.0.3) save(object_hilic_neg3, file = \"metabolite_annotation/HILIC/NEG/object_hilic_neg3\") rm(   list = c(     \"object_hilic_pos2\",     \"object_hilic_neg2\",     \"object_rplc_pos2\",     \"object_rplc_neg2\"   ) ) gc()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"annotation-result","dir":"Articles","previous_headings":"Metabolite annotation","what":"Annotation result","title":"Case study for tidyMass","text":"annotation result can got using extract_annotation_table function.","code":"load(\"metabolite_annotation/RPLC/POS/object_rplc_pos3\") load(\"metabolite_annotation/RPLC/NEG/object_rplc_neg3\") load(\"metabolite_annotation/HILIC/POS/object_hilic_pos3\") load(\"metabolite_annotation/HILIC/NEG/object_hilic_neg3\") head(extract_annotation_table(object = object_rplc_pos3)) #>      variable_id ms2_files_id ms2_spectrum_id #> 1  M1000T389_POS           NA              NA #> 2  M1000T389_POS           NA              NA #> 3 M103T115_1_POS           NA              NA #> 4   M105T218_POS           NA              NA #> 5   M105T218_POS           NA              NA #> 6    M105T22_POS           NA              NA #>                          Compound.name     CAS.ID   HMDB.ID KEGG.ID   Lab.ID #> 1            Tauroursodeoxycholic acid 14605-22-2 HMDB00874    <NA> RPLC_882 #> 2            Tauroursodeoxycholic acid 14605-22-2 HMDB00874    <NA> RPLC_643 #> 3 2-(4-Hydroxyphenyl)ethanol (Tyrosol)       <NA>      <NA>    <NA>   RPLC_9 #> 4                             BENZOATE       <NA>      <NA>    <NA> RPLC_329 #> 5                4-HYDROXYBENZALDEHYDE       <NA>      <NA>    <NA> RPLC_365 #> 6        N,N-Dimethylguanidine sulfate       <NA>      <NA>    <NA>  RPLC_41 #>        Adduct  mz.error mz.match.score RT.error RT.match.score CE SS #> 1     (2M+H)+  6.990604      0.8970921       NA             NA NA NA #> 2     (2M+H)+  8.591256      0.8487238       NA             NA NA NA #> 3 (M+H-2H2O)+  1.199677      0.9968068       NA             NA NA NA #> 4  (M+H-H2O)+  1.322858      0.9961188       NA             NA NA NA #> 5  (M+H-H2O)+  1.322858      0.9961188       NA             NA NA NA #> 6    (M+NH4)+ 10.611103      0.7786355       NA             NA NA NA #>   Total.score Database Level #> 1   0.8970921 MS_0.0.2     3 #> 2   0.8487238 MS_0.0.2     3 #> 3   0.9968068 MS_0.0.2     3 #> 4   0.9961188 MS_0.0.2     3 #> 5   0.9961188 MS_0.0.2     3 #> 6   0.7786355 MS_0.0.2     3 variable_info_pos <-   extract_variable_info(object = object_rplc_pos3) head(variable_info_pos) #>   variable_id       mz        rt    na_freq na_freq.1  na_freq.2 #> 1 M77T115_POS 77.03846 114.81734 0.14285714 0.2380952 0.14473684 #> 2  M85T92_POS 84.96034  92.38353 0.10714286 0.3809524 0.22368421 #> 3  M90T23_POS 90.05328  23.39891 0.03571429 0.2619048 0.17982456 #> 4  M91T52_POS 91.05412  51.77000 0.10714286 0.1904762 0.10526316 #> 5 M91T115_POS 91.05412 114.80016 0.03571429 0.2142857 0.16228070 #> 6 M95T115_POS 95.04891 114.80017 0.10714286 0.1190476 0.09210526 #>                   Compound.name CAS.ID HMDB.ID KEGG.ID   Lab.ID      Adduct #> 1                        PHENOL   <NA>    <NA>    <NA> RPLC_308  (M+H-H2O)+ #> 2                          <NA>   <NA>    <NA>    <NA>     <NA>        <NA> #> 3                  BETA-ALANINE   <NA>    <NA>    <NA> RPLC_288      (M+H)+ #> 4                          <NA>   <NA>    <NA>    <NA>     <NA>        <NA> #> 5                          <NA>   <NA>    <NA>    <NA>     <NA>        <NA> #> 6 4-METHYL-2-OXO-PENTANOIC ACID   <NA>    <NA>    <NA> RPLC_291 (M+H-2H2O)+ #>    mz.error mz.match.score RT.error RT.match.score CE SS Total.score Database #> 1 0.2755554      0.9998313       NA             NA NA NA   0.9998313 MS_0.0.2 #> 2        NA             NA       NA             NA NA NA          NA     <NA> #> 3 4.2407715      0.9608233       NA             NA NA NA   0.9608233 MS_0.0.2 #> 4        NA             NA       NA             NA NA NA          NA     <NA> #> 5        NA             NA       NA             NA NA NA          NA     <NA> #> 6 0.4448792      0.9995603       NA             NA NA NA   0.9995603 MS_0.0.2 #>   Level #> 1     3 #> 2    NA #> 3     3 #> 4    NA #> 5    NA #> 6     3"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"remove-the-features-without-annotations","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis","what":"Remove the features without annotations","title":"Case study for tidyMass","text":"remain annotations level 2.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-positive-mode-8","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Remove the features without annotations","what":"RPLC positive mode","title":"Case study for tidyMass","text":"","code":"object_rplc_pos3 <-    object_rplc_pos3 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-7","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Remove the features without annotations","what":"RPLC negative mode","title":"Case study for tidyMass","text":"","code":"object_rplc_neg3 <-    object_rplc_neg3 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"hilic-positive-mode-8","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Remove the features without annotations","what":"HILIC positive mode","title":"Case study for tidyMass","text":"","code":"object_hilic_pos3 <-    object_hilic_pos3 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"rplc-negative-mode-8","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Remove the features without annotations","what":"RPLC negative mode","title":"Case study for tidyMass","text":"","code":"object_hilic_neg3 <-    object_hilic_neg3 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"merge-data","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis","what":"Merge data","title":"Case study for tidyMass","text":"need merge RPLC, HILIC positive negative mode data one mass_dataset class.","code":"head(colnames(object_rplc_pos3)) #> [1] \"men_normal_166\"  \"men_normal_2332\" \"men_normal_2357\" \"men_normal_2371\" #> [5] \"men_normal_2407\" \"men_normal_2409\" head(colnames(object_rplc_neg3)) #> [1] \"men_normal_166\"  \"men_normal_2332\" \"men_normal_2357\" \"men_normal_2371\" #> [5] \"men_normal_2407\" \"men_normal_2409\" head(colnames(object_hilic_pos3)) #> [1] \"men_normal_166\"  \"men_normal_2332\" \"men_normal_2357\" \"men_normal_2371\" #> [5] \"men_normal_2407\" \"men_normal_2409\" head(colnames(object_hilic_neg3)) #> [1] \"menLCCstage1_1122\" \"menLCCstage1_1487\" \"menLCCstage1_1532\" #> [4] \"menLCCstage1_1941\" \"menLCCstage1_1969\" \"menLCCstage1_2516\" object_rplc <-   merge_mass_dataset(     x = object_rplc_pos3,     y = object_rplc_neg3,     sample_direction = \"inner\",     variable_direction = \"full\",     sample_by = \"sample_id\",     variable_by = c(\"variable_id\", \"mz\", \"rt\")   ) object_hilic <-   merge_mass_dataset(     x = object_hilic_pos3,     y = object_hilic_neg3,     sample_direction = \"inner\",     variable_direction = \"full\",     sample_by = \"sample_id\",     variable_by = c(\"variable_id\", \"mz\", \"rt\")   ) object <-   merge_mass_dataset(     x = object_rplc,     y = object_hilic,     sample_direction = \"inner\",     variable_direction = \"full\",     sample_by = \"sample_id\",     variable_by = c(\"variable_id\", \"mz\", \"rt\")   ) object #> --------------------  #> massdataset version: 0.99.20  #> --------------------  #> 1.expression_data:[ 169 x 298 data.frame] #> 2.sample_info:[ 298 x 21 data.frame] #> 3.variable_info:[ 169 x 15 data.frame] #> 4.sample_info_note:[ 21 x 2 data.frame] #> 5.variable_info_note:[ 15 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-02 14:50:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-02 12:25:08 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-05 16:52:56 #> 2 massdataset      mutate() 2022-03-05 17:08:57 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-05 17:01:27 #> 2 massdataset mutate_variable_na_freq() 2022-03-05 17:01:27 #> 3 massdataset mutate_variable_na_freq() 2022-03-05 17:01:27 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-05 17:01:37 #> 2 massdataset      filter() 2022-03-08 22:18:13 #> 3 massdataset      filter() 2022-03-08 22:18:13 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-03-05 17:45:56 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-03-05 19:18:27 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-03-05 23:36:53 #> 2   metid annotate_metabolites_mass_dataset() 2022-03-06 00:13:48 #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-01 09:51:34 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-01 09:03:10 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-05 16:53:03 #> 2 massdataset      mutate() 2022-03-05 17:10:13 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-05 17:04:03 #> 2 massdataset mutate_variable_na_freq() 2022-03-05 17:04:03 #> 3 massdataset mutate_variable_na_freq() 2022-03-05 17:04:03 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-05 17:04:15 #> 2 massdataset      filter() 2022-03-08 22:18:13 #> 3 massdataset      filter() 2022-03-08 22:18:13 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-03-05 17:46:18 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-03-05 19:56:37 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-03-06 00:29:13 #> 2   metid annotate_metabolites_mass_dataset() 2022-03-06 00:36:58 #> merge_mass_dataset ----------  #>       Package      Function.used                Time #> 1 massdataset merge_mass_dataset 2022-03-08 22:18:14 #> 2 massdataset merge_mass_dataset 2022-03-08 22:18:15 #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-03-02 09:06:33 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-03-02 07:55:29 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-05 16:53:24 #> 2 massdataset      mutate() 2022-03-05 17:18:51 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-05 17:06:07 #> 2 massdataset mutate_variable_na_freq() 2022-03-05 17:06:07 #> 3 massdataset mutate_variable_na_freq() 2022-03-05 17:06:08 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-05 17:06:16 #> 2 massdataset      filter() 2022-03-08 22:18:14 #> 3 massdataset      filter() 2022-03-08 22:18:14 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-03-05 17:46:40 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-03-05 20:54:20 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-03-06 00:43:12 #> 2   metid annotate_metabolites_mass_dataset() 2022-03-06 00:48:51 #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-28 14:07:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-28 13:05:44 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-03-05 16:53:35 #> 2 massdataset      mutate() 2022-03-05 17:19:31 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-03-05 17:08:15 #> 2 massdataset mutate_variable_na_freq() 2022-03-05 17:08:15 #> 3 massdataset mutate_variable_na_freq() 2022-03-05 17:08:15 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-03-05 17:08:20 #> 2 massdataset      filter() 2022-03-08 22:18:14 #> 3 massdataset      filter() 2022-03-08 22:18:14 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-03-05 17:46:54 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-03-05 21:06:01 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-03-06 00:58:51 #> 2   metid annotate_metabolites_mass_dataset() 2022-03-06 01:14:54 #> merge_mass_dataset ----------  #>       Package      Function.used                Time #> 1 massdataset merge_mass_dataset 2022-03-08 22:18:14 rm(   list = c(     \"object_hilic_pos3\",     \"object_hilic_neg3\",     \"object_rplc_pos3\",     \"object_rplc_neg3\"   ) ) gc()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"remove-redundant-metabolites","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis","what":"Remove redundant metabolites","title":"Case study for tidyMass","text":"Remove redundant annotated metabolites bases Level score. Save subsequent analysis.","code":"object <-   object %>%    activate_mass_dataset(what = \"annotation_table\") %>%    group_by(Compound.name) %>%    filter(Level == min(Level)) %>%    filter(Total.score == max(Total.score)) %>%    slice_head(n = 1) save(object, file = \"statistical_analysis/object\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"trace-processing-information-of-object","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis","what":"Trace processing information of object","title":"Case study for tidyMass","text":"can use report_parameters() function trace processing information object. analysis results placed folder named statistical_analysis. html format file named parameter_report.html generated.","code":"report_parameters(object = object, path = \"statistical_analysis\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"clustering-of-all-samples","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis","what":"Clustering of all samples","title":"Case study for tidyMass","text":"","code":"load(\"statistical_analysis/object\") temp_object <-  object %>%    activate_mass_dataset(what = \"sample_info\") %>%    filter(group != \"QC\") %>%    `+`(1) %>%    log(2) %>%    scale() library(ComplexHeatmap) h1 <- HeatmapAnnotation(class = extract_sample_info(temp_object)$group) massstat::Heatmap(matrix = temp_object,                    name = \"z-score\",                    row_names_gp = gpar(cex = 0.2),                   column_names_gp = gpar(cex = 0.2),                   top_annotation = h1)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"differential-expression-metabolites","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis","what":"Differential expression metabolites","title":"Case study for tidyMass","text":"want see dysregulated metabolites pathways different males female cancer tissues.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"calculate-the-fold-changes-","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites","what":"Calculate the fold changes.","title":"Case study for tidyMass","text":"","code":"femaleLCC <-   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::filter(group == \"female LCC\") %>%   dplyr::pull(sample_id)  femaleRCC <-   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::filter(group == \"female RCC\") %>%   dplyr::pull(sample_id)  maleLCC <-   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::filter(group == \"male LCC\") %>%   dplyr::pull(sample_id)  maleRCC <-   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::filter(group == \"male RCC\") %>%   dplyr::pull(sample_id)  femalecontrol <-   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::filter(group == \"female control\") %>%   dplyr::pull(sample_id)  malecontrol <-   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   dplyr::filter(group == \"male control\") %>%   dplyr::pull(sample_id) object <-   mutate_fc(object = object,              control_sample_id = malecontrol,              case_sample_id = maleLCC,              mean_median = \"mean\") #> 28 control samples. #> 63 case samples. #>  object <-    object %>%    activate_mass_dataset(what = \"variable_info\") %>%    dplyr::rename(fc_malelcc_vs_malecontrol = fc) object <-   mutate_fc(object = object,              control_sample_id = femalecontrol,              case_sample_id = femaleLCC,              mean_median = \"mean\") #> 14 control samples. #> 50 case samples. #>  object <-    object %>%    activate_mass_dataset(what = \"variable_info\") %>%    dplyr::rename(fc_femalelcc_vs_femalecontrol = fc)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"calculate-p-values","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites","what":"Calculate p values","title":"Case study for tidyMass","text":"","code":"object <-   mutate_p_value(     object = object,     control_sample_id = malecontrol,     case_sample_id = maleLCC,     method = \"t.test\",     p_adjust_methods = \"BH\"   ) #> 28 control samples. #> 63 case samples. #>  object <-    object %>%    activate_mass_dataset(what = \"variable_info\") %>%    dplyr::rename(p_value_malelcc_vs_malecontrol = p_value,          p_value_adjust_malelcc_vs_malecontrol = p_value_adjust) object <-   mutate_p_value(     object = object,     control_sample_id = femalecontrol,     case_sample_id = femaleLCC,     method = \"t.test\",     p_adjust_methods = \"BH\"   ) #> 14 control samples. #> 50 case samples. #>  object <-    object %>%    activate_mass_dataset(what = \"variable_info\") %>%    dplyr::rename(p_value_femalelcc_vs_femalecontrol = p_value,          p_value_adjust_femalelcc_vs_femalecontrol = p_value_adjust)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"volcano-plot","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites","what":"Volcano plot","title":"Case study for tidyMass","text":"","code":"plot <-  volcano_plot(object = object,              fc_column_name = \"fc_femalelcc_vs_femalecontrol\",              p_value_column_name = \"p_value_adjust_femalelcc_vs_femalecontrol\",              add_text = TRUE,              text_from = \"Compound.name\",               fc_up_cutoff = 1,               fc_down_cutoff = 1,              p_value_cutoff = 0.05,              point_size_scale = \"p_value_adjust_femalelcc_vs_femalecontrol\") +   scale_size_continuous(range = c(0.5, 5)) plot ggsave(plot, filename = \"statistical_analysis/female_LCC_vs_femal_control.pdf\", width = 8, height = 7) plot <-  volcano_plot(object = object,              fc_column_name = \"fc_malelcc_vs_malecontrol\",              p_value_column_name = \"p_value_adjust_malelcc_vs_malecontrol\",              add_text = TRUE,              text_from = \"Compound.name\",               fc_up_cutoff = 1,               fc_down_cutoff = 1,              p_value_cutoff = 0.05,              point_size_scale = \"p_value_adjust_malelcc_vs_malecontrol\") +   scale_size_continuous(range = c(0.5, 5)) plot ggsave(plot, filename = \"statistical_analysis/male_LCC_vs_male_control.pdf\", width = 8, height = 7) diff_metabolites_malelcc_vs_malecontrol <-   object %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(p_value_adjust_malelcc_vs_malecontrol < 0.05) %>%    extract_variable_info()  readr::write_csv(diff_metabolites_malelcc_vs_malecontrol,                   file = \"statistical_analysis/differential_metabolites.csv\") diff_metabolites_femalelcc_vs_femalecontrol <-   object %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(p_value_adjust_femalelcc_vs_femalecontrol < 0.05) %>%    extract_variable_info()  readr::write_csv(diff_metabolites_femalelcc_vs_femalecontrol,                   file = \"statistical_analysis/differential_metabolites.csv\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"heatmap","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites","what":"Heatmap","title":"Case study for tidyMass","text":"","code":"temp_object <-  object %>%    activate_mass_dataset(what = \"sample_info\") %>%    filter(sample_id %in% c(malecontrol, maleLCC)) %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(variable_id %in% diff_metabolites_malelcc_vs_malecontrol$variable_id) %>%    `+`(1) %>%    log(2) %>%    scale() library(ComplexHeatmap) h1 <- HeatmapAnnotation(class = extract_sample_info(temp_object)$group) massstat::Heatmap(matrix = temp_object,                    name = \"z-score\",                    row_names_gp = gpar(cex = 0.4),                   column_names_gp = gpar(cex = 0.2),                   top_annotation = h1,                   row_labels = extract_variable_info(temp_object)$Compound.name,                   border = TRUE) rm(list = c(\"temp_object\")) gc() temp_object <-  object %>%    activate_mass_dataset(what = \"sample_info\") %>%    filter(sample_id %in% c(femalecontrol, femaleLCC)) %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(variable_id %in% diff_metabolites_femalelcc_vs_femalecontrol$variable_id) %>%    `+`(1) %>%    log(2) %>%    scale() library(ComplexHeatmap) h1 <- HeatmapAnnotation(class = extract_sample_info(temp_object)$group) massstat::Heatmap(matrix = temp_object,                    name = \"z-score\",                    row_names_gp = gpar(cex = 0.4),                   column_names_gp = gpar(cex = 0.2),                   top_annotation = h1,                    row_labels = extract_variable_info(temp_object)$Compound.name,                   border = TRUE) rm(list = c(\"temp_object\")) gc()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"pathway-enrichment-analysis","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites","what":"Pathway enrichment analysis","title":"Case study for tidyMass","text":"Next, want know pathways enriched male female LCC tumor, respectively.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"load-kegg-human-pathway-database","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites > Pathway enrichment analysis","what":"Load KEGG human pathway database","title":"Case study for tidyMass","text":"Remove disease pathways","code":"data(\"kegg_hsa_pathway\", package = \"metpath\") #get the class of pathways pathway_class <-    metpath::pathway_class(kegg_hsa_pathway) remain_idx <-   pathway_class %>%   unlist() %>%   stringr::str_detect(\"Disease\") %>%   `!`() %>%   which() pathway_database <-   kegg_hsa_pathway[remain_idx]"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"pathway-enrichment","dir":"Articles","previous_headings":"Statistical analysis and pathway analysis > Differential expression metabolites > Pathway enrichment analysis","what":"Pathway enrichment","title":"Case study for tidyMass","text":"","code":"kegg_id <-   diff_metabolites_femalelcc_vs_femalecontrol$KEGG.ID  kegg_id <-   kegg_id[!is.na(kegg_id)] result_female <-  enrich_kegg(query_id = kegg_id,              query_type = \"compound\",              id_type = \"KEGG\",             pathway_database = pathway_database,              p_cutoff = 0.05,              p_adjust_method = \"BH\",              threads = 3) #> 191 pathways. save(result_female, file = \"pathway_enrichment/result_female\") kegg_id <-   diff_metabolites_malelcc_vs_malecontrol$KEGG.ID  kegg_id <-   kegg_id[!is.na(kegg_id)] result_male <-  enrich_kegg(query_id = kegg_id,              query_type = \"compound\",              id_type = \"KEGG\",             pathway_database = pathway_database,              p_cutoff = 0.05,              p_adjust_method = \"BH\",              threads = 3) #> 191 pathways. save(result_male, file = \"pathway_enrichment/result_male\") plot <-  enrich_bar_plot(object = result_male,                 x_axis = \"p_value\",                 cutoff = 0.05) plot ggsave(plot,        filename = \"pathway_enrichment/male_pathway_bar.pdf\",        width = 7,        height = 7) rm(list = \"plot\") gc() plot <-  enrich_scatter_plot(object = result_male,                     y_axis = \"p_value\",                     y_axis_cutoff = 0.05) plot ggsave(plot,        filename = \"pathway_enrichment/male_pathway_scatter.pdf\",        width = 7,        height = 7) rm(list = \"plot\") gc() plot <-  enrich_bar_plot(object = result_female,                 x_axis = \"p_value\",                 cutoff = 0.05) plot ggsave(plot,        filename = \"pathway_enrichment/female_pathway_bar.pdf\",        width = 7,        height = 7) plot <-  enrich_scatter_plot(object = result_female,                     y_axis = \"p_value\",                     y_axis_cutoff = 0.05) plot ggsave(plot,        filename = \"pathway_enrichment/female_pathway_scatter.pdf\",        width = 7,        height = 7) rm(list = c(\"plot\", \"result_female\", \"result_male\")) gc()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"correlation-network-analysis","dir":"Articles","previous_headings":"","what":"Correlation network analysis","title":"Case study for tidyMass","text":"Next, want know correlation network different male female tumor tissues.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"female-tumor","dir":"Articles","previous_headings":"Correlation network analysis","what":"Female tumor","title":"Case study for tidyMass","text":"","code":"temp_object <-  object %>%    activate_mass_dataset(what = \"sample_info\") %>%    filter(sample_id %in% c(femalecontrol)) %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(variable_id %in% diff_metabolites_femalelcc_vs_femalecontrol$variable_id) %>%    `+`(1) %>%    log(2) %>%    scale()  library(ggraph) library(tidygraph) graph_data_female <-   convert_mass_dataset2graph(     object = temp_object,     margin = \"variable\",     cor_method = \"spearman\",     p_adjust_cutoff = 1,     p_value_cutoff = 0.05,     pos_cor_cutoff = 0,     neg_cor_cutoff = 0   ) %>%    mutate(Degree = centrality_degree(mode = 'all')) rm(list = \"temp_object\") gc() library(extrafont) loadfonts() plot <-  ggraph(graph = graph_data_female, layout = \"kk\") +   geom_edge_fan(aes(color = correlation,                     width = -log(p_value, 10)),                 show.legend = TRUE) +   geom_node_point(aes(size = Degree)) +   shadowtext::geom_shadowtext(aes(x = x, y = y,                                   label = Compound.name),                               bg.colour = \"white\",                               colour = \"black\")+   theme_graph() +   scale_edge_color_gradient2(low = \"darkblue\", mid = \"white\", high = \"red\") plot ggsave(plot, filename = \"pathway_enrichment/female_cor_network.pdf\", width = 7, height = 7)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"male-tumor","dir":"Articles","previous_headings":"Correlation network analysis","what":"Male tumor","title":"Case study for tidyMass","text":"","code":"temp_object <-  object %>%    activate_mass_dataset(what = \"sample_info\") %>%    filter(sample_id %in% c(malecontrol)) %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(variable_id %in% diff_metabolites_malelcc_vs_malecontrol$variable_id) %>%    `+`(1) %>%    log(2) %>%    scale()  graph_data_male <-   convert_mass_dataset2graph(     object = temp_object,     margin = \"variable\",     cor_method = \"spearman\",     p_adjust_cutoff = 1,     p_value_cutoff = 0.05,     pos_cor_cutoff = 0,     neg_cor_cutoff = 0   ) %>%    mutate(Degree = centrality_degree(mode = 'all')) rm(list = \"temp_object\") gc() plot <-  ggraph(graph = graph_data_male, layout = \"kk\") +   geom_edge_fan(aes(color = correlation,                     width = -log(p_value, 10)),                 show.legend = TRUE) +   geom_node_point(aes(size = Degree)) +   shadowtext::geom_shadowtext(aes(x = x, y = y,                                   label = Compound.name),                               bg.colour = \"white\",                               colour = \"black\")+   theme_graph() +   scale_edge_color_gradient2(low = \"darkblue\", mid = \"white\", high = \"red\") plot ggsave(plot, filename = \"pathway_enrichment/male_cor_network.pdf\", width = 7, height = 7)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_case_study.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Case study for tidyMass","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    grid      stats     graphics  grDevices utils     datasets  #> [8] methods   base      #>  #> other attached packages: #>  [1] metid_1.2.4           metpath_0.99.4        massstat_0.99.13      #>  [4] ggfortify_0.4.14      massqc_0.99.7         masscleaner_0.99.7    #>  [7] xcms_3.16.1           MSnbase_2.20.4        ProtGenerics_1.26.0   #> [10] S4Vectors_0.32.3      mzR_2.28.0            Rcpp_1.0.8            #> [13] Biobase_2.54.0        BiocGenerics_0.40.0   BiocParallel_1.28.3   #> [16] massprocesser_0.99.3  magrittr_2.0.2        masstools_0.99.5      #> [19] massdataset_0.99.20   tidymass_0.99.6       shadowtext_0.1.1      #> [22] extrafont_0.17        tidygraph_1.2.0       ggraph_2.0.5          #> [25] ComplexHeatmap_2.10.0 BiocManager_1.30.16   forcats_0.5.1.9000    #> [28] stringr_1.4.0         dplyr_1.0.8           purrr_0.3.4           #> [31] readr_2.1.2           tidyr_1.2.0           tibble_3.1.6          #> [34] ggplot2_3.3.5         tidyverse_1.3.1       remotes_2.4.2         #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  bit64_4.0.5                 #>   [3] missForest_1.4              knitr_1.37                  #>   [5] DelayedArray_0.20.0         data.table_1.14.2           #>   [7] rpart_4.1.16                KEGGREST_1.34.0             #>   [9] RCurl_1.98-1.5              doParallel_1.0.17           #>  [11] generics_0.1.2              snow_0.4-4                  #>  [13] leaflet_2.1.0               preprocessCore_1.56.0       #>  [15] mixOmics_6.18.1             RANN_2.6.1                  #>  [17] future_1.23.0               proxy_0.4-26                #>  [19] bit_4.0.4                   tzdb_0.2.0                  #>  [21] xml2_1.3.3                  lubridate_1.8.0             #>  [23] ggsci_2.9                   SummarizedExperiment_1.24.0 #>  [25] assertthat_0.2.1            viridis_0.6.2               #>  [27] xfun_0.29                   hms_1.1.1                   #>  [29] jquerylib_0.1.4             evaluate_0.15               #>  [31] DEoptimR_1.0-10             fansi_1.0.2                 #>  [33] dbplyr_2.1.1                readxl_1.3.1                #>  [35] igraph_1.2.11               DBI_1.1.2                   #>  [37] htmlwidgets_1.5.4           MsFeatures_1.3.0            #>  [39] rARPACK_0.11-0              ellipsis_0.3.2              #>  [41] RSpectra_0.16-0             crosstalk_1.2.0             #>  [43] backports_1.4.1             ggcorrplot_0.1.3            #>  [45] MatrixGenerics_1.6.0        vctrs_0.3.8                 #>  [47] cachem_1.0.6                withr_2.4.3                 #>  [49] ggforce_0.3.3               itertools_0.1-3             #>  [51] robustbase_0.93-9           vroom_1.5.7                 #>  [53] checkmate_2.0.0             cluster_2.1.2               #>  [55] lazyeval_0.2.2              crayon_1.5.0                #>  [57] ellipse_0.4.2               labeling_0.4.2              #>  [59] pkgconfig_2.0.3             tweenr_1.0.2                #>  [61] GenomeInfoDb_1.30.0         nnet_7.3-17                 #>  [63] globals_0.14.0              rlang_1.0.1                 #>  [65] lifecycle_1.0.1             affyio_1.64.0               #>  [67] extrafontdb_1.0             fastDummies_1.6.3           #>  [69] MassSpecWavelet_1.60.0      modelr_0.1.8                #>  [71] cellranger_1.1.0            randomForest_4.7-1          #>  [73] rprojroot_2.0.2             polyclip_1.10-0             #>  [75] matrixStats_0.61.0          Matrix_1.4-0                #>  [77] reprex_2.0.1                base64enc_0.1-3             #>  [79] GlobalOptions_0.1.2         png_0.1-7                   #>  [81] viridisLite_0.4.0           rjson_0.2.21                #>  [83] clisymbols_1.2.0            bitops_1.0-7                #>  [85] pander_0.6.4                Biostrings_2.62.0           #>  [87] shape_1.4.6                 parallelly_1.30.0           #>  [89] robust_0.7-0                jpeg_0.1-9                  #>  [91] gridGraphics_0.5-1          scales_1.1.1                #>  [93] memoise_2.0.1               plyr_1.8.6                  #>  [95] zlibbioc_1.40.0             compiler_4.1.2              #>  [97] RColorBrewer_1.1-2          pcaMethods_1.86.0           #>  [99] clue_0.3-60                 rrcov_1.6-2                 #> [101] cli_3.2.0                   affy_1.72.0                 #> [103] XVector_0.34.0              listenv_0.8.0               #> [105] patchwork_1.1.1             pbapply_1.5-0               #> [107] htmlTable_2.4.0             Formula_1.2-4               #> [109] MASS_7.3-55                 tidyselect_1.1.1            #> [111] vsn_3.62.0                  stringi_1.7.6               #> [113] textshaping_0.3.6           highr_0.9                   #> [115] yaml_2.3.4                  latticeExtra_0.6-29         #> [117] MALDIquant_1.21             ggrepel_0.9.1               #> [119] sass_0.4.0                  tools_4.1.2                 #> [121] parallel_4.1.2              circlize_0.4.14             #> [123] rstudioapi_0.13             MsCoreUtils_1.6.0           #> [125] foreach_1.5.2               foreign_0.8-82              #> [127] gridExtra_2.3               farver_2.1.0                #> [129] mzID_1.32.0                 rvcheck_0.2.1               #> [131] digest_0.6.29               GenomicRanges_1.46.1        #> [133] broom_0.7.12                ncdf4_1.19                  #> [135] httr_1.4.2                  colorspace_2.0-2            #> [137] rvest_1.0.2                 XML_3.99-0.8                #> [139] fs_1.5.2                    IRanges_2.28.0              #> [141] splines_4.1.2               yulab.utils_0.0.4           #> [143] pkgdown_2.0.2               graphlayouts_0.8.0          #> [145] ggplotify_0.1.0             plotly_4.10.0               #> [147] systemfonts_1.0.3           fit.models_0.64             #> [149] jsonlite_1.7.3              corpcor_1.6.10              #> [151] R6_2.5.1                    Hmisc_4.6-0                 #> [153] pillar_1.7.0                htmltools_0.5.2             #> [155] glue_1.6.1                  fastmap_1.1.0               #> [157] class_7.3-20                codetools_0.2-18            #> [159] furrr_0.2.3                 pcaPP_1.9-74                #> [161] mvtnorm_1.1-3               utf8_1.2.2                  #> [163] lattice_0.20-45             bslib_0.3.1                 #> [165] magick_2.7.3                zip_2.2.0                   #> [167] openxlsx_4.2.5              Rttf2pt1_1.3.9              #> [169] survival_3.2-13             limma_3.50.0                #> [171] rmarkdown_2.11              desc_1.4.0                  #> [173] munsell_0.5.0               e1071_1.7-9                 #> [175] GetoptLong_1.0.5            GenomeInfoDbData_1.2.7      #> [177] iterators_1.0.14            impute_1.68.0               #> [179] reshape2_1.4.4              haven_2.4.3                 #> [181] gtable_0.3.0"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"update-r-version","dir":"Articles","previous_headings":"","what":"Update R version","title":"Install tidymass","text":"tidymass require R version > 4.1. can check R version console: R version < 4.1, please download install latest version R, restart R.","code":"version"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"uninstall-tidytools-and-metid","dir":"Articles","previous_headings":"","what":"Uninstall tidyTools and metID","title":"Install tidymass","text":"installed tinyTools metID, please uninstall . tinyTools renamed tinytools metID renamed metid. please uninstall install tidymass. don’t use . detach : Remove : Restart R session. errors, ignore .","code":"detach(\"package:tinyTools\") detach(\"package:metID\") remove.packages(pkgs = \"tinyTools\") remove.packages(pkgs = \"metID\")"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"update-remotes","dir":"Articles","previous_headings":"Install tidymass from GitLab","what":"Update remotes","title":"Install tidymass","text":"can use remotes package install tidymass. Please update remotes first restart r session.","code":"install.packages(\"remotes\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass","dir":"Articles","previous_headings":"Install tidymass from GitLab","what":"Install tidymass","title":"Install tidymass","text":"Install tidymass : installing, may ask several times: “like uodate pacakges?” Just Enter Enter Retrun key skip updates.","code":"remotes::install_gitlab(\"jaspershen/tidymass\", dependencies = TRUE)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass-packages-one-by-one","dir":"Articles","previous_headings":"Install tidymass from GitLab","what":"Install tidymass packages one by one","title":"Install tidymass","text":"use Windows OS dependencies can installed, try install tidymass packages one one.","code":"remotes::install_gitlab(\"jaspershen/masstools\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/massdataset\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/massqc\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/massprocesser\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/masscleaner\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/massstat\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/metid\", dependencies = TRUE) remotes::install_gitlab(\"jaspershen/metpath\", dependencies = TRUE)"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass-1","dir":"Articles","previous_headings":"Install tidymass from GitHub","what":"Install tidymass","title":"Install tidymass","text":"install tidymass: installation, ask want update packages times, just enter Enter Reurn key skip . error like : Try resolve : R console, type code: open page browser, create “New personal access token” copy .  type code: add one line like : GITHUB_PAT created step 1. restart R session try .","code":"remotes::install_github(\"tidymass/tidymass\", dependencies = TRUE) Error: Failed to install 'tidymass' from GitHub: HTTP error 403. API rate limit exceeded for 171.66.10.237. (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.) usethis::create_github_token() usethis::edit_r_environ() GITHUB_PAT=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"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass-packages-one-by-one-1","dir":"Articles","previous_headings":"Install tidymass from GitHub","what":"Install tidymass packages one by one","title":"Install tidymass","text":"use Windows OS dependencies can installed, try install tidymass packages one one.","code":"remotes::install_github(\"tidymass/masstools\", dependencies = TRUE) remotes::install_github(\"tidymass/massdataset\", dependencies = TRUE) remotes::install_github(\"tidymass/massqc\", dependencies = TRUE) remotes::install_github(\"tidymass/massprocesser\", dependencies = TRUE) remotes::install_github(\"tidymass/masscleaner\", dependencies = TRUE) remotes::install_github(\"tidymass/massstat\", dependencies = TRUE) remotes::install_github(\"tidymass/metid\", dependencies = TRUE) remotes::install_github(\"tidymass/metpath\", dependencies = TRUE)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass-from-gitee","dir":"Articles","previous_headings":"","what":"Install tidymass from Gitee","title":"Install tidymass","text":"can’t install pacakgs GitHub GitLab, please try install packags Gitee.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass-2","dir":"Articles","previous_headings":"Install tidymass from Gitee","what":"Install tidymass","title":"Install tidymass","text":"install tidymass:","code":"remotes::install_git(url = \"https://gitee.com/jaspershen/tidymass\", dependencies = TRUE)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"install-tidymass-packages-one-by-one-","dir":"Articles","previous_headings":"Install tidymass from Gitee","what":"Install tidymass packages one by one.","title":"Install tidymass","text":"use Windows OS dependencies can installed, try install tidymass packages one one. Let know questions.","code":"remotes::install_git(url = \"https://gitee.com/jaspershen/masstools\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/massdataset\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/massqc\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/massprocesser\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/masscleaner\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/massstat\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/metid\", dependencies = TRUE) remotes::install_git(url = \"https://gitee.com/jaspershen/metpath\", dependencies = TRUE)"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"frequently-asked-questions","dir":"Articles","previous_headings":"","what":"Frequently Asked Questions","title":"Install tidymass","text":"Can install dependent packages raster Cario raster package CRAN, try install first install tidymass. Cario package CRAN, try install first install tidymass. Error install massprocesser error : Just try restart R install affy.","code":"install.packages(\"raster\") install.packages(\"Cairo\") Error: .onLoad failed in loadNamespace() for 'affy', details:   call: assign(\".affyInternalEnv\", .affyInternalEnv, envir = topenv(parent.frame()))   error: cannot add binding of '.affyInternalEnv' to the base environment Execution halted ERROR: lazy loading failed for package 'massprocesser' * removing 'D:/R_packages/R4.0/library/massprocesser' BiocManager::install(\"affy\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_install.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Install tidymass","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] dplyr_1.0.8          metid_1.2.2          metpath_0.99.2       #>  [4] massstat_0.99.6      ggfortify_0.4.14     ggplot2_3.3.5        #>  [7] massqc_0.99.3        masscleaner_0.99.3   xcms_3.16.1          #> [10] MSnbase_2.20.4       ProtGenerics_1.26.0  S4Vectors_0.32.3     #> [13] mzR_2.28.0           Rcpp_1.0.8           Biobase_2.54.0       #> [16] BiocGenerics_0.40.0  BiocParallel_1.28.3  massprocesser_0.99.3 #> [19] magrittr_2.0.2       masstools_0.99.3     massdataset_0.99.9   #> [22] tidymass_0.99.4      #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  tidyr_1.2.0                 #>   [3] missForest_1.4              knitr_1.37                  #>   [5] DelayedArray_0.20.0         data.table_1.14.2           #>   [7] rpart_4.1.16                KEGGREST_1.34.0             #>   [9] RCurl_1.98-1.5              doParallel_1.0.17           #>  [11] generics_0.1.2              snow_0.4-4                  #>  [13] leaflet_2.1.0               preprocessCore_1.56.0       #>  [15] mixOmics_6.18.1             RANN_2.6.1                  #>  [17] proxy_0.4-26                future_1.23.0               #>  [19] tzdb_0.2.0                  xml2_1.3.3                  #>  [21] lubridate_1.8.0             ggsci_2.9                   #>  [23] SummarizedExperiment_1.24.0 assertthat_0.2.1            #>  [25] tidyverse_1.3.1             viridis_0.6.2               #>  [27] xfun_0.29                   hms_1.1.1                   #>  [29] jquerylib_0.1.4             evaluate_0.15               #>  [31] DEoptimR_1.0-10             fansi_1.0.2                 #>  [33] dbplyr_2.1.1                readxl_1.3.1                #>  [35] igraph_1.2.11               DBI_1.1.2                   #>  [37] htmlwidgets_1.5.4           MsFeatures_1.3.0            #>  [39] rARPACK_0.11-0              purrr_0.3.4                 #>  [41] ellipsis_0.3.2              RSpectra_0.16-0             #>  [43] crosstalk_1.2.0             backports_1.4.1             #>  [45] ggcorrplot_0.1.3            MatrixGenerics_1.6.0        #>  [47] vctrs_0.3.8                 remotes_2.4.2               #>  [49] cachem_1.0.6                withr_2.4.3                 #>  [51] ggforce_0.3.3               itertools_0.1-3             #>  [53] robustbase_0.93-9           checkmate_2.0.0             #>  [55] cluster_2.1.2               lazyeval_0.2.2              #>  [57] crayon_1.5.0                ellipse_0.4.2               #>  [59] pkgconfig_2.0.3             tweenr_1.0.2                #>  [61] GenomeInfoDb_1.30.0         nnet_7.3-17                 #>  [63] rlang_1.0.1                 globals_0.14.0              #>  [65] lifecycle_1.0.1             affyio_1.64.0               #>  [67] extrafontdb_1.0             fastDummies_1.6.3           #>  [69] MassSpecWavelet_1.60.0      modelr_0.1.8                #>  [71] cellranger_1.1.0            randomForest_4.7-1          #>  [73] rprojroot_2.0.2             polyclip_1.10-0             #>  [75] matrixStats_0.61.0          Matrix_1.4-0                #>  [77] reprex_2.0.1                base64enc_0.1-3             #>  [79] GlobalOptions_0.1.2         png_0.1-7                   #>  [81] viridisLite_0.4.0           rjson_0.2.21                #>  [83] clisymbols_1.2.0            bitops_1.0-7                #>  [85] pander_0.6.4                Biostrings_2.62.0           #>  [87] shape_1.4.6                 stringr_1.4.0               #>  [89] parallelly_1.30.0           robust_0.7-0                #>  [91] readr_2.1.2                 jpeg_0.1-9                  #>  [93] gridGraphics_0.5-1          scales_1.1.1                #>  [95] memoise_2.0.1               plyr_1.8.6                  #>  [97] zlibbioc_1.40.0             compiler_4.1.2              #>  [99] RColorBrewer_1.1-2          pcaMethods_1.86.0           #> [101] clue_0.3-60                 rrcov_1.6-2                 #> [103] cli_3.2.0                   affy_1.72.0                 #> [105] XVector_0.34.0              listenv_0.8.0               #> [107] patchwork_1.1.1             pbapply_1.5-0               #> [109] htmlTable_2.4.0             Formula_1.2-4               #> [111] MASS_7.3-55                 tidyselect_1.1.1            #> [113] vsn_3.62.0                  stringi_1.7.6               #> [115] forcats_0.5.1               textshaping_0.3.6           #> [117] yaml_2.3.4                  latticeExtra_0.6-29         #> [119] MALDIquant_1.21             ggrepel_0.9.1               #> [121] grid_4.1.2                  sass_0.4.0                  #> [123] tools_4.1.2                 parallel_4.1.2              #> [125] circlize_0.4.14             rstudioapi_0.13             #> [127] MsCoreUtils_1.6.0           foreach_1.5.2               #> [129] foreign_0.8-82              gridExtra_2.3               #> [131] farver_2.1.0                mzID_1.32.0                 #> [133] ggraph_2.0.5                rvcheck_0.2.1               #> [135] digest_0.6.29               BiocManager_1.30.16         #> [137] GenomicRanges_1.46.1        broom_0.7.12                #> [139] ncdf4_1.19                  httr_1.4.2                  #> [141] ComplexHeatmap_2.10.0       colorspace_2.0-2            #> [143] rvest_1.0.2                 XML_3.99-0.8                #> [145] fs_1.5.2                    IRanges_2.28.0              #> [147] splines_4.1.2               yulab.utils_0.0.4           #> [149] graphlayouts_0.8.0          pkgdown_2.0.2               #> [151] ggplotify_0.1.0             plotly_4.10.0               #> [153] systemfonts_1.0.3           fit.models_0.64             #> [155] jsonlite_1.7.3              tidygraph_1.2.0             #> [157] corpcor_1.6.10              R6_2.5.1                    #> [159] Hmisc_4.6-0                 pillar_1.7.0                #> [161] htmltools_0.5.2             glue_1.6.1                  #> [163] fastmap_1.1.0               class_7.3-20                #> [165] codetools_0.2-18            pcaPP_1.9-74                #> [167] mvtnorm_1.1-3               furrr_0.2.3                 #> [169] utf8_1.2.2                  lattice_0.20-45             #> [171] bslib_0.3.1                 tibble_3.1.6                #> [173] zip_2.2.0                   openxlsx_4.2.5              #> [175] Rttf2pt1_1.3.9              survival_3.2-13             #> [177] limma_3.50.0                rmarkdown_2.11              #> [179] desc_1.4.0                  munsell_0.5.0               #> [181] e1071_1.7-9                 GetoptLong_1.0.5            #> [183] GenomeInfoDbData_1.2.7      iterators_1.0.14            #> [185] impute_1.68.0               haven_2.4.3                 #> [187] reshape2_1.4.4              gtable_0.3.0                #> [189] extrafont_0.17"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_update.html","id":"check-version-of-tidymass","dir":"Articles","previous_headings":"","what":"Check version of tidymass","title":"Update tidymass","text":"want check updates tidymass packages . Just check like .","code":"tidymass::check_tidymass_version()"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_update.html","id":"update-tidymass","dir":"Articles","previous_headings":"","what":"Update tidymass","title":"Update tidymass","text":"update_tidymass() function can used update tidymass packages . = \"github\" doesn’t work, try set = \"gitlab\" = \"gitee\".","code":"tidymass::update_tidymass(from = \"github\")"},{"path":"https://tidymass.github.io/tidymass/articles/tidymass_update.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Update tidymass","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> loaded via a namespace (and not attached): #>   [1] metpath_0.99.2              ragg_1.2.1                  #>   [3] tidyr_1.2.0                 missForest_1.4              #>   [5] ggplot2_3.3.5               tidymass_0.99.4             #>   [7] knitr_1.37                  DelayedArray_0.20.0         #>   [9] data.table_1.14.2           rpart_4.1.16                #>  [11] KEGGREST_1.34.0             RCurl_1.98-1.5              #>  [13] doParallel_1.0.17           generics_0.1.2              #>  [15] snow_0.4-4                  leaflet_2.1.0               #>  [17] BiocGenerics_0.40.0         preprocessCore_1.56.0       #>  [19] mixOmics_6.18.1             RANN_2.6.1                  #>  [21] proxy_0.4-26                future_1.23.0               #>  [23] tzdb_0.2.0                  xml2_1.3.3                  #>  [25] lubridate_1.8.0             ggsci_2.9                   #>  [27] SummarizedExperiment_1.24.0 assertthat_0.2.1            #>  [29] tidyverse_1.3.1             viridis_0.6.2               #>  [31] xfun_0.29                   hms_1.1.1                   #>  [33] jquerylib_0.1.4             evaluate_0.15               #>  [35] DEoptimR_1.0-10             fansi_1.0.2                 #>  [37] dbplyr_2.1.1                readxl_1.3.1                #>  [39] igraph_1.2.11               DBI_1.1.2                   #>  [41] htmlwidgets_1.5.4           MsFeatures_1.3.0            #>  [43] massprocesser_0.99.3        rARPACK_0.11-0              #>  [45] stats4_4.1.2                purrr_0.3.4                 #>  [47] ellipsis_0.3.2              RSpectra_0.16-0             #>  [49] crosstalk_1.2.0             dplyr_1.0.8                 #>  [51] backports_1.4.1             ggcorrplot_0.1.3            #>  [53] MatrixGenerics_1.6.0        vctrs_0.3.8                 #>  [55] Biobase_2.54.0              remotes_2.4.2               #>  [57] cachem_1.0.6                withr_2.4.3                 #>  [59] ggforce_0.3.3               itertools_0.1-3             #>  [61] robustbase_0.93-9           checkmate_2.0.0             #>  [63] cluster_2.1.2               lazyeval_0.2.2              #>  [65] crayon_1.5.0                ellipse_0.4.2               #>  [67] pkgconfig_2.0.3             tweenr_1.0.2                #>  [69] GenomeInfoDb_1.30.0         ProtGenerics_1.26.0         #>  [71] nnet_7.3-17                 rlang_1.0.1                 #>  [73] globals_0.14.0              lifecycle_1.0.1             #>  [75] affyio_1.64.0               extrafontdb_1.0             #>  [77] fastDummies_1.6.3           MassSpecWavelet_1.60.0      #>  [79] modelr_0.1.8                cellranger_1.1.0            #>  [81] randomForest_4.7-1          rprojroot_2.0.2             #>  [83] polyclip_1.10-0             matrixStats_0.61.0          #>  [85] Matrix_1.4-0                reprex_2.0.1                #>  [87] base64enc_0.1-3             GlobalOptions_0.1.2         #>  [89] png_0.1-7                   viridisLite_0.4.0           #>  [91] rjson_0.2.21                mzR_2.28.0                  #>  [93] clisymbols_1.2.0            bitops_1.0-7                #>  [95] pander_0.6.4                Biostrings_2.62.0           #>  [97] shape_1.4.6                 stringr_1.4.0               #>  [99] parallelly_1.30.0           robust_0.7-0                #> [101] readr_2.1.2                 jpeg_0.1-9                  #> [103] gridGraphics_0.5-1          S4Vectors_0.32.3            #> [105] scales_1.1.1                memoise_2.0.1               #> [107] magrittr_2.0.2              plyr_1.8.6                  #> [109] zlibbioc_1.40.0             compiler_4.1.2              #> [111] RColorBrewer_1.1-2          pcaMethods_1.86.0           #> [113] clue_0.3-60                 rrcov_1.6-2                 #> [115] cli_3.2.0                   affy_1.72.0                 #> [117] XVector_0.34.0              listenv_0.8.0               #> [119] patchwork_1.1.1             pbapply_1.5-0               #> [121] htmlTable_2.4.0             Formula_1.2-4               #> [123] MASS_7.3-55                 tidyselect_1.1.1            #> [125] vsn_3.62.0                  stringi_1.7.6               #> [127] forcats_0.5.1               textshaping_0.3.6           #> [129] yaml_2.3.4                  latticeExtra_0.6-29         #> [131] MALDIquant_1.21             ggrepel_0.9.1               #> [133] grid_4.1.2                  sass_0.4.0                  #> [135] xcms_3.16.1                 metid_1.2.2                 #> [137] tools_4.1.2                 parallel_4.1.2              #> [139] circlize_0.4.14             rstudioapi_0.13             #> [141] MsCoreUtils_1.6.0           foreach_1.5.2               #> [143] foreign_0.8-82              masscleaner_0.99.3          #> [145] gridExtra_2.3               masstools_0.99.3            #> [147] farver_2.1.0                mzID_1.32.0                 #> [149] ggraph_2.0.5                rvcheck_0.2.1               #> [151] digest_0.6.29               BiocManager_1.30.16         #> [153] Rcpp_1.0.8                  GenomicRanges_1.46.1        #> [155] broom_0.7.12                ncdf4_1.19                  #> [157] httr_1.4.2                  MSnbase_2.20.4              #> [159] ComplexHeatmap_2.10.0       colorspace_2.0-2            #> [161] rvest_1.0.2                 XML_3.99-0.8                #> [163] fs_1.5.2                    IRanges_2.28.0              #> [165] splines_4.1.2               yulab.utils_0.0.4           #> [167] massdataset_0.99.9          graphlayouts_0.8.0          #> [169] pkgdown_2.0.2               ggplotify_0.1.0             #> [171] plotly_4.10.0               systemfonts_1.0.3           #> [173] fit.models_0.64             jsonlite_1.7.3              #> [175] tidygraph_1.2.0             corpcor_1.6.10              #> [177] R6_2.5.1                    Hmisc_4.6-0                 #> [179] pillar_1.7.0                htmltools_0.5.2             #> [181] glue_1.6.1                  fastmap_1.1.0               #> [183] massqc_0.99.3               BiocParallel_1.28.3         #> [185] class_7.3-20                codetools_0.2-18            #> [187] pcaPP_1.9-74                mvtnorm_1.1-3               #> [189] furrr_0.2.3                 utf8_1.2.2                  #> [191] lattice_0.20-45             bslib_0.3.1                 #> [193] tibble_3.1.6                massstat_0.99.6             #> [195] ggfortify_0.4.14            zip_2.2.0                   #> [197] openxlsx_4.2.5              Rttf2pt1_1.3.9              #> [199] survival_3.2-13             limma_3.50.0                #> [201] rmarkdown_2.11              desc_1.4.0                  #> [203] munsell_0.5.0               e1071_1.7-9                 #> [205] GetoptLong_1.0.5            GenomeInfoDbData_1.2.7      #> [207] iterators_1.0.14            impute_1.68.0               #> [209] haven_2.4.3                 reshape2_1.4.4              #> [211] gtable_0.3.0                extrafont_0.17"},{"path":"https://tidymass.github.io/tidymass/articles/version0.4.0.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"tidymass","text":"","code":"sessionInfo() #> R Under development (unstable) (2022-01-11 r81473) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur/Monterey 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] dplyr_1.0.7          masstools_0.99.1     metid_1.1.0          #>  [4] metpath_0.0.1        massstat_0.0.1       ggfortify_0.4.14     #>  [7] ggplot2_3.3.5        massqc_0.0.1         masscleaner_0.9.2    #> [10] xcms_3.17.1          MSnbase_2.21.3       ProtGenerics_1.27.2  #> [13] S4Vectors_0.33.10    mzR_2.29.1           Rcpp_1.0.7           #> [16] Biobase_2.55.0       BiocGenerics_0.41.2  BiocParallel_1.29.10 #> [19] massprocesser_0.9.2  magrittr_2.0.1       tinytools_0.9.1      #> [22] massdataset_0.99.1   tidymass_0.0.1       #>  #> loaded via a namespace (and not attached): #>   [1] utf8_1.2.2                  tidyselect_1.1.1            #>   [3] robust_0.6-1                htmlwidgets_1.5.4           #>   [5] grid_4.2.0                  devtools_2.4.3              #>   [7] munsell_0.5.0               codetools_0.2-18            #>   [9] ragg_1.2.1                  preprocessCore_1.57.0       #>  [11] future_1.23.0               withr_2.4.3                 #>  [13] colorspace_2.0-2            knitr_1.37                  #>  [15] rstudioapi_0.13             robustbase_0.93-8           #>  [17] listenv_0.8.0               mzID_1.33.0                 #>  [19] MatrixGenerics_1.7.0        GenomeInfoDbData_1.2.7      #>  [21] polyclip_1.10-0             farver_2.1.0                #>  [23] rprojroot_2.0.2             parallelly_1.30.0           #>  [25] vctrs_0.3.8                 generics_0.1.1              #>  [27] xfun_0.29                   itertools_0.1-3             #>  [29] randomForest_4.6-14         R6_2.5.1                    #>  [31] doParallel_1.0.16           GenomeInfoDb_1.31.1         #>  [33] graphlayouts_0.8.0          clue_0.3-60                 #>  [35] MsCoreUtils_1.7.1           bitops_1.0-7                #>  [37] cachem_1.0.6                gridGraphics_0.5-1          #>  [39] DelayedArray_0.21.2         assertthat_0.2.1            #>  [41] scales_1.1.1                ggraph_2.0.5                #>  [43] gtable_0.3.0                globals_0.14.0              #>  [45] affy_1.73.0                 processx_3.5.2              #>  [47] tidygraph_1.2.0             rlang_0.4.12                #>  [49] clisymbols_1.2.0            systemfonts_1.0.3           #>  [51] GlobalOptions_0.1.2         lazyeval_0.2.2              #>  [53] impute_1.69.0               broom_0.7.11                #>  [55] BiocManager_1.30.16         yaml_2.2.1                  #>  [57] modelr_0.1.8                stevedore_0.9.4             #>  [59] crosstalk_1.2.0             backports_1.4.1             #>  [61] MassSpecWavelet_1.61.0      usethis_2.1.5               #>  [63] tools_4.2.0                 ggplotify_0.1.0             #>  [65] affyio_1.65.0               ellipsis_0.3.2              #>  [67] jquerylib_0.1.4             RColorBrewer_1.1-2          #>  [69] proxy_0.4-26                sessioninfo_1.2.2           #>  [71] plyr_1.8.6                  zlibbioc_1.41.0             #>  [73] purrr_0.3.4                 RCurl_1.98-1.5              #>  [75] prettyunits_1.1.1           ps_1.6.0                    #>  [77] viridis_0.6.2               pbapply_1.5-0               #>  [79] GetoptLong_1.0.5            SummarizedExperiment_1.25.3 #>  [81] massconverter_0.99.1        haven_2.4.3                 #>  [83] ggrepel_0.9.1               cluster_2.1.2               #>  [85] fs_1.5.2                    furrr_0.2.3                 #>  [87] data.table_1.14.2           openxlsx_4.2.5              #>  [89] circlize_0.4.14             reprex_2.0.1                #>  [91] RANN_2.6.1                  pcaMethods_1.87.0           #>  [93] mvtnorm_1.1-2               matrixStats_0.61.0          #>  [95] pkgload_1.2.4               hms_1.1.1                   #>  [97] patchwork_1.1.1             evaluate_0.14               #>  [99] XML_3.99-0.8                leaflet_2.0.4.1             #> [101] readxl_1.3.1                IRanges_2.29.1              #> [103] gridExtra_2.3               shape_1.4.6                 #> [105] testthat_3.1.1              compiler_4.2.0              #> [107] tibble_3.1.6                ncdf4_1.17                  #> [109] crayon_1.4.2                htmltools_0.5.2             #> [111] pcaPP_1.9-74                tzdb_0.2.0                  #> [113] tidyr_1.1.4                 rrcov_1.6-0                 #> [115] lubridate_1.8.0             DBI_1.1.2                   #> [117] tweenr_1.0.2                dbplyr_2.1.1                #> [119] ComplexHeatmap_2.11.0       MASS_7.3-55                 #> [121] MsFeatures_1.3.0            Matrix_1.4-0                #> [123] readr_2.1.1                 cli_3.1.0                   #> [125] vsn_3.63.0                  igraph_1.2.6                #> [127] parallel_4.2.0              GenomicRanges_1.47.6        #> [129] forcats_0.5.1               pkgconfig_2.0.3             #> [131] fit.models_0.64             pkgdown_2.0.1               #> [133] plotly_4.10.0               MALDIquant_1.21             #> [135] xml2_1.3.3                  foreach_1.5.1               #> [137] ggcorrplot_0.1.3            bslib_0.3.1                 #> [139] missForest_1.4              XVector_0.35.0              #> [141] rvest_1.0.2                 yulab.utils_0.0.4           #> [143] callr_3.7.0                 stringr_1.4.0               #> [145] digest_0.6.29               Biostrings_2.63.1           #> [147] rmarkdown_2.11              cellranger_1.1.0            #> [149] curl_4.3.2                  rjson_0.2.21                #> [151] lifecycle_1.0.1             jsonlite_1.7.2              #> [153] desc_1.4.0                  viridisLite_0.4.0           #> [155] limma_3.51.2                fansi_1.0.0                 #> [157] pillar_1.6.4                ggsci_2.9                   #> [159] lattice_0.20-45             pkgbuild_1.3.1              #> [161] KEGGREST_1.35.0             fastmap_1.1.0               #> [163] httr_1.4.2                  DEoptimR_1.0-10             #> [165] remotes_2.4.2               glue_1.6.0                  #> [167] zip_2.2.0                   png_0.1-7                   #> [169] iterators_1.0.13            ggforce_0.3.3               #> [171] class_7.3-20                stringi_1.7.6               #> [173] sass_0.4.0                  textshaping_0.3.6           #> [175] memoise_2.0.1               tidyverse_1.3.1             #> [177] e1071_1.7-9"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"data-preparation","dir":"Articles","previous_headings":"","what":"Data preparation","title":"Whole workflow using tidymass","text":"Download demo data refer article. positive negative mode. mode, control, case QC groups. Control group 110 samples, case group 110 samples well.","code":"library(tidymass) library(tidyverse)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"raw-data-processing","dir":"Articles","previous_headings":"","what":"Raw data processing","title":"Whole workflow using tidymass","text":"massprocesser package used raw data processing. Please refer website.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode","dir":"Articles","previous_headings":"Raw data processing","what":"Positive mode","title":"Whole workflow using tidymass","text":"code used raw data processing. results placed folder named mzxml_ms1_data/POS/Result. information can found .  can just load object, mass_dataset class object. can see 10,149 metabolic features positive mode.  can use plot_adjusted_rt() function get interactive plot.","code":"process_data(   path = \"mzxml_ms1_data/POS\",   polarity = \"positive\",   ppm = 10,   peakwidth = c(10, 60),   threads = 4,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" ) #> Reading raw data, it will take a while... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Detecting peaks... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Correcting rentention time... #>   #> Use old saved data in Result. #>  #> ✔ OK #>  #> Grouping peaks across samples... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Outputting peak table... #>  #> ✔ OK #>  #> OK #>  #> ✔ All done! #> load(\"mzxml_ms1_data/POS/Result/object\") object #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 10149 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 10149 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:37:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:36:42 load(\"mzxml_ms1_data/POS/Result/intermediate_data/xdata2\") ####set the group_for_figure if you want to show specific groups.  ####And set it as \"all\" if you want to show all samples. plot <- massprocesser::plot_adjusted_rt(object = xdata2,                   group_for_figure = \"QC\",                   interactive = TRUE) plot"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode","dir":"Articles","previous_headings":"Raw data processing","what":"Negative mode","title":"Whole workflow using tidymass","text":"processing negative mode positive mode data. positive mode, change polarity negative. positive mode. can see 8,804 metabolic features negative mode.","code":"massprocesser::process_data(   path = \"mzxml_ms1_data/NEG\",   polarity = \"negative\",   ppm = 10,   peakwidth = c(10, 60),   threads = 4,   output_tic = FALSE,   output_bpc = FALSE,   output_rt_correction_plot = FALSE,   min_fraction = 0.5,   group_for_figure = \"QC\" ) #> Reading raw data, it will take a while... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Detecting peaks... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Correcting rentention time... #>   #> Use old saved data in Result. #>  #> ✔ OK #>  #> Grouping peaks across samples... #>  #> Use old saved data in Result. #>  #> ✔ OK #>  #> Outputting peak table... #>  #> ✔ OK #>  #> OK #>  #> ✔ All done! #> load(\"mzxml_ms1_data/NEG/Result/object\") object #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 8804 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 8804 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:38:19 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:38:02"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"explore-data","dir":"Articles","previous_headings":"","what":"Explore data","title":"Whole workflow using tidymass","text":"raw data processing, peak tables positive negative mode generated.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-1","dir":"Articles","previous_headings":"Explore data","what":"Positive mode","title":"Whole workflow using tidymass","text":"Read sample information. Add sample_info_pos object_pos positive mode, 259 samples 10149 variables. 220 subject samples 39 QC samples. 110 control samples 110 case samples. Two batches total, 112 samples batch 1 147 batch 2. Next, can get peak distributation plot positive mode.  can explore missing values positive mode data. 785,821 mvs total. Missing value number sample. Missing value number variable. can use figure show missing value information.  Show mvs samples  Show mvs variables","code":"load(\"mzxml_ms1_data/POS/Result/object\") object_pos <- object object_pos #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 10149 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 10149 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:37:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:36:42 sample_info_pos <- readr::read_csv(\"sample_info/sample_info_pos.csv\") #> Rows: 259 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_pos) #> # A tibble: 6 × 6 #>   sample_id    injection.order class   batch subject_id  group   #>   <chr>                  <dbl> <chr>   <dbl> <chr>       <chr>   #> 1 sample_QC_01               1 QC          1 NA          QC      #> 2 sample_01                  2 Subject     1 subject_474 Control #> 3 sample_02                  3 Subject     1 subject_431 Control #> 4 sample_06                  4 Subject     1 subject_414 Case    #> 5 sample_07                  5 Subject     1 subject_830 Control #> 6 sample_11                  6 Subject     1 subject_125 Case object_pos %>%    extract_sample_info() %>%    head() #>    sample_id group   class injection.order #> 1  sample_06  Case Subject               1 #> 2 sample_103  Case Subject               2 #> 3  sample_11  Case Subject               3 #> 4 sample_112  Case Subject               4 #> 5 sample_117  Case Subject               5 #> 6  sample_12  Case Subject               6  object_pos <-    object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_pos <-   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_pos,             by = \"sample_id\")  object_pos %>%    extract_sample_info() %>%    head() #>    sample_id injection.order   class batch  subject_id group #> 1  sample_06               4 Subject     1 subject_414  Case #> 2 sample_103              71 Subject     1 subject_330  Case #> 3  sample_11               6 Subject     1 subject_125  Case #> 4 sample_112              78 Subject     1 subject_295  Case #> 5 sample_117              80 Subject     1 subject_793  Case #> 6  sample_12               8 Subject     1 subject_387  Case dim(object_pos) #> [1] 10149   259 object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(class) #>     class   n #> 1      QC  39 #> 2 Subject 220  object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39  object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(batch) #>   batch   n #> 1     1 112 #> 2     2 147 object_pos %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2)) get_mv_number(object = object_pos) #> [1] 785821 get_mv_number(object = object_pos, by = \"variable\") %>%    head() #>  M70T73_POS  M70T53_POS M70T183_POS M70T527_POS M71T695_POS M71T183_POS  #>         129          16         155          54         133         169 show_missing_values(object = object_pos,                      show_column_names = FALSE, percentage = TRUE) show_sample_missing_values(object = object_pos, percentage = TRUE) show_variable_missing_values(object = object_pos,                               percentage = TRUE,                               show_x_text = FALSE,                               show_x_ticks = FALSE) +   scale_size_continuous(range = c(0.01, 1))"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode-1","dir":"Articles","previous_headings":"Explore data","what":"Negative mode","title":"Whole workflow using tidymass","text":"Load object. Read sample information. Add sample_info_neg object_neg negative mode, 259 samples 8804 variables. 220 subject samples 39 QC samples. 110 control samples 110 case samples. Two batches total, 112 samples batch 1 147 batch 2. Next, can get peak distributation plot negative mode.  can explore missing values negitive mode data. Missing value number sample. Missing value number variable. can use figure show missing value information.  Show mvs samples  Show mvs variables","code":"load(\"mzxml_ms1_data/NEG/Result/object\") object_neg = object object_neg #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 8804 x 259 data.frame] #> 2.sample_info:[ 259 x 4 data.frame] #> 3.variable_info:[ 8804 x 3 data.frame] #> 4.sample_info_note:[ 4 x 2 data.frame] #> 5.variable_info_note:[ 3 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:38:19 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:38:02 sample_info_neg = readr::read_csv(\"sample_info/sample_info_neg.csv\") #> Rows: 259 Columns: 6 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (4): sample_id, class, subject_id, group #> dbl (2): injection.order, batch #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message. head(sample_info_neg) #> # A tibble: 6 × 6 #>   sample_id    injection.order class   batch subject_id  group   #>   <chr>                  <dbl> <chr>   <dbl> <chr>       <chr>   #> 1 sample_QC_01               1 QC          1 NA          QC      #> 2 sample_01                  2 Subject     1 subject_474 Control #> 3 sample_02                  3 Subject     1 subject_431 Control #> 4 sample_06                  4 Subject     1 subject_414 Case    #> 5 sample_07                  5 Subject     1 subject_830 Control #> 6 sample_11                  6 Subject     1 subject_125 Case object_neg %>%    extract_sample_info() %>%    head() #>    sample_id group   class injection.order #> 1  sample_06  Case Subject               1 #> 2 sample_103  Case Subject               2 #> 3  sample_11  Case Subject               3 #> 4 sample_112  Case Subject               4 #> 5 sample_117  Case Subject               5 #> 6  sample_12  Case Subject               6  object_neg <-    object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%   dplyr::select(-c(\"group\", \"class\", \"injection.order\")) object_neg <-   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   left_join(sample_info_neg,             by = \"sample_id\")  object_neg %>%    extract_sample_info() %>%    head() #>    sample_id injection.order   class batch  subject_id group #> 1  sample_06               4 Subject     1 subject_414  Case #> 2 sample_103              71 Subject     1 subject_330  Case #> 3  sample_11               6 Subject     1 subject_125  Case #> 4 sample_112              78 Subject     1 subject_295  Case #> 5 sample_117              80 Subject     1 subject_793  Case #> 6  sample_12               8 Subject     1 subject_387  Case dim(object_neg) #> [1] 8804  259 object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(class) #>     class   n #> 1      QC  39 #> 2 Subject 220  object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39  object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(batch) #>   batch   n #> 1     1  86 #> 2     2 173 object_neg %>%   `+`(1) %>%    log(10) %>%   show_mz_rt_plot() +   scale_size_continuous(range = c(0.01, 2)) get_mv_number(object = object_neg) #> [1] 748253 get_mv_number(object = object_neg, by = \"sample\") %>%    head() #>  sample_06 sample_103  sample_11 sample_112 sample_117  sample_12  #>       3029       2766       3298       3100       2912       3053 get_mv_number(object = object_neg, by = \"variable\") %>%    head() #> M70T712_NEG M70T527_NEG M70T587_NEG  M70T47_NEG M71T587_NEG M71T641_NEG  #>          16         137           2         146          41          19 show_missing_values(object = object_neg, show_column_names = FALSE, percentage = TRUE) show_sample_missing_values(object = object_neg, percentage = TRUE) show_variable_missing_values(object = object_neg,                               percentage = TRUE,                               show_x_text = FALSE,                               show_x_ticks = FALSE) +   scale_size_continuous(range = c(0.01, 1))"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"data-quality-assessment-before-data-cleaning","dir":"Articles","previous_headings":"Data cleaning","what":"Data quality assessment before data cleaning","title":"Whole workflow using tidymass","text":"Change batch character. , can use massqc package assess data quality. can just use massqc_report() function get html format quality assessment report.","code":"object_pos <-    object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch))  object_neg <-    object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::mutate(batch = as.character(batch))"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-2","dir":"Articles","previous_headings":"Data cleaning > Data quality assessment before data cleaning","what":"Positive mode","title":"Whole workflow using tidymass","text":"html format report pdf figures placed folder data_cleaning/POS/data_quality_before_data_cleaning/Report.  html report :","code":"massqc::massqc_report(object = object_pos,                        path = \"data_cleaning/POS/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode-","dir":"Articles","previous_headings":"Data cleaning > Data quality assessment before data cleaning","what":"Negative mode.","title":"Whole workflow using tidymass","text":"PCA score plot used show batch effect positive negative dataset. Positive mode:  Negative mode:","code":"massqc::massqc_report(object = object_neg,                        path = \"data_cleaning/NEG/data_quality_before_data_cleaning\")"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"remove-noisy-metabolic-features","dir":"Articles","previous_headings":"Data cleaning","what":"Remove noisy metabolic features","title":"Whole workflow using tidymass","text":"Remove variables MVs 20% QC samples lest 50% samples control group case group.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-3","dir":"Articles","previous_headings":"Data cleaning > Remove noisy metabolic features","what":"Positive mode","title":"Whole workflow using tidymass","text":"MV percentage QC samples.  Remove variables. 5,101 variables left.","code":"object_pos %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39 show_variable_missing_values(object = object_pos %>%                                 activate_mass_dataset(what = \"sample_info\") %>%                                 filter(class == \"QC\"),                               percentage = TRUE) +   scale_size_continuous(range = c(0.01, 2)) qc_id =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Control\") %>%   pull(sample_id)  case_id =   object_pos %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Case\") %>%   pull(sample_id)  object_pos =   object_pos %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id)  head(extract_variable_info(object_pos)) #>   variable_id       mz        rt    na_freq na_freq.1 na_freq.2 #> 1  M70T73_POS 70.04074  73.31705 0.28205128 0.6000000 0.4727273 #> 2  M70T53_POS 70.06596  52.78542 0.00000000 0.1454545 0.0000000 #> 3 M70T183_POS 70.19977 182.87981 0.00000000 0.6636364 0.7454545 #> 4 M70T527_POS 70.36113 526.76657 0.02564103 0.1818182 0.3000000 #> 5 M71T695_POS 70.56911 694.84592 0.02564103 0.6454545 0.5545455 #> 6 M71T183_POS 70.75034 182.77790 0.05128205 0.7272727 0.7909091 object_pos <-    object_pos %>%    activate_mass_dataset(what = \"variable_info\") %>%   filter(na_freq < 0.2 & (na_freq.1 < 0.5 | na_freq.2 < 0.5)) object_pos #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 5101 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 5101 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:37:06 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:36:42 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-02-22 16:38:55 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-02-22 16:38:58 #> 2 massdataset mutate_variable_na_freq() 2022-02-22 16:38:58 #> 3 massdataset mutate_variable_na_freq() 2022-02-22 16:39:00 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-02-22 16:39:01"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode-2","dir":"Articles","previous_headings":"Data cleaning > Remove noisy metabolic features","what":"Negative mode","title":"Whole workflow using tidymass","text":"MV percentage QC samples.  Remove variables. 4,104 features left.","code":"object_neg %>%    activate_mass_dataset(what = \"sample_info\") %>%    dplyr::count(group) #>     group   n #> 1    Case 110 #> 2 Control 110 #> 3      QC  39 show_variable_missing_values(object = object_neg %>%                                 activate_mass_dataset(what = \"sample_info\") %>%                                 filter(class == \"QC\"),                               percentage = TRUE) +   scale_size_continuous(range = c(0.01, 2)) qc_id =   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(class == \"QC\") %>%   pull(sample_id)  control_id =   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Control\") %>%   pull(sample_id)  case_id =   object_neg %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Case\") %>%   pull(sample_id)  object_neg =   object_neg %>%   mutate_variable_na_freq(according_to_samples = qc_id) %>%   mutate_variable_na_freq(according_to_samples = control_id) %>%   mutate_variable_na_freq(according_to_samples = case_id)  head(extract_variable_info(object_neg)) #>   variable_id       mz        rt    na_freq   na_freq.1   na_freq.2 #> 1 M70T712_NEG 70.05911 711.97894 0.05128205 0.109090909 0.018181818 #> 2 M70T527_NEG 70.13902 526.85416 0.33333333 0.509090909 0.618181818 #> 3 M70T587_NEG 70.31217 587.25330 0.00000000 0.009090909 0.009090909 #> 4  M70T47_NEG 70.33835  46.57537 0.84615385 0.936363636 0.090909091 #> 5 M71T587_NEG 70.56315 587.02570 0.17948718 0.145454545 0.163636364 #> 6 M71T641_NEG 70.70657 641.16672 0.10256410 0.063636364 0.072727273 object_neg <-    object_neg %>%    activate_mass_dataset(what = \"variable_info\") %>%   filter(na_freq < 0.2 & (na_freq.1 < 0.5 | na_freq.2 < 0.5)) object_neg #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 4104 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 4104 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 0 variables x 0 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-02-22 16:38:19 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-02-22 16:38:02 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-02-22 16:38:55 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-02-22 16:39:02 #> 2 massdataset mutate_variable_na_freq() 2022-02-22 16:39:02 #> 3 massdataset mutate_variable_na_freq() 2022-02-22 16:39:02 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-02-22 16:39:03"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"filter-outlier-samples","dir":"Articles","previous_headings":"Data cleaning","what":"Filter outlier samples","title":"Whole workflow using tidymass","text":"can use detect_outlier() find outlier samples. information detect outlier samples can found .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-4","dir":"Articles","previous_headings":"Data cleaning > Filter outlier samples","what":"Positive mode","title":"Whole workflow using tidymass","text":"Detect outlier samples. outlier samples positive mode.","code":"massdataset::show_sample_missing_values(object = object_pos,                                         color_by = \"group\",                                         order_by = \"injection.order\",                                         percentage = TRUE) +   theme(axis.text.x = element_text(size = 2)) +   scale_size_continuous(range = c(0.1, 2)) +   ggsci::scale_color_aaas() outlier_samples <-   object_pos %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 0 outlier samples. #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #> outlier_table <- extract_outlier_table(outlier_samples)  outlier_table %>%    head() #>            according_to_na pc_sd pc_mad accordint_to_distance #> sample_06            FALSE FALSE  FALSE                 FALSE #> sample_103           FALSE FALSE  FALSE                 FALSE #> sample_11            FALSE FALSE  FALSE                 FALSE #> sample_112           FALSE FALSE  FALSE                 FALSE #> sample_117           FALSE FALSE  FALSE                 FALSE #> sample_12            FALSE FALSE  FALSE                 FALSE  outlier_table %>%    apply(1, function(x){     sum(x)   }) %>%    `>`(0) %>%    which() #> named integer(0)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode-3","dir":"Articles","previous_headings":"Data cleaning > Filter outlier samples","what":"Negative mode","title":"Whole workflow using tidymass","text":"Detect outlier samples. outlier samples negative mode.","code":"massdataset::show_sample_missing_values(object = object_neg,                                         color_by = \"group\",                                         order_by = \"injection.order\",                                         percentage = TRUE) +   theme(axis.text.x = element_text(size = 2)) +   scale_size_continuous(range = c(0.1, 2)) +   ggsci::scale_color_aaas() outlier_samples <-   object_neg %>%   `+`(1) %>%    log(2) %>%   scale() %>%   detect_outlier()  outlier_samples #> --------------------  #> masscleaner  #> --------------------  #> 1 according_to_na : 0 outlier samples. #> 2 according_to_pc_sd : 0 outlier samples. #> 3 according_to_pc_mad : 0 outlier samples. #> 4 accordint_to_distance : 0 outlier samples. #> extract all outlier table using extract_outlier_table() #> outlier_table <- extract_outlier_table(outlier_samples)  outlier_table %>%    head() #>            according_to_na pc_sd pc_mad accordint_to_distance #> sample_06            FALSE FALSE  FALSE                 FALSE #> sample_103           FALSE FALSE  FALSE                 FALSE #> sample_11            FALSE FALSE  FALSE                 FALSE #> sample_112           FALSE FALSE  FALSE                 FALSE #> sample_117           FALSE FALSE  FALSE                 FALSE #> sample_12            FALSE FALSE  FALSE                 FALSE  outlier_table %>%    apply(1, function(x){     sum(x)   }) %>%    `>`(0) %>%    which() #> named integer(0)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"missing-value-imputation","dir":"Articles","previous_headings":"Data cleaning","what":"Missing value imputation","title":"Whole workflow using tidymass","text":"","code":"get_mv_number(object_pos) #> [1] 148965 object_pos <-    impute_mv(object = object_pos, method = \"knn\") #> Cluster size 4983 broken into 88 4895  #> Done cluster 88  #> Cluster size 4895 broken into 4497 398  #> Cluster size 4497 broken into 3737 760  #> Cluster size 3737 broken into 2703 1034  #> Cluster size 2703 broken into 1706 997  #> Cluster size 1706 broken into 1240 466  #> Done cluster 1240  #> Done cluster 466  #> Done cluster 1706  #> Done cluster 997  #> Done cluster 2703  #> Done cluster 1034  #> Done cluster 3737  #> Done cluster 760  #> Done cluster 4497  #> Done cluster 398  #> Done cluster 4895  get_mv_number(object_pos) #> [1] 0 get_mv_number(object_neg) #> [1] 146427  object_neg <-    impute_mv(object = object_neg, method = \"knn\") #> Cluster size 4006 broken into 3965 41  #> Cluster size 3965 broken into 3743 222  #> Cluster size 3743 broken into 505 3238  #> Done cluster 505  #> Cluster size 3238 broken into 2519 719  #> Cluster size 2519 broken into 1721 798  #> Cluster size 1721 broken into 676 1045  #> Done cluster 676  #> Done cluster 1045  #> Done cluster 1721  #> Done cluster 798  #> Done cluster 2519  #> Done cluster 719  #> Done cluster 3238  #> Done cluster 3743  #> Done cluster 222  #> Done cluster 3965  #> Done cluster 41  get_mv_number(object_neg) #> [1] 0"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-5","dir":"Articles","previous_headings":"Data cleaning > Data normalization and integration","what":"Positive mode","title":"Whole workflow using tidymass","text":"","code":"object_pos <-    normalize_data(object_pos, method = \"median\")  object_pos2 <-    integrate_data(object_pos, method = \"subject_median\") object_pos2 %>%    `+`(1) %>%    log(2) %>%    massqc::massqc_pca(color_by = \"batch\", line = FALSE)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode-4","dir":"Articles","previous_headings":"Data cleaning > Data normalization and integration","what":"Negative mode","title":"Whole workflow using tidymass","text":"","code":"object_neg <-    normalize_data(object_neg, method = \"median\")  object_neg2 <-    integrate_data(object_neg, method = \"subject_median\") object_neg2 %>%    `+`(1) %>%    log(2) %>%    massqc::massqc_pca(color_by = \"batch\", line = FALSE)"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"add-ms2-spectra-to-object","dir":"Articles","previous_headings":"Metabolite annotation","what":"Add MS2 spectra to object","title":"Whole workflow using tidymass","text":"Download MS2 data . Uncompress .","code":""},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-6","dir":"Articles","previous_headings":"Metabolite annotation > Add MS2 spectra to object","what":"Positive mode","title":"Whole workflow using tidymass","text":"","code":"object_pos2 <-   mutate_ms2(     object = object_pos2,     column = \"rp\",     polarity = \"positive\",     ms1.ms2.match.mz.tol = 15,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/POS\"   )"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode-5","dir":"Articles","previous_headings":"Metabolite annotation > Add MS2 spectra to object","what":"Negative mode","title":"Whole workflow using tidymass","text":"","code":"object_neg2 <-   mutate_ms2(     object = object_neg2,     column = \"rp\",     polarity = \"negative\",     ms1.ms2.match.mz.tol = 15,     ms1.ms2.match.rt.tol = 30,     path = \"mgf_ms2_data/NEG\"   )"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"metabolite-annotation-using-metid","dir":"Articles","previous_headings":"Metabolite annotation","what":"Metabolite annotation using metid","title":"Whole workflow using tidymass","text":"Metabolite annotation based metid package.","code":""},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"download-database","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid","what":"Download database","title":"Whole workflow using tidymass","text":"need download MS2 database metid website. download Michael Snyder RPLC databases, Orbitrap database MoNA database. place new folder named metabolite_annotation.","code":""},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotate-features-using-snyder_database_rplc0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > Positive mode","what":"Annotate features using snyder_database_rplc0.0.3.","title":"Whole workflow using tidymass","text":"","code":"load(\"metabolite_annotation/snyder_database_rplc0.0.3.rda\") object_pos2 =    annotate_metabolites_mass_dataset(object = object_pos2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                      polarity = \"positive\",                                     database = snyder_database_rplc0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotate-features-using-orbitrap_database0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > Positive mode","what":"Annotate features using orbitrap_database0.0.3.","title":"Whole workflow using tidymass","text":"","code":"load(\"metabolite_annotation/orbitrap_database0.0.3.rda\") object_pos2 =    annotate_metabolites_mass_dataset(object = object_pos2,                                      ms1.match.ppm = 15,                                      polarity = \"positive\",                                     database = orbitrap_database0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotate-features-using-mona_database0-0-3-","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > Positive mode","what":"Annotate features using mona_database0.0.3.","title":"Whole workflow using tidymass","text":"","code":"load(\"metabolite_annotation/mona_database0.0.3.rda\") object_pos2 =    annotate_metabolites_mass_dataset(object = object_pos2,                                      ms1.match.ppm = 15,                                      polarity = \"positive\",                                     database = mona_database0.0.3)"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotate-features-using-snyder_database_rplc0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > Negative mode","what":"Annotate features using snyder_database_rplc0.0.3.","title":"Whole workflow using tidymass","text":"","code":"object_neg2 =    annotate_metabolites_mass_dataset(object = object_neg2,                                      ms1.match.ppm = 15,                                      rt.match.tol = 30,                                     polarity = \"negative\",                                     database = snyder_database_rplc0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotate-features-using-orbitrap_database0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > Negative mode","what":"Annotate features using orbitrap_database0.0.3.","title":"Whole workflow using tidymass","text":"","code":"object_neg2 =    annotate_metabolites_mass_dataset(object = object_neg2,                                      ms1.match.ppm = 15,                                      polarity = \"negative\",                                     database = orbitrap_database0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotate-features-using-mona_database0-0-3--1","dir":"Articles","previous_headings":"Metabolite annotation > Metabolite annotation using metid > Negative mode","what":"Annotate features using mona_database0.0.3.","title":"Whole workflow using tidymass","text":"","code":"object_neg2 =    annotate_metabolites_mass_dataset(object = object_neg2,                                      ms1.match.ppm = 15,                                      polarity = \"negative\",                                     database = mona_database0.0.3)"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"annotation-result","dir":"Articles","previous_headings":"Metabolite annotation","what":"Annotation result","title":"Whole workflow using tidymass","text":"","code":"head(extract_annotation_table(object = object_pos2)) #>    variable_id #> 1 M100T160_POS #> 2 M103T100_POS #> 3 M103T100_POS #> 4  M104T51_POS #> 5 M113T187_POS #> 6  M113T81_POS #>                                                                                                                      ms2_files_id #> 1 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 2 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 3 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 4 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 5 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #> 6 QEP_SGA_QC_posi_ms2_ce25_01.mgf;QEP_SGA_QC_posi_ms2_ce25_02.mgf;QEP_SGA_QC_posi_ms2_ce50_01.mgf;QEP_SGA_QC_posi_ms2_ce50_02.mgf #>                  ms2_spectrum_id           Compound.name    CAS.ID   HMDB.ID #> 1 mz100.076248168945rt158.377638  N-Methyl-2-pyrrolidone  872-50-4      <NA> #> 2   mz103.054814801682rt96.92601      Phenylacetaldehyde  122-78-1 HMDB06236 #> 3   mz103.054814801682rt96.92601 3-Amino-2-oxazolidinone   80-65-9      <NA> #> 4  mz104.107467651367rt49.510314      5-Amino-1-pentanol 2508-29-4      <NA> #> 5 mz113.060150146484rt188.406384    1,4-Cyclohexanedione      <NA>      <NA> #> 6   mz113.035087585449rt77.20827                  URACIL      <NA>      <NA> #>   KEGG.ID     Lab.ID     Adduct  mz.error mz.match.score RT.error #> 1  C11118 MONA_11509     (M+H)+  1.335652      0.9960435       NA #> 2  C00601    NO07389 (M+H-H2O)+  1.537004      0.9947640       NA #> 3    <NA>    NO07231     (M+H)+ 11.537004      0.7439487       NA #> 4    <NA>    NO07238     (M+H)+  1.169128      0.9969671       NA #> 5    <NA> MONA_14519     (M+H)+  1.051626      0.9975454       NA #> 6    <NA> MONA_18148     (M+H)+  1.275544      0.9963909       NA #>   RT.match.score                  CE        SS Total.score   Database Level #> 1             NA       35  (nominal) 0.6871252   0.8029696 MoNA_0.0.1     2 #> 2             NA                  10 0.5748835   0.7323387 NIST_0.0.1     2 #> 3             NA                  20 0.5020256   0.5927468 NIST_0.0.1     2 #> 4             NA                   5 0.5971697   0.7470937 NIST_0.0.1     2 #> 5             NA HCD (NCE 20-30-40%) 0.5401414   0.7116679 MoNA_0.0.1     2 #> 6             NA                  10 0.6889885   0.8042644 MoNA_0.0.1     2 variable_info_pos <-  extract_variable_info(object = object_pos2) head(variable_info_pos) #>   variable_id       mz        rt    na_freq  na_freq.1  na_freq.2 Compound.name #> 1  M70T53_POS 70.06596  52.78542 0.00000000 0.14545455 0.00000000          <NA> #> 2 M70T527_POS 70.36113 526.76657 0.02564103 0.18181818 0.30000000          <NA> #> 3 M71T775_POS 70.98125 775.44867 0.00000000 0.00000000 0.00000000          <NA> #> 4 M71T669_POS 70.98125 668.52844 0.00000000 0.02727273 0.01818182          <NA> #> 5 M71T715_POS 70.98125 714.74066 0.05128205 0.12727273 0.02727273          <NA> #> 6  M71T54_POS 71.04999  54.45641 0.15384615 0.99090909 0.05454545          <NA> #>   CAS.ID HMDB.ID KEGG.ID Lab.ID Adduct mz.error mz.match.score RT.error #> 1   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 2   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 3   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 4   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 5   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #> 6   <NA>    <NA>    <NA>   <NA>   <NA>       NA             NA       NA #>   RT.match.score   CE SS Total.score Database Level #> 1             NA <NA> NA          NA     <NA>    NA #> 2             NA <NA> NA          NA     <NA>    NA #> 3             NA <NA> NA          NA     <NA>    NA #> 4             NA <NA> NA          NA     <NA>    NA #> 5             NA <NA> NA          NA     <NA>    NA #> 6             NA <NA> NA          NA     <NA>    NA table(variable_info_pos$Level) #>  #>   1   2  #>  23 183 table(variable_info_pos$Database) #>  #> MoNA_0.0.1   MS_0.0.2 NIST_0.0.1  #>         78         23        105 ms2_plot_mass_dataset(object = object_pos2,                        variable_id = \"M86T95_POS\",                        database = mona_database0.0.3) #> $M86T95_POS_1 #>  #> $M86T95_POS_2 #>  #> $M86T95_POS_3 ms2_plot_mass_dataset(object = object_pos2,                        variable_id = \"M147T54_POS\",                        database = snyder_database_rplc0.0.3,                        interactive_plot = FALSE)"},{"path":[]},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"positive-mode-","dir":"Articles","previous_headings":"Statistical analysis > Remove the features without annotations","what":"Positive mode.","title":"Whole workflow using tidymass","text":"","code":"object_pos2 <-    object_pos2 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2) object_pos2 #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 206 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 206 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 1042 variables x 951 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44 #> 2 massdataset      filter() 2022-02-22 16:39:32 #> 3 massdataset      filter() 2022-02-22 16:39:32 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:02 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:38:07 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:38:08 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:01 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:53:36 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-01-19 22:00:00 #> 2   metid annotate_metabolites_mass_dataset() 2022-01-19 22:23:24 #> 3   metid annotate_metabolites_mass_dataset() 2022-01-19 22:52:50"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"negative-mode--1","dir":"Articles","previous_headings":"Statistical analysis > Remove the features without annotations","what":"Negative mode.","title":"Whole workflow using tidymass","text":"","code":"object_neg2 <-    object_neg2 %>%    activate_mass_dataset(what = \"annotation_table\") %>%    filter(!is.na(Level)) %>%    filter(Level == 1 | Level == 2) object_neg2 #> --------------------  #> massdataset version: 0.99.1  #> --------------------  #> 1.expression_data:[ 165 x 259 data.frame] #> 2.sample_info:[ 259 x 6 data.frame] #> 3.variable_info:[ 165 x 6 data.frame] #> 4.sample_info_note:[ 6 x 2 data.frame] #> 5.variable_info_note:[ 6 x 2 data.frame] #> 6.ms2_data:[ 1092 variables x 988 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47 #> 2 massdataset      filter() 2022-02-22 16:39:32 #> 3 massdataset      filter() 2022-02-22 16:39:32 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:06 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:50:47 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:50:47 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:37 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:54:06 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-01-19 22:57:19 #> 2   metid annotate_metabolites_mass_dataset() 2022-01-19 23:12:58 #> 3   metid annotate_metabolites_mass_dataset() 2022-01-19 23:40:34"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"merge-data","dir":"Articles","previous_headings":"Statistical analysis","what":"Merge data","title":"Whole workflow using tidymass","text":"need merge positive negative mode data one mass_dataset class.","code":"head(colnames(object_pos2)) #> [1] \"sample_06\"  \"sample_103\" \"sample_11\"  \"sample_112\" \"sample_117\" #> [6] \"sample_12\" head(colnames(object_neg2)) #> [1] \"sample_06\"  \"sample_103\" \"sample_11\"  \"sample_112\" \"sample_117\" #> [6] \"sample_12\" object <-  merge_mass_dataset(x = object_pos2,                     y = object_neg2,                     sample_direction = \"inner\",                    variable_direction = \"full\",                     sample_by = \"sample_id\",                     variable_by = c(\"variable_id\", \"mz\", \"rt\")) object #> --------------------  #> massdataset version: 0.99.8  #> --------------------  #> 1.expression_data:[ 371 x 259 data.frame] #> 2.sample_info:[ 259 x 11 data.frame] #> 3.variable_info:[ 371 x 9 data.frame] #> 4.sample_info_note:[ 11 x 2 data.frame] #> 5.variable_info_note:[ 9 x 2 data.frame] #> 6.ms2_data:[ 2084 variables x 1902 MS2 spectra] #> --------------------  #> Processing information (extract_process_info()) #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:19:04 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:18:43 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:43 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:44 #> 2 massdataset      filter() 2022-02-22 16:39:32 #> 3 massdataset      filter() 2022-02-22 16:39:32 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:02 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:38:07 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:38:08 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:01 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:53:36 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-01-19 22:00:00 #> 2   metid annotate_metabolites_mass_dataset() 2022-01-19 22:23:24 #> 3   metid annotate_metabolites_mass_dataset() 2022-01-19 22:52:50 #> create_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset create_mass_dataset() 2022-01-16 16:20:02 #> process_data ----------  #>         Package Function.used                Time #> 1 massprocesser  process_data 2022-01-16 16:19:48 #> mutate ----------  #>       Package Function.used                Time #> 1 massdataset      mutate() 2022-01-16 23:48:08 #> mutate_variable_na_freq ----------  #>       Package             Function.used                Time #> 1 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 2 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> 3 massdataset mutate_variable_na_freq() 2022-01-18 09:11:47 #> filter ----------  #>       Package Function.used                Time #> 1 massdataset      filter() 2022-01-18 09:11:47 #> 2 massdataset      filter() 2022-02-22 16:39:32 #> 3 massdataset      filter() 2022-02-22 16:39:32 #> impute_mv ----------  #>       Package Function.used                Time #> 1 masscleaner   impute_mv() 2022-01-18 09:38:06 #> normalize_data ----------  #>       Package    Function.used                Time #> 1 masscleaner normalize_data() 2022-01-18 09:50:47 #> integrate_data ----------  #>       Package    Function.used                Time #> 1 masscleaner integrate_data() 2022-01-18 09:50:47 #> update_mass_dataset ----------  #>       Package         Function.used                Time #> 1 massdataset update_mass_dataset() 2022-01-19 21:53:37 #> mutate_ms2 ----------  #>       Package Function.used                Time #> 1 massdataset  mutate_ms2() 2022-01-19 21:54:06 #> annotate_metabolites_mass_dataset ----------  #>   Package                       Function.used                Time #> 1   metid annotate_metabolites_mass_dataset() 2022-01-19 22:57:19 #> 2   metid annotate_metabolites_mass_dataset() 2022-01-19 23:12:58 #> 3   metid annotate_metabolites_mass_dataset() 2022-01-19 23:40:34 #> merge_mass_dataset ----------  #>       Package      Function.used                Time #> 1 massdataset merge_mass_dataset 2022-02-22 16:39:33"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"trace-processing-information-of-object","dir":"Articles","previous_headings":"Statistical analysis","what":"Trace processing information of object","title":"Whole workflow using tidymass","text":"can use report_parameters() function trace processing information object. analysis results placed folder named statistical_analysis. html format file named parameter_report.html generated.","code":"dir.create(path = \"statistical_analysis\", showWarnings = FALSE) report_parameters(object = object, path = \"statistical_analysis/\")"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"remove-redundant-metabolites","dir":"Articles","previous_headings":"Statistical analysis","what":"Remove redundant metabolites","title":"Whole workflow using tidymass","text":"Remove redundant annotated metabolites bases Level score.","code":"object <-   object %>%    activate_mass_dataset(what = \"annotation_table\") %>%    group_by(Compound.name) %>%    filter(Level == min(Level)) %>%    filter(SS == max(SS)) %>%    slice_head(n = 1)"},{"path":[]},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"calculate-the-fold-changes-","dir":"Articles","previous_headings":"Statistical analysis > Differential expression metabolites","what":"Calculate the fold changes.","title":"Whole workflow using tidymass","text":"","code":"control_sample_id =   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Control\") %>%   pull(sample_id)  case_sample_id =   object %>%   activate_mass_dataset(what = \"sample_info\") %>%   filter(group == \"Case\") %>%   pull(sample_id) object <-   mutate_fc(object = object,              control_sample_id = control_sample_id,              case_sample_id = case_sample_id,              mean_median = \"mean\") #> 110 control samples. #> 110 case samples. #>"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"calculate-p-values-","dir":"Articles","previous_headings":"Statistical analysis > Differential expression metabolites","what":"Calculate p values.","title":"Whole workflow using tidymass","text":"","code":"object <-   mutate_p_value(     object = object,     control_sample_id = control_sample_id,     case_sample_id = case_sample_id,     method = \"t.test\",     p_adjust_methods = \"BH\"   ) #> 110 control samples. #> 110 case samples. #>"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"volcano-plot-","dir":"Articles","previous_headings":"Statistical analysis > Differential expression metabolites","what":"Volcano plot.","title":"Whole workflow using tidymass","text":"","code":"volcano_plot(object = object,              add_text = TRUE,              text_from = \"Compound.name\",               point_size_scale = \"p_value\") +   scale_size_continuous(range = c(0.5, 5))"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"output-result","dir":"Articles","previous_headings":"Statistical analysis","what":"Output result","title":"Whole workflow using tidymass","text":"Output differential expression metabolites.","code":"differential_metabolites <-    extract_variable_info(object = object) %>%    filter(fc > 2 | fc < 0.5) %>%    filter(p_value_adjust < 0.05)  readr::write_csv(differential_metabolites,                   file = \"statistical_analysis/differential_metabolites.csv\")"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"pathway-enrichment-analysis","dir":"Articles","previous_headings":"","what":"Pathway enrichment analysis","title":"Whole workflow using tidymass","text":"results placed folder named pathway_enrichment.","code":"dir.create(path = \"pathway_enrichment\", showWarnings = FALSE) diff_metabolites <-   object %>%    activate_mass_dataset(what = \"variable_info\") %>%    filter(p_value_adjust < 0.05) %>%    extract_variable_info() head(diff_metabolites) #>     variable_id        mz        rt    na_freq  na_freq.1  na_freq.2 na_freq_2 #> 1    M86T95_POS  86.09716  94.57264 0.02564103 0.55454545 0.29090909        NA #> 2 M95T100_1_POS  95.04975  99.77637 0.00000000 0.00000000 0.00000000        NA #> 3  M103T100_POS 103.05477  99.90601 0.00000000 0.00000000 0.00000000        NA #> 4   M104T51_POS 104.10746  51.27993 0.00000000 0.07272727 0.00000000        NA #> 5   M113T81_POS 113.03501  80.73506 0.00000000 0.00000000 0.00000000        NA #> 6  M113T187_POS 113.06018 186.56470 0.02564103 0.01818182 0.02727273        NA #>   na_freq.1_2 na_freq.2_2       fc      p_value p_value_adjust #> 1          NA          NA 1.714629 3.034938e-20   4.549454e-19 #> 2          NA          NA 1.439791 6.761432e-31   3.673711e-29 #> 3          NA          NA 1.345809 5.215317e-19   6.800774e-18 #> 4          NA          NA 1.751085 2.695171e-08   1.220314e-07 #> 5          NA          NA 1.500756 5.966911e-22   1.296809e-20 #> 6          NA          NA 1.951417 1.848299e-17   1.882955e-16 #>             Compound.name    CAS.ID HMDB.ID KEGG.ID     Lab.ID Adduct  mz.error #> 1              Piperidine  110-89-4    <NA>  C01746  MONA_2852 (M+H)+  1.746869 #> 2                  Phenol  108-95-2    <NA>  D01960 MONA_18506 (M+H)+  1.416428 #> 3 3-Amino-2-oxazolidinone   80-65-9    <NA>    <NA>    NO07231 (M+H)+ 11.537004 #> 4      5-Amino-1-pentanol 2508-29-4    <NA>    <NA>    NO07238 (M+H)+  1.169128 #> 5                  Uracil      <NA>    <NA>    <NA> MONA_15328 (M+H)+  1.275544 #> 6    1,4-Cyclohexanedione      <NA>    <NA>    <NA> MONA_14519 (M+H)+  1.051626 #>   mz.match.score RT.error RT.match.score                  CE        SS #> 1      0.9932417       NA             NA                  30 0.6143541 #> 2      0.9955515       NA             NA                  10 0.6102452 #> 3      0.7439487       NA             NA                  20 0.5020256 #> 4      0.9969671       NA             NA                   5 0.5971697 #> 5      0.9963909       NA             NA HCD (NCE 20-30-40%) 0.6748260 #> 6      0.9975454       NA             NA HCD (NCE 20-30-40%) 0.5401414 #>   Total.score   Database Level #> 1   0.7564369 MoNA_0.0.1     2 #> 2   0.7547351 MoNA_0.0.1     2 #> 3   0.5927468 NIST_0.0.1     2 #> 4   0.7470937 NIST_0.0.1     2 #> 5   0.7954128 MoNA_0.0.1     2 #> 6   0.7116679 MoNA_0.0.1     2"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"load-kegg-human-pathway-database","dir":"Articles","previous_headings":"Pathway enrichment analysis","what":"Load KEGG human pathway database","title":"Whole workflow using tidymass","text":"","code":"data(\"kegg_hsa_pathway\", package = \"metpath\") kegg_hsa_pathway #> ---------Pathway source&version--------- #> KEGG & 2021-12-13  #> -----------Pathway information------------ #> 345 pathways  #> 334 pathways have genes  #> 0 pathways have proteins  #> 281 pathways have compounds  #> Pathway class (top 10): Metabolism; Carbohydrate metabolism;Metabolism; Lipid metabolism  #> get_pathway_class(kegg_hsa_pathway) #> # A tibble: 43 × 2 #>    class                                                                       n #>    <chr>                                                                   <int> #>  1 Cellular Processes; Cell growth and death                                   8 #>  2 Cellular Processes; Cell motility                                           1 #>  3 Cellular Processes; Cellular community - eukaryotes                         5 #>  4 Cellular Processes; Transport and catabolism                                7 #>  5 Environmental Information Processing; Membrane transport                    1 #>  6 Environmental Information Processing; Signal transduction                  26 #>  7 Environmental Information Processing; Signaling molecules and interact…     5 #>  8 Genetic Information Processing; Folding, sorting and degradation            7 #>  9 Genetic Information Processing; Replication and repair                      7 #> 10 Genetic Information Processing; Transcription                               3 #> # … with 33 more rows"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"remove-the-disease-pathways","dir":"Articles","previous_headings":"Pathway enrichment analysis","what":"Remove the disease pathways:","title":"Whole workflow using tidymass","text":"","code":"#get the class of pathways pathway_class <-    metpath::pathway_class(kegg_hsa_pathway) head(pathway_class) #> $hsa00010 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00020 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00030 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00040 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00051 #> [1] \"Metabolism; Carbohydrate metabolism\" #>  #> $hsa00052 #> [1] \"Metabolism; Carbohydrate metabolism\" remain_idx <-   pathway_class %>%   unlist() %>%   stringr::str_detect(\"Disease\") %>%   `!`() %>%   which()  remain_idx #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  90  91  92  93  94 #>  [91]  95  96  97  98  99 100 101 102 103 104 105 106 107 108 109 110 111 112 #> [109] 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 #> [127] 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 #> [145] 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 #> [163] 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 #> [181] 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 #> [199] 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 #> [217] 221 222 223 224 225 226 227 228 229 230 236 240 241 242 243 244 245 246 #> [235] 247 248 249 250 251 252 253 254 pathway_database <-   kegg_hsa_pathway[remain_idx] pathway_database #> ---------Pathway source&version--------- #> KEGG & 2021-12-13  #> -----------Pathway information------------ #> 242 pathways  #> 235 pathways have genes  #> 0 pathways have proteins  #> 191 pathways have compounds  #> Pathway class (top 10): Metabolism; Carbohydrate metabolism;Metabolism; Lipid metabolism  #>"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"pathway-enrichment","dir":"Articles","previous_headings":"Pathway enrichment analysis","what":"Pathway enrichment","title":"Whole workflow using tidymass","text":"","code":"kegg_id <-   diff_metabolites$KEGG.ID  kegg_id <-   kegg_id[!is.na(kegg_id)] kegg_id #>  [1] \"C01746\" \"D01960\" \"C00148\" \"C00153\" \"C01108\" \"C00906\" \"C10438\" \"C00300\" #>  [9] \"C00407\" \"C02505\" \"C14790\" \"C08493\" \"C02237\" \"C00073\" \"C05842\" \"C00637\" #> [17] \"D00022\" \"C07481\" \"C17846\" \"D00029\" \"C00399\" \"C08362\" \"C14214\" \"C06427\" #> [25] \"C01595\" \"C00410\" \"C10523\" \"C01780\" \"C00762\" \"C00735\" \"C17337\" \"C01921\" #> [33] \"C04230\" \"C06539\" \"C00186\" \"C01546\" \"C00490\" \"C02226\" \"C00064\" \"C06104\" #> [41] \"C02612\" \"C07599\" \"C01601\" \"C00079\" \"C07130\" \"C05635\" \"C00864\" \"C16038\" #> [49] \"C08322\" \"C16308\" \"C10911\" \"C06429\" \"C05498\" \"C05472\" \"C04555\" result <-  enrich_kegg(query_id = kegg_id,              query_type = \"compound\",              id_type = \"KEGG\",             pathway_database = pathway_database,              p_cutoff = 0.05,              p_adjust_method = \"BH\",              threads = 3) #> 191 pathways."},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"check-the-result","dir":"Articles","previous_headings":"Pathway enrichment analysis","what":"Check the result:","title":"Whole workflow using tidymass","text":"","code":"result #> ---------Pathway database&version--------- #> KEGG & 2021-12-13  #> -----------Enrichment result------------ #> 191 pathways are enriched  #> 10 pathways p-values < 0.05  #> Glycolysis / Gluconeogenesis;Citrate cycle (TCA cycle);Pentose phosphate pathway;Pentose and glucuronate interconversions;Fructose and mannose metabolism ... (only top 5 shows) #>"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"plot-to-show-pathway-enrichment-result","dir":"Articles","previous_headings":"Pathway enrichment analysis","what":"Plot to show pathway enrichment result","title":"Whole workflow using tidymass","text":"","code":"enrich_bar_plot(object = result,                 x_axis = \"p_value\",                 cutoff = 0.05) enrich_scatter_plot(object = result, y_axis = \"p_value\", y_axis_cutoff = 0.05) enrich_network(   object = result,   point_size = \"p_value\",   p_cutoff = 0.05,   only_significant_pathway = TRUE )"},{"path":"https://tidymass.github.io/tidymass/articles/whole_workflow.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Whole workflow using tidymass","text":"","code":"sessionInfo() #> R version 4.1.2 (2021-11-01) #> Platform: x86_64-apple-darwin17.0 (64-bit) #> Running under: macOS Big Sur 10.16 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib #> LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> attached base packages: #> [1] stats4    stats     graphics  grDevices utils     datasets  methods   #> [8] base      #>  #> other attached packages: #>  [1] knitr_1.37           forcats_0.5.1        stringr_1.4.0        #>  [4] purrr_0.3.4          readr_2.1.2          tidyr_1.2.0          #>  [7] tibble_3.1.6         tidyverse_1.3.1      dplyr_1.0.8          #> [10] metid_1.2.2          metpath_0.99.2       massstat_0.99.6      #> [13] ggfortify_0.4.14     ggplot2_3.3.5        massqc_0.99.3        #> [16] masscleaner_0.99.3   xcms_3.16.1          MSnbase_2.20.4       #> [19] ProtGenerics_1.26.0  S4Vectors_0.32.3     mzR_2.28.0           #> [22] Rcpp_1.0.8           Biobase_2.54.0       BiocGenerics_0.40.0  #> [25] BiocParallel_1.28.3  massprocesser_0.99.3 magrittr_2.0.2       #> [28] masstools_0.99.3     massdataset_0.99.8   tidymass_0.99.4      #>  #> loaded via a namespace (and not attached): #>   [1] ragg_1.2.1                  bit64_4.0.5                 #>   [3] missForest_1.4              DelayedArray_0.20.0         #>   [5] data.table_1.14.2           rpart_4.1.16                #>   [7] KEGGREST_1.34.0             RCurl_1.98-1.5              #>   [9] doParallel_1.0.17           generics_0.1.2              #>  [11] snow_0.4-4                  leaflet_2.1.0               #>  [13] preprocessCore_1.56.0       mixOmics_6.18.1             #>  [15] RANN_2.6.1                  proxy_0.4-26                #>  [17] future_1.23.0               bit_4.0.4                   #>  [19] tzdb_0.2.0                  xml2_1.3.3                  #>  [21] lubridate_1.8.0             ggsci_2.9                   #>  [23] SummarizedExperiment_1.24.0 assertthat_0.2.1            #>  [25] viridis_0.6.2               xfun_0.29                   #>  [27] hms_1.1.1                   jquerylib_0.1.4             #>  [29] evaluate_0.15               DEoptimR_1.0-10             #>  [31] fansi_1.0.2                 dbplyr_2.1.1                #>  [33] readxl_1.3.1                igraph_1.2.11               #>  [35] DBI_1.1.2                   htmlwidgets_1.5.4           #>  [37] MsFeatures_1.3.0            rARPACK_0.11-0              #>  [39] ellipsis_0.3.2              RSpectra_0.16-0             #>  [41] crosstalk_1.2.0             backports_1.4.1             #>  [43] ggcorrplot_0.1.3            MatrixGenerics_1.6.0        #>  [45] vctrs_0.3.8                 remotes_2.4.2               #>  [47] cachem_1.0.6                withr_2.4.3                 #>  [49] ggforce_0.3.3               itertools_0.1-3             #>  [51] robustbase_0.93-9           vroom_1.5.7                 #>  [53] checkmate_2.0.0             cluster_2.1.2               #>  [55] lazyeval_0.2.2              crayon_1.5.0                #>  [57] ellipse_0.4.2               labeling_0.4.2              #>  [59] pkgconfig_2.0.3             tweenr_1.0.2                #>  [61] GenomeInfoDb_1.30.0         nnet_7.3-17                 #>  [63] rlang_1.0.1                 globals_0.14.0              #>  [65] lifecycle_1.0.1             affyio_1.64.0               #>  [67] extrafontdb_1.0             fastDummies_1.6.3           #>  [69] MassSpecWavelet_1.60.0      modelr_0.1.8                #>  [71] cellranger_1.1.0            randomForest_4.7-1          #>  [73] rprojroot_2.0.2             polyclip_1.10-0             #>  [75] matrixStats_0.61.0          Matrix_1.4-0                #>  [77] reprex_2.0.1                base64enc_0.1-3             #>  [79] GlobalOptions_0.1.2         png_0.1-7                   #>  [81] viridisLite_0.4.0           rjson_0.2.21                #>  [83] clisymbols_1.2.0            bitops_1.0-7                #>  [85] pander_0.6.4                Biostrings_2.62.0           #>  [87] shape_1.4.6                 parallelly_1.30.0           #>  [89] robust_0.7-0                jpeg_0.1-9                  #>  [91] gridGraphics_0.5-1          scales_1.1.1                #>  [93] memoise_2.0.1               plyr_1.8.6                  #>  [95] zlibbioc_1.40.0             compiler_4.1.2              #>  [97] RColorBrewer_1.1-2          pcaMethods_1.86.0           #>  [99] clue_0.3-60                 rrcov_1.6-2                 #> [101] cli_3.2.0                   affy_1.72.0                 #> [103] XVector_0.34.0              listenv_0.8.0               #> [105] patchwork_1.1.1             pbapply_1.5-0               #> [107] htmlTable_2.4.0             Formula_1.2-4               #> [109] MASS_7.3-55                 tidyselect_1.1.1            #> [111] vsn_3.62.0                  stringi_1.7.6               #> [113] textshaping_0.3.6           highr_0.9                   #> [115] yaml_2.3.4                  latticeExtra_0.6-29         #> [117] MALDIquant_1.21             ggrepel_0.9.1               #> [119] grid_4.1.2                  sass_0.4.0                  #> [121] tools_4.1.2                 parallel_4.1.2              #> [123] circlize_0.4.14             rstudioapi_0.13             #> [125] MsCoreUtils_1.6.0           foreach_1.5.2               #> [127] foreign_0.8-82              gridExtra_2.3               #> [129] farver_2.1.0                mzID_1.32.0                 #> [131] ggraph_2.0.5                rvcheck_0.2.1               #> [133] digest_0.6.29               BiocManager_1.30.16         #> [135] GenomicRanges_1.46.1        broom_0.7.12                #> [137] ncdf4_1.19                  httr_1.4.2                  #> [139] ComplexHeatmap_2.10.0       colorspace_2.0-2            #> [141] rvest_1.0.2                 XML_3.99-0.8                #> [143] fs_1.5.2                    IRanges_2.28.0              #> [145] splines_4.1.2               yulab.utils_0.0.4           #> [147] graphlayouts_0.8.0          pkgdown_2.0.2               #> [149] ggplotify_0.1.0             plotly_4.10.0               #> [151] systemfonts_1.0.3           fit.models_0.64             #> [153] jsonlite_1.7.3              tidygraph_1.2.0             #> [155] corpcor_1.6.10              R6_2.5.1                    #> [157] Hmisc_4.6-0                 pillar_1.7.0                #> [159] htmltools_0.5.2             glue_1.6.1                  #> [161] fastmap_1.1.0               class_7.3-20                #> [163] codetools_0.2-18            pcaPP_1.9-74                #> [165] mvtnorm_1.1-3               furrr_0.2.3                 #> [167] utf8_1.2.2                  lattice_0.20-45             #> [169] bslib_0.3.1                 magick_2.7.3                #> [171] zip_2.2.0                   openxlsx_4.2.5              #> [173] Rttf2pt1_1.3.9              survival_3.2-13             #> [175] limma_3.50.0                rmarkdown_2.11              #> [177] desc_1.4.0                  munsell_0.5.0               #> [179] e1071_1.7-9                 GetoptLong_1.0.5            #> [181] GenomeInfoDbData_1.2.7      iterators_1.0.14            #> [183] impute_1.68.0               haven_2.4.3                 #> [185] reshape2_1.4.4              gtable_0.3.0                #> [187] extrafont_0.17"},{"path":"https://tidymass.github.io/tidymass/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Xiaotao Shen. Author, maintainer. Hong Yan. Contributor. Chuchu Wang. Contributor.","code":""},{"path":"https://tidymass.github.io/tidymass/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Shen X (2022). tidymass: R packages mass spectrometry data processing analysis. R package version 0.99.6.","code":"@Manual{,   title = {tidymass: R packages for mass spectrometry data processing and analysis},   author = {Xiaotao Shen},   year = {2022},   note = {R package version 0.99.6}, }"},{"path":"https://tidymass.github.io/tidymass/index.html","id":"tidymass-an-object-oriented-reproducible-analysis-framework-for-lc-ms-data-","dir":"","previous_headings":"","what":"Tidymass: An Object-oriented Reproducible Analysis Framework for LC-MS Data","title":"tidymass","text":"TidyMass project comprehensive computational framework can process whole workflow data processing analysis LC-MS-based untargeted metabolomics, including raw data processing (peak detecting), data cleaning (missing value processing, data normalization, integration), statistical analysis, metabolite annotation, biological function mining (pathway enrichment, feature-based metabolic module analysis). TidyMass designed based following strategies address limitations current tools. (1) Cross-platform utility (2) Uniform, shareable, traceable, reproducible Analysis workflow tidyMass   mass_dataset class property   can install tidymass GitHub, GitLab Gitee. Option 1: GitHub Option 2: GitLab Option 3: Gitee information can found .  questions tidymass, please don’t hesitate email (shenxt@stanford.edu) reach via social medias . shenxt1990 shenxt@stanford.edu Twitter M339, Alway Buidling, Cooper Lane, Palo Alto, CA 94304 use tidymass publications, please cite publication: X. Shen, R. Wang, X. Xiong, Y. Yin, Y. Cai, Z. Ma, N. Liu, Z.-J. Zhu* (Corresponding Author), Metabolic Reaction Network-based Recursive Metabolite Annotation Untargeted Metabolomics, Nature Communications, 2019, 10: 1516.Web Link. Thank much!","code":"if(!require(remotes)){ install.packages(\"remotes\") } remotes::install_github(\"tidymass/tidymass\") remotes::install_gitlab(\"jaspershen/tidymass\") remotes::install_git(url = \"https://gitee.com/jaspershen/tidymass\", dependencies = TRUE)"},{"path":"https://tidymass.github.io/tidymass/reference/check_tidymass_version.html","id":null,"dir":"Reference","previous_headings":"","what":"check_tidymass_version — check_tidymass_version","title":"check_tidymass_version — check_tidymass_version","text":"Check packages tidymass can updated.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/check_tidymass_version.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"check_tidymass_version — check_tidymass_version","text":"","code":"check_tidymass_version(packages = c(\"core\", \"all\"))"},{"path":"https://tidymass.github.io/tidymass/reference/check_tidymass_version.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"check_tidymass_version — check_tidymass_version","text":"packages core packages tidymass. \"core\" means core packages tidymass \"\" means packages tidymass.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/check_tidymass_version.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"check_tidymass_version — check_tidymass_version","text":"Xiaotao Shen shenxt1990@outlook.com","code":""},{"path":"https://tidymass.github.io/tidymass/reference/mutate_ms2.html","id":null,"dir":"Reference","previous_headings":"","what":"Mutate MS2 spectra for each variable — mutate_ms2","title":"Mutate MS2 spectra for each variable — mutate_ms2","text":"Mutate MS2 spectra variable","code":""},{"path":"https://tidymass.github.io/tidymass/reference/mutate_ms2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mutate MS2 spectra for each variable — mutate_ms2","text":"","code":"mutate_ms2(   object,   column = c(\"rp\", \"hilic\"),   polarity = c(\"positive\", \"negative\"),   ms1.ms2.match.mz.tol = 15,   ms1.ms2.match.rt.tol = 30,   path = \".\" )"},{"path":"https://tidymass.github.io/tidymass/reference/mutate_ms2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mutate MS2 spectra for each variable — mutate_ms2","text":"object (required) mass_dataset class object. column rp hilic. polarity positive negative ms1.ms2.match.mz.tol default 15 ppm. ms1.ms2.match.rt.tol default 30 seconds. path work directory. path, please provide MS2 msp data.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/mutate_ms2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mutate MS2 spectra for each variable — mutate_ms2","text":"mass_dataset object new added ms2 data.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/mutate_ms2.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Mutate MS2 spectra for each variable — mutate_ms2","text":"Xiaotao Shen shenxt1990@outlook.com","code":""},{"path":"https://tidymass.github.io/tidymass/reference/mutate_ms2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mutate MS2 spectra for each variable — mutate_ms2","text":"","code":"if (FALSE) { data(\"expression_data\") data(\"sample_info\") data(\"variable_info\") object =   create_mass_dataset(     expression_data = expression_data,     sample_info = sample_info,     variable_info = variable_info,   )  object  dir.create(\"demo_data\") system.file(\"ms2_data\", package = \"metid\") file.copy(file.path(system.file(\"ms2_data\", package = \"massdataset\"), \"QC_MS2_NCE25_1.mgf\"),           to = \"demo_data\", overwrite = TRUE)  object =   mutate_ms2(object = object, column = \"rp\", polarity = \"positive\")  object@ms2_data }"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_conflicts.html","id":null,"dir":"Reference","previous_headings":"","what":"Conflicts between the tidymass and other packages — tidymass_conflicts","title":"Conflicts between the tidymass and other packages — tidymass_conflicts","text":"function lists conflicts packages tidymass packages loaded.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_conflicts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conflicts between the tidymass and other packages — tidymass_conflicts","text":"","code":"tidymass_conflicts()"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_conflicts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Conflicts between the tidymass and other packages — tidymass_conflicts","text":"four conflicts deliberately ignored: intersect, union, setequal, setdiff dplyr. functions make base equivalents generic, negatively affect existing code.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_conflicts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Conflicts between the tidymass and other packages — tidymass_conflicts","text":"","code":"tidymass_conflicts() #> ── Conflicts ─────────────────────────────────────────── tidymass_conflicts() ── #> ✖ massdataset::apply()     masks base::apply() #> ✖ BiocGenerics::colMeans() masks massdataset::colMeans(), base::colMeans() #> ✖ BiocGenerics::colSums()  masks massdataset::colSums(), base::colSums() #> ✖ dplyr::collect()         masks xcms::collect() #> ✖ dplyr::combine()         masks MSnbase::combine(), Biobase::combine(), BiocGenerics::combine() #> ✖ dplyr::filter()          masks metpath::filter(), massdataset::filter(), stats::filter() #> ✖ dplyr::first()           masks S4Vectors::first() #> ✖ dplyr::groups()          masks xcms::groups() #> ✖ S4Vectors::intersect()   masks BiocGenerics::intersect(), massdataset::intersect(), base::intersect() #> ✖ dplyr::lag()             masks stats::lag() #> ✖ masstools::mz_rt_match() masks massdataset::mz_rt_match() #> ✖ dplyr::rename()          masks S4Vectors::rename(), massdataset::rename() #> ✖ BiocGenerics::rowMeans() masks massdataset::rowMeans(), base::rowMeans() #> ✖ BiocGenerics::rowSums()  masks massdataset::rowSums(), base::rowSums()"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_deps.html","id":null,"dir":"Reference","previous_headings":"","what":"List all tidymass dependencies — tidymass_deps","title":"List all tidymass dependencies — tidymass_deps","text":"List tidymass dependencies","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_deps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List all tidymass dependencies — tidymass_deps","text":"","code":"tidymass_deps(recursive = FALSE, repos = getOption(\"repos\"))"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_deps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List all tidymass dependencies — tidymass_deps","text":"recursive TRUE, also list dependencies tidymass packages. repos repositories use check updates. Defaults getOption(\"repos\").","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_install.html","id":null,"dir":"Reference","previous_headings":"","what":"tidymass_install — tidymass_install","title":"tidymass_install — tidymass_install","text":"Install packages tidymass.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_install.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tidymass_install — tidymass_install","text":"","code":"tidymass_install(   force = FALSE,   upgrade = \"never\",   dependencies = NA,   demo_data = TRUE,   which_package = c(\"all\", \"massdataset\", \"massprocesser\", \"masscleaner\", \"massqc\",     \"metid\", \"massstat\", \"metpath\", \"masstools\"),   ... )"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_install.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tidymass_install — tidymass_install","text":"force Force installation, even remote state changed since previous install. upgrade One \"default\", \"ask\", \"always\", \"never\". \"default\" respects value R_REMOTES_UPGRADE environment variable set, falls back \"ask\" unset. \"ask\" prompts user date packages upgrade. non-interactive sessions \"ask\" equivalent \"always\". TRUE FALSE also accepted correspond \"always\" \"never\" respectively. dependencies dependencies want check? Can character vector (selecting \"Depends\", \"Imports\", \"LinkingTo\", \"Suggests\", \"Enhances\"), logical vector.TRUE shorthand \"Depends\", \"Imports\", \"LinkingTo\" \"Suggests\". NA shorthand \"Depends\", \"Imports\" \"LinkingTo\" default. FALSE shorthand dependencies (.e. just check package, dependencies). value \"soft\" means TRUE, \"hard\" means NA. demo_data Install demo_data package . which_package packages want install? Default . can set character vector. ... parameters devtools::install_github() devtools::install_git()","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_install.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"tidymass_install — tidymass_install","text":"Xiaotao Shen shenxt1990@outlook.com","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_logo.html","id":null,"dir":"Reference","previous_headings":"","what":"Show the logo tidymass. — tidymass_logo","title":"Show the logo tidymass. — tidymass_logo","text":"tidymass logo, using ASCII Unicode characters","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_logo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show the logo tidymass. — tidymass_logo","text":"","code":"tidymass_logo(unicode = l10n_info()$`UTF-8`)"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_logo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show the logo tidymass. — tidymass_logo","text":"unicode Whether use Unicode symbols. Default TRUE UTF-8 platforms.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_logo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Show the logo tidymass. — tidymass_logo","text":"ASCII log tidymass","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_logo.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Show the logo tidymass. — tidymass_logo","text":"Xiaotao Shen shenxt1990@outlook.com","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_logo.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Show the logo tidymass. — tidymass_logo","text":"","code":"tidymass_logo() #> Thank you for using tidymass! #>  #> Version 0.99.6 ( 2022-03-09 21:49:53 ) #>  #> More information can be found at https://tidymass.github.io/tidymass/ #>  #> ⬢ __  _    __   .    ⬡           ⬢  .  #>   _   _     _                                #>  | | (_)   | |                               #>  | |_ _  __| |_   _ _ __ ___   __ _ ___ ___  #>  | __| |/ _` | | | | '_ ` _ \\ / _` / __/ __| #>  | |_| | (_| | |_| | | | | | | (_| \\__ \\__ \\ #>   \\__|_|\\__,_|\\__, |_| |_| |_|\\__,_|___/___/ #>                __/ |                         #>               |___/                          #>      ⬢  . /___/      ⬡      .       ⬢"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_packages.html","id":null,"dir":"Reference","previous_headings":"","what":"List all packages in the tidymass — tidymass_packages","title":"List all packages in the tidymass — tidymass_packages","text":"List packages tidymass","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_packages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List all packages in the tidymass — tidymass_packages","text":"","code":"tidymass_packages(include_self = TRUE)"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_packages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List all packages in the tidymass — tidymass_packages","text":"include_self Include tidymass list?","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_packages.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List all packages in the tidymass — tidymass_packages","text":"","code":"tidymass_packages() #>  [1] \"crayon\"        \"purrr\"         \"stringr\"       \"cli\"           #>  [5] \"magrittr\"      \"rstudioapi\"    \"dplyr\"         \"masstools\"     #>  [9] \"massdataset\"   \"massprocesser\" \"masscleaner\"   \"massstat\"      #> [13] \"metpath\"       \"metid\"         \"massqc\"        \"rvcheck\"       #> [17] \"remotes\"       \"tidymass\""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_sitrep.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a situation report on the tidymass — tidymass_sitrep","title":"Get a situation report on the tidymass — tidymass_sitrep","text":"function gives quick overview versions R RStudio well tidymass packages. primarily designed help get quick idea going helping someone else debug problem.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_sitrep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a situation report on the tidymass — tidymass_sitrep","text":"","code":"tidymass_sitrep()"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_update.html","id":null,"dir":"Reference","previous_headings":"","what":"Update tidymass packages — tidymass_update","title":"Update tidymass packages — tidymass_update","text":"check see tidymass packages (optionally, dependencies) --date, install interactive confirmation.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_update.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update tidymass packages — tidymass_update","text":"","code":"tidymass_update(recursive = FALSE, repos = getOption(\"repos\"))"},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_update.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update tidymass packages — tidymass_update","text":"recursive TRUE, also list dependencies tidymass packages. repos repositories use check updates. Defaults getOption(\"repos\").","code":""},{"path":"https://tidymass.github.io/tidymass/reference/tidymass_update.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Update tidymass packages — tidymass_update","text":"","code":"if (FALSE) { tidymass_update() }"},{"path":"https://tidymass.github.io/tidymass/reference/update_tidymass.html","id":null,"dir":"Reference","previous_headings":"","what":"update_tidymass — update_tidymass","title":"update_tidymass — update_tidymass","text":"Update packages tidymass.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/update_tidymass.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"update_tidymass — update_tidymass","text":"","code":"update_tidymass(   packages = c(\"core\", \"all\"),   from = c(\"github\", \"gitlab\", \"gitee\") )"},{"path":"https://tidymass.github.io/tidymass/reference/update_tidymass.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"update_tidymass — update_tidymass","text":"packages core packages tidymass. \"core\" means core packages tidymass \"\" means packages tidymass. github, gitlab gitee.","code":""},{"path":"https://tidymass.github.io/tidymass/reference/update_tidymass.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"update_tidymass — update_tidymass","text":"Xiaotao Shen shenxt1990@outlook.com","code":""},{"path":"https://tidymass.github.io/tidymass/news/index.html","id":"version-001-20210210","dir":"Changelog","previous_headings":"","what":"Version 0.0.1 (20210210)","title":"Version 0.0.1 (20210210)","text":"o Creatation.","code":""}]
